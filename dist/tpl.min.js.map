{"version":3,"file":null,"sources":["../tpl.js/src/expression.js","../tpl.js/src/dom/core.js","../tpl.js/src/dom/attr.js","../tpl.js/src/dom/css.js","../tpl.js/src/dom/val.js","../tpl.js/src/dom/event.js","../tpl.js/src/dom/ready.js","../tpl.js/src/util.js","../tpl.js/src/index.js","../tpl.js/src/template/TextParser.js","../tpl.js/src/config.js","../tpl.js/src/binding/Binding.js","../tpl.js/src/log.js","../tpl.js/src/translate.js","../tpl.js/src/binding/Text.js","../tpl.js/src/binding/Directive.js","../tpl.js/src/binding/DirectiveGroup.js","../tpl.js/src/template/DirectiveParser.js","../tpl.js/src/template/Template.js","../tpl.js/src/template/DomParser.js","../tpl.js/src/template/index.js","../tpl.js/src/directives/each.js","../tpl.js/src/directives/event.js","../tpl.js/src/directives/simple.js","../tpl.js/src/directives/index.js"],"sourcesContent":["import translate from './translate'\nimport _ from 'utility'\n\nconst defaultKeywords = _.reverseConvert('Math,Date,this,true,false,null,undefined,Infinity,NaN,isNaN,isFinite,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,parseInt,parseFloat,$scope'.split(','), () => true),\n  wsReg = /\\s/g,\n  newlineReg = /\\n/g,\n  translationReg = /[\\{,]\\s*[\\w\\$_]+\\s*:|('(?:[^'\\\\]|\\\\.)*'|\"(?:[^\"\\\\]|\\\\.)*\"|`(?:[^`\\\\]|\\\\.)*\\$\\{|\\}(?:[^`\\\\]|\\\\.)*`|`(?:[^`\\\\]|\\\\.)*`)|new |typeof |void |(\\|\\|)/g,\n  translationRestoreReg = /\"(\\d+)\"/g,\n  pathTestReg = /^[A-Za-z_$][\\w$]*(?:\\.[A-Za-z_$][\\w$]*|\\['.*?'\\]|\\[\".*?\"\\]|\\[\\d+\\]|\\[[A-Za-z_$][\\w$]*\\])*$/,\n  booleanLiteralReg = /^(?:true|false)$/,\n  identityReg = /[A-Za-z_$][\\w$]*(?:\\.[A-Za-z_$][\\w$]*|\\['.*?'\\]|\\[\".*?\"\\]|\\[\\d+\\]|\\[[A-Za-z_$][\\w$]*\\])*[^\\w$\\.]/g,\n  propReg = /^[A-Za-z_$][\\w$]*/\n\nlet translations = []\n\nfunction translationProcessor(str, isString) {\n  let i = translations.length\n  translations[i] = isString ? str.replace(newlineReg, '\\\\n') : str\n  return `\"${i}\"`\n}\n\nfunction translationRestoreProcessor(str, i) {\n  return translations[i]\n}\n\nlet currentIdentities, currentKeywords, prevPropScope\n\nfunction identityProcessor(raw, idx, str) {\n  let l = raw.length,\n    suffix = raw.charAt(l - 1),\n    exp = raw.slice(0, l - 1),\n    prop = exp.match(propReg)[0]\n\n  if (defaultKeywords[prop] || currentKeywords[prop])\n    return raw\n  if (prop === '$context')\n    return raw.replace(propReg, prevPropScope)\n  if (suffix == '(') {\n    suffix = (idx + l == str.length || str.charAt(idx + l) == ')') ? '' : ','\n    prevPropScope = `this.propScope('${prop}')`\n    return `$scope.${exp}.call(${prevPropScope}${suffix}`\n  }\n  currentIdentities[exp] = true\n  return `$scope.${exp}${suffix}`\n}\n\nfunction complileExpr(body) {\n  prevPropScope = undefined;\n  return (body + ' ').replace(identityReg, identityProcessor)\n    .replace(translationRestoreReg, translationRestoreProcessor);\n}\n\nfunction compileFilterArgs(argExprs, keywords) {\n  for (let i = 0, l = argExprs.length; i < l; i++) {\n    argExprs[i] = makeExecuter(complileExpr(argExprs[i]), keywords);\n  }\n  return argExprs;\n}\n\nfunction compileFilter(filterExprs, keywords) {\n  if (!filterExprs || !filterExprs.length)\n    return [];\n\n  let filters = [],\n    filterExpr, name, argExprs\n\n  for (let i = 0, l = filterExprs.length; i < l; i++) {\n    if ((filterExpr = _.trim(filterExprs[i]))) {\n      argExprs = filterExpr.replace(/,?\\s+/g, ',').split(',')\n      filters.push({\n        name: argExprs.shift().replace(translationRestoreReg, translationRestoreProcessor),\n        args: compileFilterArgs(argExprs, keywords)\n      })\n    }\n  }\n  return filters\n}\n\nfunction compileExecuter(exp, keywords) {\n  let filterExprs, ret,\n    isSimple = isSimplePath(exp)\n\n  currentIdentities = {}\n  currentKeywords = keywords ? _.reverseConvert(keywords, () => true) : {}\n\n  if (!isSimple) {\n    filterExprs = exp.replace(translationReg, translationProcessor).split('|')\n    exp = filterExprs.shift().replace(wsReg, '')\n    isSimple = isSimplePath(exp)\n  }\n  if (isSimple) {\n    exp = exp.replace(translationRestoreReg, translationRestoreProcessor)\n    currentIdentities[exp] = true\n    ret = {\n      execute: makeExecuter(`$scope.${exp}`, keywords),\n      path: _.parseExpr(exp),\n      expr: exp\n    }\n  } else {\n    ret = {\n      execute: makeExecuter(complileExpr(exp), keywords),\n      expr: exp\n    }\n  }\n  ret.filters = compileFilter(filterExprs, keywords)\n  ret.simplePath = isSimple;\n  ret.identities = _.keys(currentIdentities)\n\n  currentKeywords = undefined\n  currentIdentities = undefined\n  translations.length = 0\n  ret.applyFilter = function(data, argScope, args, apply) {\n    let fs = ret.filters,\n      f, _args, rs\n\n    for (let i = 0, l = fs.length; i < l; i++) {\n      f = fs[i]\n      _args = parseFilterArgs(f.args, argScope, args)\n      rs = (apply !== false ? translate.apply : translate.unapply)(f.name, data, _args)\n      if (rs.stop) {\n        return rs.data\n      } else if (rs.replaceData)\n        data = rs.data\n    }\n    return data\n  }\n  ret.executeAll = function() {\n    let val = ret.execute.apply(this, arguments)\n    val = ret.applyFilter(val, this, arguments)\n    return val\n  }\n  return ret\n}\n\nfunction parseFilterArgs(executors, scope, args) {\n  return _.map(executors, (executor) => {\n    return executor.apply(scope, args)\n  })\n}\n\nfunction makeExecuter(body, args) {\n  let _args = ['$scope']\n\n  args = args ? _args.concat(args) : _args\n  args.push(`return ${body};`)\n  try {\n    return Function.apply(Function, args)\n  } catch (e) {\n    throw Error(`Invalid expression. Generated function body: ${body}`)\n  }\n}\n\nfunction isSimplePath(exp) {\n  return pathTestReg.test(exp) &&\n    !booleanLiteralReg.test(exp)\n}\n\nlet cache = {}\n\nexport default function expression(exp, args) {\n  let res\n\n  exp = _.trim(exp)\n  if (!(res = cache[exp]))\n    cache[exp] = res = compileExecuter(exp, args)\n  return res\n}\n","import _ from 'utility'\n\nconst textContent = typeof document.createElement('div').textContent == 'string' ? 'textContent' : 'innerText'\n\nfunction firstEl(el) {\n  return _.isArrayLike(el) ? el[0] : el\n}\n\nfunction lastEl(el) {\n  return _.isArrayLike(el) ? el[el.length - 1] : el\n}\n\nfunction apply(coll, callback) {\n  _.isArrayLike(coll) ? _.each(coll, callback) : callback(coll)\n}\n\nlet dom = {\n  W3C: !!window.dispatchEvent,\n  inDoc(el, root) {\n    root = root || document.documentElement\n    if (root.contains)\n      return root.contains(el)\n    try {\n      while ((el = el.parentNode)) {\n        if (el === root)\n          return true\n      }\n    } catch (e) {}\n    return false\n  },\n  query(selectors, all) {\n    if (_.isString(selectors))\n      return all ? document.querySelectorAll(selectors) : document.querySelector(selectors)\n    return selectors\n  },\n  cloneNode(el, deep) {\n    function clone(el) {\n      return el.cloneNode(deep !== false)\n    }\n    return _.isArrayLike(el) ? _.map(el, clone) : clone(el)\n  },\n  parent(el) {\n    return firstEl(el).parentNode\n  },\n  next(el, all) {\n    el = lastEl(el)\n    return all ? el.nextSibling : el.nextElementSibling\n  },\n  prev(el, all) {\n    el = firstEl(el)\n    return all ? el.previousSibling : el.previousElementSibling\n  },\n  children(el, all) {\n    el = firstEl(el)\n    return all ? el.childNodes : el.children\n  },\n  remove(el) {\n    apply(el, (el) => {\n      let parent = el.parentNode\n      if (parent)\n        parent.removeChild(el)\n    })\n    return dom\n  },\n  before(el, target) {\n    target = firstEl(target)\n    let parent = target.parentNode\n    apply(el, (el) => {\n      parent.insertBefore(el, target)\n    })\n    return dom\n  },\n  after(el, target) {\n    target = lastEl(target)\n    let parent = target.parentNode\n\n    apply(el, parent.lastChild === target ? (el) => {\n      parent.insertBefore(el, target)\n    } : (() => {\n      let next = target.nextSibling\n      return (el) => {\n        parent.insertBefore(el, next)\n      }\n    })())\n    return dom\n  },\n  append(target, el) {\n    target = firstEl(target)\n    apply(el, (el) => {\n      target.appendChild(el)\n    })\n    return dom\n  },\n  prepend(target, el) {\n    target.firstChild ? dom.before(el, el.firstChild) : dom.append(target, el)\n    return dom\n  },\n  replace(source, target) {\n    let parent = source.parentNode\n    parent.replaceChild(target, source)\n  },\n  html(el, html) {\n    return arguments.length > 1 ? (el.innerHTML = html) : el.innerHTML\n  },\n  outerHtml(el) {\n    if (el.outerHTML)\n      return el.outerHTML\n\n    let container = document.createElement('div')\n    container.appendChild(el.cloneNode(true))\n    return container.innerHTML\n  },\n  text(el, text) {\n    if (el.nodeType == 3)\n      return arguments.length > 1 ? (el.data = text) : el.data\n    return arguments.length > 1 ? (el[textContent] = text) : el[textContent]\n  },\n  focus(el) {\n    el.focus()\n    return dom\n  }\n}\n\nexport default dom\n\n//====================== Query =============================\nif (!document.querySelectorAll) {\n  document.querySelectorAll = function querySelectorAll(selector) {\n    let doc = document,\n      head = doc.documentElement.firstChild,\n      styleTag = doc.createElement('STYLE')\n\n    head.appendChild(styleTag)\n    doc.__qsaels = []\n    if (styleTag.styleSheet) { // for IE\n      styleTag.styleSheet.cssText = selector + '{x:expression(document.__qsaels.push(this))}'\n    } else { // others\n      let textnode = document.createTextNode(selector + '{x:expression(document.__qsaels.push(this))}')\n      styleTag.appendChild(textnode)\n    }\n    window.scrollBy(0, 0)\n    return doc.__qsaels\n  }\n}\nif (!document.querySelector) {\n  document.querySelector = function querySelector(selectors) {\n    let elements = document.querySelectorAll(selectors)\n    return elements.length ? elements[0] : null\n  }\n}\n","import dom from './core'\nimport _ from 'utility'\n\nconst rfocusable = /^(?:input|select|textarea|button|object)$/i,\n  rclickable = /^(?:a|area)$/i\n\nexport default _.assign(dom, {\n  prop(el, name, value) {\n    name = dom.propFix[name] || name\n    let hook = dom.propHooks[name]\n\n    if (arguments.length == 2)\n      return hook && hook.get ? hook.get(el, name) : el[name]\n    hook && hook.set ? hook.set(el, name, value) : (el[name] = value)\n    return dom\n  },\n  attr(el, name, val) {\n    if (arguments.length == 2)\n      return el.getAttribute(name)\n    el.setAttribute(name, val)\n    return dom\n  },\n  removeAttr(el, name) {\n    el.removeAttribute(name)\n    return dom\n  },\n  checked(el, check) {\n    return _prop(el, 'checked', arguments.length > 1, check)\n  },\n  class(el, cls) {\n    return _prop(el, 'class', arguments.length > 1, cls)\n  },\n  addClass(el, cls) {\n    if (el.classList) {\n      el.classList.add(cls)\n    } else {\n      let cur = ` ${dom.prop(el, 'class')} `\n      if (cur.indexOf(` ${cls} `) === -1)\n        dom.class(el, _.trim(cur + cls))\n    }\n    return dom\n  },\n  removeClass(el, cls) {\n    el.classList ? el.classList.remove(cls) :\n      dom.class(el, _.trim(` ${dom.prop(el, 'class')} `.replace(new RegExp(` ${cls} `, 'g'), '')))\n    return dom\n  },\n  style(el, style) {\n    return _prop(el, 'style', arguments.length > 1, style)\n  },\n  propHooks: {\n    tabIndex: {\n      get: function(elem) {\n        let attributeNode = elem.getAttributeNode('tabindex')\n\n        return attributeNode && attributeNode.specified ? parseInt(attributeNode.value, 10) :\n          rfocusable.test(elem.nodeName) || rclickable.test(elem.nodeName) && elem.href ?\n          0 : undefined\n      }\n    }\n  },\n  propFix: {\n    tabindex: 'tabIndex',\n    readonly: 'readOnly',\n    'for': 'htmlFor',\n    'class': 'className',\n    maxlength: 'maxLength',\n    cellspacing: 'cellSpacing',\n    cellpadding: 'cellPadding',\n    rowspan: 'rowSpan',\n    colspan: 'colSpan',\n    usemap: 'useMap',\n    frameborder: 'frameBorder',\n    contenteditable: 'contentEditable'\n  }\n})\n\nfunction _prop(el, name, set, val) {\n  if (!set) return dom.prop(el, name)\n  dom.prop(el, name, val)\n  return dom\n}\n","import dom from './core'\nimport _ from 'utility'\n\nexport default _.assign(dom, {\n  css(el, name, value) {\n    let prop = /[_-]/.test(name) ? camelize(name) : name,\n      hook\n\n    name = cssName(prop) || prop\n    hook = cssHooks[prop] || cssDefaultHook\n    if (arguments.length == 2) {\n      let convert = value,\n        num;\n\n      if (name === 'background')\n        name = 'backgroundColor';\n      value = hook.get(el, name);\n      return convert !== false && isFinite((num = parseFloat(value))) ? num : value;\n    } else if (!value && value !== 0) {\n      el.style[name] = ''\n    } else {\n      if (isFinite(value) && !cssNumber[prop])\n        value += 'px'\n      hook.set(el, name, value)\n    }\n    return dom\n  },\n  position: function(el) {\n    let _offsetParent, _offset,\n      parentOffset = {\n        top: 0,\n        left: 0\n      };\n    if (dom.css(el, 'position') === 'fixed') {\n      _offset = el.getBoundingClientRect();\n    } else {\n      _offsetParent = offsetParent(el);\n      _offset = offset(el);\n      if (_offsetParent.tagName !== 'HTML')\n        parentOffset = offset(_offsetParent);\n      parentOffset.top += dom.css(_offsetParent, 'borderTopWidth', true);\n      parentOffset.left += dom.css(_offsetParent, 'borderLeftWidth', true);\n\n      parentOffset.top -= dom.scrollTop(_offsetParent);\n      parentOffset.left -= dom.scrollLeft(_offsetParent);\n    }\n    return {\n      top: _offset.top - parentOffset.top - dom.css(el, 'marginTop', true),\n      left: _offset.left - parentOffset.left - dom.css(el, 'marginLeft', true)\n    }\n  },\n  scrollTop(el, val) {\n    let win = getWindow(el);\n    if (arguments.length == 1) {\n      return (win ? 'scrollTop' in win ? win.scrollTop : root.pageYOffset : el.pageYOffset) || 0;\n    } else if (win) {\n      win.scrollTo(dom.scrollLeft(el), val);\n    } else {\n      el.pageYOffset = val;\n    }\n    return dom\n  },\n\n  scrollLeft(el, val) {\n    let win = getWindow(el);\n    if (arguments.length == 1) {\n      return (win ? 'scrollLeft' in win ? win.scrollLeft : root.pageXOffset : el.pageXOffset) || 0;\n    } else if (win) {\n      win.scrollTo(val, dom.scrollTop(el));\n    } else {\n      el.pageXOffset = val;\n    }\n    return dom\n  },\n\n  scroll(el, left, top) {\n    let win = getWindow(el);\n    if (arguments.length == 1) {\n      return {\n        left: dom.scrollLeft(el),\n        top: dom.scrollTop(el)\n      }\n    } else if (win) {\n      win.scrollTo(left, top);\n    } else {\n      el.pageXOffset = left;\n      el.pageYOffset = top;\n    }\n    return dom\n  }\n});\n\nlet cssFix = dom.cssFix = {\n    'float': dom.W3C ? 'cssFloat' : 'styleFloat'\n  },\n  cssHooks = dom.cssHooks = {},\n  cssDefaultHook = {},\n  prefixes = ['', '-webkit-', '-o-', '-moz-', '-ms-'],\n  cssNumber = {\n    animationIterationCount: true,\n    columnCount: true,\n    order: true,\n    flex: true,\n    flexGrow: true,\n    flexShrink: true,\n    fillOpacity: true,\n    fontWeight: true,\n    lineHeight: true,\n    opacity: true,\n    orphans: true,\n    widows: true,\n    zIndex: true,\n    zoom: true\n  },\n  cssShow = {\n    position: 'absolute',\n    visibility: 'hidden',\n    display: 'block'\n  },\n  rdisplayswap = /^(none|table(?!-c[ea]).+)/,\n  root = document.documentElement,\n  css = dom.css;\n\nfunction camelize(target) {\n  if (!target || target.indexOf('-') < 0 && target.indexOf('_') < 0) {\n    return target\n  }\n  return target.replace(/[-_][^-_]/g, function(match) {\n    return match.charAt(1).toUpperCase()\n  });\n}\n\nfunction cssName(name, host, camelCase) {\n  if (cssFix[name])\n    return cssFix[name]\n  host = host || root.style\n  for (var i = 0, n = prefixes.length; i < n; i++) {\n    camelCase = camelize(prefixes[i] + name)\n    if (camelCase in host) {\n      return (cssFix[name] = camelCase)\n    }\n  }\n  return null\n}\ncssDefaultHook.set = function cssDefaultSet(el, name, value) {\n  try {\n    el.style[name] = value\n  } catch (e) {}\n}\n\nlet cssDefaultGet;\nif (window.getComputedStyle) {\n  cssDefaultGet = cssDefaultHook.get = function cssDefaultGet(el, name) {\n    let val,\n      styles = getComputedStyle(el, null)\n\n    if (styles) {\n      val = name === 'filter' ? styles.getPropertyValue(name) : styles[name]\n      if (val === '')\n        val = el.style[name]\n    }\n    return val\n  }\n  cssHooks.opacity = {\n    get(el, name) {\n      let val = cssDefaultGet(el, name);\n      return val === '' ? '1' : ret;\n    }\n  }\n} else {\n  let rnumnonpx = /^-?(?:\\d*\\.)?\\d+(?!px)[^\\d\\s]+$/i,\n    rposition = /^(top|right|bottom|left)$/,\n    ralpha = /alpha\\([^)]*\\)/i,\n    ie8 = !!window.XDomainRequest,\n    salpha = 'DXImageTransform.Microsoft.Alpha',\n    border = {\n      thin: ie8 ? '1px' : '2px',\n      medium: ie8 ? '3px' : '4px',\n      thick: ie8 ? '5px' : '6px'\n    }\n\n  cssDefaultGet = cssDefaultHook.get = function cssDefaultGet(el, name) {\n    let currentStyle = el.currentStyle,\n      val = currentStyle[name];\n\n    if ((rnumnonpx.test(val) && !rposition.test(val))) {\n      let style = el.style,\n        left = style.left,\n        rsLeft = el.runtimeStyle.left;\n\n      el.runtimeStyle.left = currentStyle.left;\n      style.left = name === 'fontSize' ? '1em' : (val || 0);\n      val = style.pixelLeft + 'px';\n      style.left = left;\n      el.runtimeStyle.left = rsLeft;\n    }\n    if (val === 'medium') {\n      name = name.replace('Width', 'Style');\n      if (currentStyle[name] === 'none')\n        val = '0px';\n    }\n    return val === '' ? 'auto' : border[val] || val;\n  }\n  cssHooks.opacity = {\n    get(el, name) {\n      let alpha = el.filters.alpha || el.filters[salpha],\n        op = alpha && alpha.enabled ? alpha.opacity : 100;\n\n      return (op / 100) + ''\n    },\n    set(el, name, value) {\n      var style = el.style,\n        opacity = isFinite(value) && value <= 1 ? `alpha(opacity=${value * 100})` : '',\n        filter = style.filter || '';\n\n      style.zoom = 1;\n      style.filter = (ralpha.test(filter) ?\n        filter.replace(ralpha, opacity) : filter + ' ' + opacity).trim();\n      if (!style.filter)\n        style.removeAttribute('filter');\n    }\n  }\n}\n\n_.each(['top', 'left'], function(name) {\n  cssHooks[name] = {\n    get(el, name) {\n      let val = cssDefaultGet(el, name);\n      return /px$/.test(val) ? val : dom.position(el)[name] + 'px'\n    }\n  }\n})\n\n_.each(['Width', 'Height'], function(name) {\n  var method = name.toLowerCase(),\n    clientProp = 'client' + name,\n    scrollProp = 'scroll' + name,\n    offsetProp = 'offset' + name,\n    which = name == 'Width' ? ['Left', 'Right'] : ['Top', 'Bottom'];\n\n  function get(el, boxSizing) {\n    let val;\n\n    val = el[offsetProp] // border-box 0\n    if (boxSizing === 2) // margin-box 2\n      return val + css(el, 'margin' + which[0], true) + css(el, 'margin' + which[1], true);\n    if (boxSizing < 0) // padding-box  -2\n      val = val - css(el, 'border' + which[0] + 'Width', true) - css(el, 'border' + which[1] + 'Width', true);\n    if (boxSizing === -4) // content-box -4\n      val = val - css(el, 'padding' + which[0], true) - css(el, 'padding' + which[1], true);\n    return val\n  }\n\n  dom[method] = function(el) {\n    return get(el, -4);\n  }\n\n  dom['inner' + name] = function(el) {\n    return get(el, -2);\n  }\n  dom['outer' + name] = function(el, includeMargin) {\n    return get(el, includeMargin === true ? 2 : 0);\n  }\n})\n\nfunction offsetParent(el) {\n  var offsetParent = el.offsetParent\n  while (offsetParent && css(offsetParent, \"position\") === \"static\") {\n    offsetParent = offsetParent.offsetParent;\n  }\n  return offsetParent || root;\n}\n\nfunction offset(el) { //取得距离页面左右角的坐标\n  var box = {\n    left: 0,\n    top: 0\n  };\n\n  if (!el || !el.tagName || !el.ownerDocument)\n    return box;\n\n  var doc = el.ownerDocument,\n    body = doc.body,\n    root = doc.documentElement,\n    win = doc.defaultView || doc.parentWindow;\n\n  if (!dom.inDoc(el, root))\n    return box;\n\n  if (el.getBoundingClientRect)\n    box = el.getBoundingClientRect();\n\n  var clientTop = root.clientTop || body.clientTop,\n    clientLeft = root.clientLeft || body.clientLeft,\n    scrollTop = Math.max(win.pageYOffset || 0, root.scrollTop, body.scrollTop),\n    scrollLeft = Math.max(win.pageXOffset || 0, root.scrollLeft, body.scrollLeft);\n  return {\n    top: box.top + scrollTop - clientTop,\n    left: box.left + scrollLeft - clientLeft\n  }\n}\n\nfunction getWindow(node) {\n  return node.window && node.document ? node : node.nodeType === 9 ? node.defaultView || node.parentWindow : false;\n}\n","import dom from './core'\nimport _ from 'utility'\n\nfunction stringValue(val) {\n  if (_.isNil(val) || val === NaN)\n    return ''\n  if (!_.isString(val))\n    return val + ''\n  return val\n}\n\nexport default _.assign(dom, {\n  val(el, val) {\n    let hook = dom.valHooks[el.type || el.tagName.toLowerCase()]\n\n    if (arguments.length == 1)\n      return hook && hook.get ? hook.get(el) : el.value || ''\n\n    if (hook && hook.set) {\n      hook.set(el, val)\n    } else {\n      el.value = stringValue(val)\n    }\n    return dom\n  },\n  valHooks: {\n    option: {\n      get(el) {\n        let val = el.attributes.value\n\n        return !val || val.specified ? el.value : el.text\n      }\n    },\n\n    select: {\n      get(el) {\n        let signle = el.type == 'select-one',\n          index = el.selectedIndex\n\n        if (index < 0)\n          return signle ? undefined : []\n\n        let options = el.options,\n          option,\n          values = signle ? undefined : []\n\n        for (let i = 0, l = options.length; i < l; i++) {\n          option = options[i];\n          if (option.selected || i == index) {\n            if (signle) return dom.val(option);\n            values.push(dom.val(option))\n          }\n        }\n        return values\n      },\n\n      set(el, value) {\n        let signle = el.type == 'select-one',\n          options = el.options,\n          option, i, l, vl, val\n\n        el.selectedIndex = -1;\n\n        if (!_.isArray(value))\n          value = _.isNil(value) ? [] : [value]\n\n        if ((vl = value.length)) {\n          if (signle) vl = value.length = 1\n\n          let map = _.reverseConvert(value, () => false),\n            nr = 0\n\n          for (i = 0, l = options.length; i < l; i++) {\n            option = options[i]\n            val = dom.val(option)\n            if (_.isBoolean(map[val])) {\n              map[val] = option.selected = true\n              if (++nr === vl)\n                break\n            }\n            value = _.keys(map, (v) => v === true)\n          }\n        }\n        return signle ? value[0] : value\n      }\n    }\n  }\n})\n","import dom from './core'\nimport _ from 'utility'\n\nconst root = document.documentElement\n\nexport default _.assign(dom, {\n  hasListen(el, type, cb) {\n    return hasListen(el, type, cb)\n  },\n  on(el, type, cb, once) {\n    if (addListen(el, type, cb, once === true))\n      canBubbleUp[type] ? delegateEvent(type, cb) : bandEvent(el, type, cb)\n    return dom\n  },\n  once(el, type, cb) {\n    return dom.on(el, type, cb, true)\n  },\n  off(el, type, cb) {\n    if (removeListen(el, type, cb))\n      canBubbleUp[type] ? undelegateEvent(type, cb) : unbandEvent(el, type, cb)\n    return dom\n  },\n  dispatchEvent(el, type, opts) {\n    let hackEvent\n    if (document.createEvent) {\n      hackEvent = document.createEvent('Events')\n      hackEvent.initEvent(type, true, true, opts)\n      _.assign(hackEvent, opts)\n      el.dispatchEvent(hackEvent)\n    } else if (dom.inDoc(el)) { //IE6-8触发事件必须保证在DOM树中,否则报'SCRIPT16389: 未指明的错误'\n      hackEvent = document.createEventObject()\n      _.assign(hackEvent, opts)\n      el.fireEvent('on' + type, hackEvent)\n    }\n    return hackEvent\n  }\n})\n\nconst mouseEventReg = /^(?:mouse|contextmenu|drag)|click/,\n  keyEventReg = /^key/,\n  eventProps = ['altKey', 'bubbles', 'cancelable', 'ctrlKey', 'currentTarget', 'propertyName',\n    'eventPhase', 'metaKey', 'relatedTarget', 'shiftKey', 'target', 'view', 'which'\n  ],\n  eventFixHooks = {},\n  keyEventFixHook = {\n    props: ['char', 'charCode', 'key', 'keyCode'],\n    fix: function(event, original) {\n      if (event.which == null)\n        event.which = original.charCode != null ? original.charCode : original.keyCode\n    }\n  },\n  mouseEventFixHook = {\n    props: ['button', 'buttons', 'clientX', 'clientY', 'offsetX', 'offsetY', 'pageX', 'pageY', 'screenX', 'screenY', 'toElement'],\n    fix: function(event, original) {\n      var eventDoc, doc, body,\n        button = original.button\n\n      if (event.pageX == null && original.clientX != null) {\n        eventDoc = event.target.ownerDocument || document\n        doc = eventDoc.documentElement\n        body = eventDoc.body\n        event.pageX = original.clientX + (doc && doc.scrollLeft || body && body.scrollLeft || 0) - (doc && doc.clientLeft || body && body.clientLeft || 0)\n        event.pageY = original.clientY + (doc && doc.scrollTop || body && body.scrollTop || 0) - (doc && doc.clientTop || body && body.clientTop || 0)\n      }\n      if (!event.which && button !== undefined)\n        event.which = (button & 1 ? 1 : (button & 2 ? 3 : (button & 4 ? 2 : 0)))\n    }\n  }\n\nclass Event {\n  constructor(event) {\n    let type = event.type,\n      fixHook = eventFixHooks[type],\n      i, prop\n\n    this.originalEvent = event\n    this.type = event.type\n    this.returnValue = !(event.defaultPrevented || event.returnValue === false || event.getPreventDefault && event.getPreventDefault())\n    this.timeStamp = event && event.timeStamp || (new Date() + 0)\n\n    i = eventProps.length\n    while (i--) {\n      prop = eventProps[i]\n      this[prop] = event[prop]\n    }\n\n    if (!fixHook)\n      eventFixHooks[type] = fixHook = mouseEventReg.test(type) ? mouseEventFixHook : keyEventReg.test(type) ? keyEventFixHook : {}\n\n    if (fixHook.props) {\n      let props = fixHook.props\n      i = props.length\n      while (i--) {\n        prop = props[i]\n        this[prop] = event[prop]\n      }\n    }\n\n    if (!this.target)\n      this.target = event.srcElement || document\n    if (this.target.nodeType == 3)\n      this.target = this.target.parentNode\n\n    if (fixHook.fix)\n      fixHook.fix(this, event)\n  }\n\n  preventDefault() {\n    let e = this.originalEvent\n    this.returnValue = false\n    if (e) {\n      e.returnValue = false\n      if (e.preventDefault)\n        e.preventDefault()\n    }\n  }\n\n  stopPropagation() {\n    let e = this.originalEvent\n    this.cancelBubble = true\n    if (e) {\n      e.cancelBubble = true\n      if (e.stopPropagation)\n        e.stopPropagation()\n    }\n  }\n\n  stopImmediatePropagation() {\n    let e = this.originalEvent\n    this.isImmediatePropagationStopped = true\n    if (e.stopImmediatePropagation)\n      e.stopImmediatePropagation()\n    this.stopPropagation()\n  }\n}\n\nconst listenKey = '__LISTEN__'\n\nfunction addListen(el, type, handler, once) {\n  if (!_.isFunc(handler))\n    throw TypeError('Invalid Event Handler')\n\n  let listens = el[listenKey],\n    handlers,\n    ret = false\n\n  if (!listens)\n    el[listenKey] = listens = {}\n\n  if (!(handlers = listens[type])) {\n    listens[type] = handlers = new _.LinkedList()\n    ret = true\n  } else if (handlers.contains(handler)) {\n    return false\n  }\n  handlers.push({\n    handler: handler,\n    once: once\n  })\n  return ret\n}\n\nfunction removeListen(el, type, handler) {\n  let listens = el[listenKey],\n    handlers = listens && listens[type]\n\n  if (handlers && !handlers.empty()) {\n    handlers.remove(handler)\n    return handlers.empty()\n  }\n  return false\n}\n\nfunction getListens(el, type) {\n  let listens = el[listenKey]\n\n  return listens && listens[type]\n}\n\nfunction hasListen(el, type, handler) {\n  let listens = el[listenKey],\n    handlers = listens && listens[type]\n\n  if (handlers)\n    return handler ? handlers.contains(handler) : !handlers.empty()\n  return false\n}\n\nconst bind = dom.W3C ? function(el, type, fn, capture) {\n    el.addEventListener(type, fn, capture)\n  } : function(el, type, fn) {\n    el.attachEvent('on' + type, fn)\n  },\n  unbind = dom.W3C ? function(el, type, fn) {\n    el.removeEventListener(type, fn)\n  } : function(el, type, fn) {\n    el.detachEvent('on' + type, fn)\n  },\n  canBubbleUpArray = ['click', 'dblclick', 'keydown', 'keypress', 'keyup',\n    'mousedown', 'mousemove', 'mouseup', 'mouseover', 'mouseout', 'wheel', 'mousewheel',\n    'input', 'change', 'beforeinput', 'compositionstart', 'compositionupdate', 'compositionend',\n    'select', 'cut', 'copy', 'paste', 'beforecut', 'beforecopy', 'beforepaste', 'focusin',\n    'focusout', 'DOMFocusIn', 'DOMFocusOut', 'DOMActivate', 'dragend', 'datasetchanged'\n  ],\n  canBubbleUp = {},\n  focusBlur = {\n    focus: true,\n    blur: true\n  },\n  eventHooks = {},\n  eventHookTypes = {},\n  delegateEvents = {}\n\n_.each(canBubbleUpArray, (name) => {\n  canBubbleUp[name] = true\n})\nif (!dom.W3C) {\n  delete canBubbleUp.change\n  delete canBubbleUp.select\n}\n\nfunction bandEvent(el, type, cb) {\n  let hook = eventHooks[type]\n  if (!hook || !hook.bind || hook.bind(el, type, cb) !== false)\n    bind(el, hook ? hook.type || type : type, dispatch, !!focusBlur[type])\n}\n\nfunction unbandEvent(el, type, cb) {\n  let hook = eventHooks[type]\n  if (!hook || !hook.unbind || hook.unbind(el, type, cb) !== false)\n    unbind(el, hook ? hook.type || type : type, dispatch)\n}\n\nfunction delegateEvent(type, cb) {\n  if (!delegateEvents[type]) {\n    bandEvent(root, type, cb)\n    delegateEvents[type] = 1\n  } else {\n    delegateEvents[type]++;\n  }\n}\n\nfunction undelegateEvent(type, cb) {\n  if (delegateEvents[type]) {\n    delegateEvents[type]--;\n    if (!delegateEvents[type])\n      unbandEvent(root, type, cb)\n  }\n}\n\nlet last = new Date()\n\nfunction dispatchElement(el, event, isMove) {\n  let handlers = getListens(el, event.type)\n\n  if (handlers) {\n    let handler, i, l\n\n    event.currentTarget = el\n    event.isImmediatePropagationStopped = false\n    handlers.each((handler) => {\n      if (isMove) {\n        let now = new Date()\n        if (now - last > 16) {\n          handler.handler.call(el, event)\n          last = now\n        }\n      } else {\n        handler.handler.call(el, event)\n      }\n\n      if (handler.once)\n        dom.off(el, event.type, handler.handler)\n      return !event.isImmediatePropagationStopped\n    })\n  }\n}\n\nfunction dispatchEvent(el, type, event) {\n  if (el.disabled !== true || type !== 'click') {\n    let isMove = /move|scroll/.test(type)\n    if (canBubbleUp[type]) {\n      while (el && el.getAttribute && !event.cancelBubble) {\n        dispatchElement(el, event, isMove)\n        el = el.parentNode\n      }\n    } else\n      dispatchElement(el, event, isMove)\n  }\n}\n\nfunction dispatch(event) {\n  event = new Event(event)\n  let type = event.type,\n    el = event.target\n  if (eventHookTypes[type]) {\n    type = eventHookTypes[type]\n    let hook = eventHooks[type]\n    if (hook && hook.fix && hook.fix(el, event) === false)\n      return\n    event.type = type\n    dispatchEvent(el, type, event)\n  } else {\n    dispatchEvent(el, type, event)\n  }\n}\n\n//针对firefox, chrome修正mouseenter, mouseleave\nif (!('onmouseenter' in root)) {\n  _.each({\n    mouseenter: 'mouseover',\n    mouseleave: 'mouseout'\n  }, function(origType, fixType) {\n    eventHooks[origType] = {\n      type: fixType,\n      fix(elem, event, fn) {\n        let t = event.relatedTarget\n        return !t || (t !== elem && !(elem.compareDocumentPosition(t) & 16))\n      }\n    }\n  })\n}\n//针对IE9+, w3c修正animationend\n_.each({\n  AnimationEvent: 'animationend',\n  WebKitAnimationEvent: 'webkitAnimationEnd'\n}, function(construct, fixType) {\n  if (window[construct] && !eventHooks.animationend) {\n    eventHooks.animationend = {\n      type: fixType\n    }\n  }\n})\n\n//针对IE6-8修正input\nif (!('oninput' in document.createElement('input'))) {\n  delete canBubbleUp.input\n  eventHooks.input = {\n    type: 'propertychange',\n    fix(elem, event) {\n      return event.propertyName == 'value'\n    }\n  }\n  eventHooks.change = {\n    bind(elem) {\n      if (elem.type == 'checkbox' || elem.type == 'radio') {\n        if (!elem.$onchange) {\n          elem.$onchange = function(event) {\n            event.type = 'change'\n            dispatchEvent(elem, 'change', event)\n          }\n          dom.on(elem, 'click', elem.$onchange)\n        }\n        return false\n      }\n    },\n    unbind(elem) {\n      if (elem.type == 'checkbox' || elem.type == 'radio') {\n        dom.off(elem, 'click', elem.$onchange)\n        return false\n      }\n    }\n  }\n} else if (navigator.userAgent.indexOf('MSIE 9') !== -1) {\n  eventHooks.input = {\n      type: 'input',\n      fix(elem) {\n        elem.oldValue = elem.value\n      }\n    }\n    // http://stackoverflow.com/questions/6382389/oninput-in-ie9-doesnt-fire-when-we-hit-backspace-del-do-cut\n  document.addEventListener('selectionchange', function(event) {\n    var actEl = document.activeElement\n    if (actEl.tagName === 'TEXTAREA' || (actEl.tagName === 'INPUT' && actEl.type === 'text')) {\n      if (actEl.value == actEl.oldValue)\n        return\n      actEl.oldValue = actEl.value\n      if (hasListen(actEl, 'input')) {\n        event = new Event(event)\n        event.type = 'input'\n        dispatchEvent(actEl, 'input', event)\n      }\n    }\n  })\n}\n\n\nif (document.onmousewheel === void 0) {\n  /* IE6-11 chrome mousewheel wheelDetla 下 -120 上 120\n   firefox DOMMouseScroll detail 下3 上-3\n   firefox wheel detlaY 下3 上-3\n   IE9-11 wheel deltaY 下40 上-40\n   chrome wheel deltaY 下100 上-100 */\n  let fixWheelType = document.onwheel ? 'wheel' : 'DOMMouseScroll',\n    fixWheelDelta = fixWheelType === 'wheel' ? 'deltaY' : 'detail'\n  eventHooks.mousewheel = {\n    type: fixWheelType,\n    fix(elem, event) {\n      event.wheelDeltaY = event.wheelDelta = event[fixWheelDelta] > 0 ? -120 : 120\n      event.wheelDeltaX = 0\n      return true\n    }\n  }\n}\n_.each(eventHooks, function(hook, type) {\n  eventHookTypes[hook.type || type] = type\n})\n","import dom from './event'\n\nlet readyList = [],\n  isReady,\n  root = document.documentElement\n\nfunction fireReady(fn) {\n  isReady = true\n  while (fn = readyList.shift())\n    fn()\n}\n\nif (document.readyState === 'complete') {\n  setTimeout(fireReady)\n} else if (document.addEventListener) {\n  document.addEventListener('DOMContentLoaded', fireReady)\n} else if (document.attachEvent) {\n  document.attachEvent('onreadystatechange', function() {\n    if (document.readyState === 'complete')\n      fireReady()\n  })\n  if (root.doScroll && window.frameElement === null && window.external) {\n    function doScrollCheck() {\n      try {\n        root.doScroll('left')\n        fireReady()\n      } catch (e) {\n        setTimeout(doScrollCheck)\n      }\n    }\n    doScrollCheck()\n  }\n}\n\ndom.on(window, 'load', fireReady);\n\ndom.ready = function(fn) {\n  !isReady ? readyList.push(fn) : fn()\n  return dom\n}\n\nexport default dom\n","import _ from 'utility'\n\nconst regHump = /(^[a-z])|([_-][a-zA-Z])/g\n\nfunction _hump(k) {\n  if (k[0] == '_' || k[0] == '-')\n    k = k[1]\n  return k.toUpperCase();\n}\n\nexport function hump(str) {\n  return str.replace(regHump, _hump)\n}\n\nexport const YieId = _.dynamicClass({\n  constructor() {\n    this.doned = false\n    this.thens = []\n  },\n  then(callback) {\n    if (this.doned)\n      callback()\n    else\n      this.thens.push(callback)\n  },\n  done() {\n    if (!this.doned) {\n      let thens = this.thens;\n      for (let i = 0, l = thens.length; i < l; i++) {\n        thens[i]()\n      }\n      this.doned = true\n    }\n  },\n  isDone() {\n    return this.doned\n  }\n})\n","import Template from './template'\nimport expression from './expression'\nimport translate from './translate'\nimport {\n  Directive\n} from './binding'\n\nimport directives from './directives'\nimport _ from 'utility'\nimport observer from 'observer'\nimport * as util from './util'\nimport dom from './dom'\nimport config from './config'\n\n_.assign(Template, {\n  translate,\n  expression,\n  Directive,\n  directives,\n  config,\n  init(cfg) {\n    observer.init(cfg)\n    config.config(cfg)\n  }\n}, dom, util)\n\nfunction assign(target, source, alias) {\n  observer.each(source, (v, k) => {\n    target[alias[k] || k] = v\n  })\n  return target\n}\nlet tpl = function(el, cfg) {\n  return new Template(el, cfg)\n}\n_.assign(tpl, Template, {\n  Template: Template,\n  utility: _,\n  observer: observer\n})\nassign(_.assign(tpl, _), observer.observer, {\n  on: 'observe',\n  un: 'unobserve',\n  hasListen: 'isObserved'\n})\nexport default tpl\n","import _ from 'utility'\n\nconst reg = /{([^{]+)}/g\nexport default _.dynamicClass({\n  constructor(text) {\n    this.text = text\n    this.index = 0\n  },\n  nextToken() {\n    let token = reg.exec(this.text)\n\n    if (token) {\n      let index = this.index = reg.lastIndex\n\n      return {\n        token: token[1],\n        start: index - token[0].length,\n        end: index\n      }\n    }\n    this.index = 0\n  }\n})\n","import _ from 'utility'\n\nexport default new _.Configuration()\n","import _ from 'utility'\nimport observer from 'observer'\nimport config from '../config'\n\nconst Binding = _.dynamicClass({\n  statics: {\n    commentCfg: 'generateComments'\n  },\n  constructor(cfg) {\n    this._scope = observer.obj(cfg.scope)\n    this.el = cfg.el\n  },\n  scope() {\n    let scope = this._scope\n    return observer.proxy(scope) || scope\n  },\n  realScope() {\n    return this._scope\n  },\n  propScope(prop) {\n    let scope = this.realScope(),\n      parent\n\n    while ((parent = scope.$parent) && !_.hasOwnProp(scope, prop)) {\n      scope = parent\n    }\n    return observer.proxy(scope) || scope\n  },\n  exprScope(expr) {\n    return this.propScope(_.parseExpr(expr)[0])\n  },\n  observe(expr, callback) {\n    observer.on(this.exprScope(expr), expr, callback)\n  },\n  unobserve(expr, callback) {\n    observer.un(this.exprScope(expr), expr, callback)\n  },\n  get(expr) {\n    return _.get(this.realScope(), expr)\n  },\n  has(expr) {\n    return _.has(this.realScope(), expr)\n  },\n  set(expr, value) {\n    _.set(this.scope(), expr, value)\n  },\n  bind() {\n    throw new Error('abstract method')\n  },\n  unbind() {\n    throw new Error('abstract method')\n  },\n  destroy() {}\n})\nconfig.register(Binding.commentCfg, true)\nexport default Binding\n","import _ from 'utility'\n\nexport default new _.Logger('tpl', 'debug')\n","import _ from 'utility'\nimport log from './log'\n\nconst slice = Array.prototype.slice,\n  translates = {}\n\nconst translate = {\n  register(name, desc) {\n    if (translates[name])\n      throw Error(`Translate[${name}] is existing`)\n    if (_.isFunc(desc))\n      desc = {\n        transform: desc\n      }\n    desc.type = desc.type || 'normal'\n    translates[name] = desc\n    log.debug(`register Translate[${desc.type}:${name}]`)\n  },\n\n  get(name) {\n    return translates[name]\n  },\n\n  apply(name, data, args, restore) {\n    let f = translates[name],\n      type = f && f.type,\n      fn = f && (restore ? f.restore : f.transform)\n\n    if (!fn) {\n      log.warn(`Translate[${name}].${restore ? 'Restore' : 'Transform'} is undefined`)\n    } else {\n      if (_.isFunc(args)) args = args()\n      data = fn.apply(f, [data].concat(args))\n    }\n    return {\n      stop: type == 'event' && data === false,\n      data: data,\n      replaceData: type !== 'event'\n    }\n  },\n\n  unapply(name, data, args) {\n    return this.apply(name, data, args, false)\n  }\n}\n\nexport default translate\n\nexport const keyCodes = {\n  esc: 27,\n  tab: 9,\n  enter: 13,\n  space: 32,\n  'delete': [8, 46],\n  up: 38,\n  left: 37,\n  right: 39,\n  down: 40\n}\n\nlet eventTranslates = {\n  key(e) {\n    let which = e.which,\n      k\n\n    for (let i = 1, l = arguments.length; i < l; i++) {\n      k = arguments[i]\n      if (which == (keyCodes[k] || k))\n        return true\n    }\n    return false\n  },\n  stop(e) {\n    e.stopPropagation()\n  },\n  prevent(e) {\n    e.preventDefault()\n  },\n  self(e) {\n    return e.target === e.currentTarget\n  }\n}\n\n_.each(eventTranslates, (fn, name) => {\n  translate.register(name, {\n    type: 'event',\n    transform: fn\n  })\n})\n\nlet nomalTranslates = {\n  json: {\n    transform(value, indent) {\n      return typeof value === 'string' ? value : JSON.stringify(value, null, Number(indent) || 2)\n    },\n    restore(value) {\n      try {\n        return JSON.parse(value)\n      } catch (e) {\n        return value\n      }\n    }\n  },\n  trim: {\n    transform: _.trim,\n    restore: _.trim\n  },\n\n  capitalize(value) {\n    if (_.isString(value))\n      return value.charAt(0).toUpperCase() + value.slice(1)\n    return value\n  },\n\n  uppercase(value) {\n    return _.isString(value) ? value.toUpperCase() : value\n  },\n\n  lowercase(value) {\n    return _.isString(value) ? value.toLowerCase() : value\n  },\n\n  currency(value, currency) {\n    value = parseFloat(value)\n    if (!isFinite(value) || (!value && value !== 0)) return ''\n    currency = currency != null ? currency : '$'\n    var stringified = Math.abs(value).toFixed(2)\n    var _int = stringified.slice(0, -3)\n    var i = _int.length % 3\n    var head = i > 0 ? (_int.slice(0, i) + (_int.length > 3 ? ',' : '')) : ''\n    var _float = stringified.slice(-3)\n    var sign = value < 0 ? '-' : ''\n    return sign + currency + head + _int.slice(i).replace(digitsRE, '$1,') + _float\n  },\n  plural: {\n    transform(value, plural) {\n      if (plural && _.isString(value))\n        return _.plural(value)\n      return value\n    },\n    restore(value) {\n      return _.singular(value)\n    }\n  },\n  singular: {\n    transform(value, plural) {\n      if (plural && _.isString(value))\n        return _.singular(value)\n      return value\n    },\n    restore(value) {\n      return _.plural(value)\n    }\n  },\n  unit: {\n    transform(value, unit, format, plural) {\n      if (plural !== false && value != 1 && value != 0) {\n        unit = _.plural(unit)\n      }\n      if (format)\n        return format ? _.format(format, value, unit) : value + unit\n    },\n    restore(value, unit, format) {\n      let reg = new RegExp(`(${unit}|${_.plural(unit)}`)\n      return _.trim(value.replace(reg, ''))\n    }\n  },\n  format: {\n    transform(value, format) {\n      return _.format(format, value)\n    }\n  }\n}\n_.each(nomalTranslates, (f, name) => {\n  translate.register(name, f)\n})\n","import Binding from './Binding'\nimport expression from '../expression'\nimport _ from 'utility'\nimport dom from '../dom'\nimport config from '../config'\nimport log from '../log'\n\nconst expressionArgs = ['$el']\n\nexport default _.dynamicClass({\n  extend: Binding,\n  constructor(cfg) {\n    this.super(arguments)\n    this.expr = expression(cfg.expression, expressionArgs)\n    if (config.get(Binding.commentCfg)) {\n      this.comment = document.createComment('Text Binding ' + this.expr)\n      dom.before(this.comment, this.el)\n    }\n    this.observeHandler = this.observeHandler.bind(this)\n  },\n  value() {\n    return this.expr.executeAll.call(this, this.scope(), this.el)\n  },\n  bind() {\n    _.each(this.expr.identities, (ident) => {\n      this.observe(ident, this.observeHandler)\n    })\n    this.update(this.value())\n  },\n  unbind() {\n    _.each(this.expr.identities, (ident) => {\n      this.unobserve(ident, this.observeHandler)\n    })\n  },\n  observeHandler(attr, val) {\n    if (this.expr.simplePath) {\n      this.update(this.expr.applyFilter(val, this, [this.scope(), this.el]))\n    } else {\n      this.update(this.value())\n    }\n  },\n  update(val) {\n    if (_.isNil(val)) val = ''\n    if (val !== dom.text(this.el))\n      dom.text(this.el, val)\n  }\n})\n","import Binding from './Binding'\nimport _ from 'utility'\nimport dom from '../dom'\nimport config from '../config'\nimport log from '../log'\n\nconst directives = {}\n\nconst Directive = _.dynamicClass({\n  extend: Binding,\n  independent: false,\n  block: false,\n  priority: 5,\n  constructor(cfg) {\n    this.super(arguments)\n    this.expr = cfg.expression\n    this.attr = cfg.attr\n    this.children = cfg.children\n    this.domParser = cfg.domParser\n    if (config.get(Binding.commentCfg)) {\n      this.comment = document.createComment(`Directive[${this.attr}]: ${this.expr}`)\n      dom.before(this.comment, this.el)\n    }\n  },\n  bindChildren() {\n    if (this.children)\n      _.each(this.children, (directive) => {\n        directive.bind()\n      })\n  },\n  bind() {\n    this.bindChildren()\n  },\n  unbindChildren() {\n    if (this.children)\n      _.each(this.children, (directive) => {\n        directive.unbind()\n      })\n  },\n  unbind() {\n    this.unbindChildren()\n  },\n  statics: {\n    getPriority(directive) {\n      return directive.prototype.priority\n    },\n    isBlock(directive) {\n      return directive.prototype.block\n    },\n    isIndependent(directive) {\n      return directive.prototype.independent\n    },\n    getDirective(name) {\n      return directives[name.toLowerCase()]\n    },\n    isDirective(obj) {\n      return _.isExtendOf(obj, Directive)\n    },\n    register(name, option) {\n      let directive\n\n      name = name.toLowerCase()\n\n      if (_.isObject(option)) {\n        option.extend = option.extend || Directive\n        directive = _.dynamicClass(option)\n      } else if (_.isFunc(option) && _.isExtendOf(option, Directive)) {\n        directive = option\n      } else {\n        throw TypeError(`Invalid Directive[${name}] ${option}`)\n      }\n\n      if (name in directives)\n        throw new Error(`Directive[${name}] is existing`)\n\n      directives[name] = directive\n      log.debug('register Directive[%s]', name)\n      return directive\n    }\n  }\n})\nexport default Directive\n","import Binding from './Binding'\nimport _ from 'utility'\n\nexport default _.dynamicClass({\n  extend: Binding,\n  constructor(cfg) {\n    this.super(arguments)\n    this.directives = cfg.directives\n    this.children = cfg.children\n    this.directiveCount = cfg.directives.length\n    this.bindedCount = 0\n    this.bindedChildren = false\n    this._bind = this._bind.bind(this)\n  },\n  _bind() {\n    let idx = this.bindedCount\n    if (idx < this.directiveCount) {\n      let directive = this.directives[idx],\n        ret = directive.bind()\n      this.bindedCount++;\n      (ret && ret instanceof _.YieId) ? ret.then(this._bind): this._bind()\n    } else if (this.children) {\n      _.each(this.children, (directive) => {\n        directive.bind()\n      })\n      this.bindedChildren = true\n    }\n  },\n  bind() {\n    this._bind()\n  },\n  unbind() {\n    let directives = this.directives,\n      i = this.bindedCount\n\n    if (this.bindedChildren) {\n      _.each(this.children, (directive) => {\n        directive.unbind()\n      })\n      this.bindedChildren = false\n    }\n    while (i--) {\n      directives[i].unbind()\n    }\n    this.bindedCount = 0\n  }\n})\n","import {\n  Directive\n} from '../binding'\nimport _ from 'utility'\nimport config from '../config'\n\nconfig.register('directiveReg', /^tpl-/, [RegExp])\n\nexport default _.dynamicClass({\n  constructor() {\n    this.reg = config.get('directiveReg')\n  },\n  isDirective(attr) {\n    return this.reg.test(attr)\n  },\n  getDirective(attr) {\n    return Directive.getDirective(attr.replace(this.reg, ''))\n  }\n})\n","import _ from 'utility'\nimport dom from '../dom'\n\nexport default _.dynamicClass({\n  constructor(el, bindings) {\n    this.el = el\n    this.bindings = bindings\n  },\n  before(target, bind) {\n    if (bind !== false)\n      this.bind()\n    dom.before(this.el, dom.query(target))\n    return this\n  },\n  after(target, bind) {\n    if (bind !== false)\n      this.bind()\n    dom.after(this.el, dom.query(target))\n    return this\n  },\n  prependTo(target, bind) {\n    if (bind !== false)\n      this.bind()\n    dom.prepend(dom.query(target), this.el)\n    return this\n  },\n  appendTo(target, bind) {\n    if (bind !== false)\n      this.bind()\n    dom.append(dom.query(target), this.el)\n    return this\n  },\n  remove(unbind) {\n    dom.remove(this.el)\n    if (unbind !== false)\n      this.unbind()\n  },\n  bind() {\n    if (!this.binded) {\n      _.each(this.bindings, (bind) => {\n        bind.bind()\n      })\n      this.binded = true\n    }\n    return this\n  },\n  unbind() {\n    if (this.binded) {\n      _.each(this.bindings, (bind) => {\n        bind.unbind()\n      })\n      this.binded = false\n    }\n    return this\n  },\n  destroy() {\n    if (this.binded)\n      _.each(this.bindings, (bind) => {\n        bind.unbind()\n        bind.destroy()\n      })\n    dom.remove(this.el)\n    this.bindings = undefined\n    this.el = undefined\n  }\n})\n","import TextParser from './TextParser'\nimport DirectiveParser from './DirectiveParser'\nimport Template from './Template'\nimport {\n  Directive,\n  DirectiveGroup,\n  Text\n} from '../binding'\nimport _ from 'utility'\nimport dom from '../dom'\nimport log from '../log'\nimport config from '../config'\n\nconfig.register('directiveParser', new DirectiveParser(), [DirectiveParser])\nconfig.register('TextParser', TextParser, TextParser, true)\n\nconst TEXT = 1,\n  DIRECTIVE = 2,\n  DIRECTIVE_GROUP = 3\n\nconst DomParser = _.dynamicClass({\n  constructor(el, clone) {\n    this.el = this.parseEl(el, clone)\n    this.directiveParser = config.get('directiveParser')\n    this.TextParser = config.get('TextParser')\n    this.parse()\n  },\n  complie(scope) {\n    let el = dom.cloneNode(this.el),\n      df = document.createDocumentFragment()\n    dom.append(df, el)\n    return new Template(_.map(df.childNodes, (n) => n), this.parseBindings(this.bindings, scope, this.parseEls(el)))\n  },\n  parseBindings(descs, scope, els) {\n    return _.map(descs, (desc) => {\n      let type = desc.type,\n        cfg = {\n          el: els[desc.index],\n          scope: scope\n        }\n\n      if (type === TEXT) {\n        cfg.expression = desc.expression\n        return new Text(cfg)\n      }\n\n      let Const\n      if (type === DIRECTIVE) {\n        Const = desc.directive\n        cfg.expression = desc.expression\n        cfg.attr = desc.attr\n        cfg.domParser = desc.domParser\n        cfg.independent = desc.independent\n      } else {\n        Const = DirectiveGroup\n        cfg.directives = _.map(desc.directives, desc => {\n          return new desc.directive({\n            el: cfg.el,\n            scope: scope,\n            expression: desc.expression,\n            attr: desc.attr\n          })\n        })\n      }\n      cfg.block = desc.block\n      cfg.children = desc.children ? this.parseBindings(desc.children || [], scope, els) : undefined\n      return new Const(cfg)\n    })\n  },\n  parseEls(el) {\n    let index = 0,\n      elStatus = this.elStatus\n    return this.eachDom(el, [], (el, els) => {\n      els.push(el)\n      return elStatus[index++] && els\n    }, (el, els) => {\n      els.push(el)\n      index++\n    })\n  },\n  parseEl(el, clone) {\n    if (_.isString(el)) {\n      el = _.trim(el)\n      if (el.charAt(0) == '<') {\n        let templ = document.createElement('div')\n        dom.html(templ, el)\n        el = templ.childNodes\n      }\n      el = dom.query(el)\n    } else if (clone) {\n      el = dom.cloneNode(el)\n    }\n    return el\n  },\n  eachDom(el, data, elemHandler, textHandler) {\n    if (_.isArrayLike(el)) {\n      _.each(el, (el) => {\n        this._eachDom(el, data, elemHandler, textHandler)\n      })\n    } else {\n      this._eachDom(el, data, elemHandler, textHandler)\n    }\n    return data\n  },\n  _eachDom(el, data, elemHandler, textHandler) {\n    switch (el.nodeType) {\n      case 1:\n        if (data = elemHandler(el, data))\n          _.each(_.map(el.childNodes, (n) => n), (el) => {\n            this._eachDom(el, data, elemHandler, textHandler)\n          })\n        break\n      case 3:\n        textHandler(el, data)\n        break\n    }\n  },\n  parse() {\n    let elStatus = [],\n      index = 0,\n      TextParser = this.TextParser,\n      directiveParser = this.directiveParser\n\n    function markEl(el, marked) {\n      if (el) {\n        elStatus.push(marked)\n        index++\n      }\n      return el\n    }\n    this.elStatus = elStatus\n    this.bindings = this.eachDom(this.el, [], (el, bindings) => {\n      let directives = [],\n        block = false,\n        independent = false,\n        desc\n\n      _.each(el.attributes, (attr) => {\n        let name = attr.name,\n          directive\n\n        if (!directiveParser.isDirective(name))\n          return\n\n        if (!(directive = directiveParser.getDirective(name))) {\n          log.warn(`Directive[${name}] is undefined`)\n          return\n        }\n        let desc = {\n          type: DIRECTIVE,\n          index: index,\n          expression: attr.value,\n          directive: directive,\n          attr: name,\n          block: Directive.isBlock(directive),\n          independent: Directive.isIndependent(directive)\n        }\n        if (desc.independent) {\n          desc.block = block = independent = true\n          directives = [desc]\n          return false\n        } else if (desc.block) {\n          block = true\n        }\n        directives.push(desc)\n      })\n\n      if (!directives.length) {\n        markEl(el, true)\n        return bindings\n      }\n\n      if (directives.length == 1) {\n        desc = directives[0]\n      } else {\n        desc = {\n          type: DIRECTIVE_GROUP,\n          index: index,\n          directives: directives.sort((a, b) => {\n            return (Directive.getPriority(b.directive) - Directive.getPriority(a.directive)) || 0\n          }),\n          block: block,\n          independent: independent\n        }\n      }\n      desc.children = !block && []\n\n      bindings.push(desc)\n      if (independent) {\n        let childEl = dom.cloneNode(el, false)\n        dom.removeAttr(childEl, directives[0].attr)\n        dom.append(childEl, _.map(el.childNodes, (n) => n))\n        desc.domParser = new DomParser(childEl, false)\n      }\n      markEl(el, !block)\n      return desc.children\n    }, (el, bindings) => {\n      let expr = dom.text(el),\n        parser = new TextParser(expr),\n        token,\n        i = 0\n\n      let p = el.parentNode,\n        l = p.childNodes.length,\n        ii = index\n      while (token = parser.nextToken()) {\n        if (i < token.start)\n          markEl(this.insertNotBlankText(expr.substring(i, token.start), el), false)\n        bindings.push({\n          type: TEXT,\n          index: index,\n          expression: token.token\n        })\n        markEl(this.insertText('binding', el), false)\n        i = token.end\n      }\n      if (i) {\n        markEl(this.insertNotBlankText(expr.substr(i), el), false)\n        dom.remove(el)\n      } else {\n        markEl(el, false)\n      }\n    })\n\n  },\n  insertNotBlankText(content, before) {\n    return (content) ? this.insertText(content, before) : undefined\n  },\n  insertText(content, before) {\n    let el = document.createTextNode(content)\n    dom.before(el, before)\n    return el\n  }\n})\nexport default DomParser\n","import _ from 'utility'\nimport DomParser from './DomParser'\nimport DirectiveParser from './DirectiveParser'\nimport TextParser from './TextParser'\n\n\nlet templateId = 0\nconst templateCache = {}\n\nexport default _.dynamicClass({\n  statics: {\n    get(id) {\n      return templateCache[id]\n    },\n    DomParser: DomParser,\n    DirectiveParser: DirectiveParser,\n    TextParser: TextParser\n  },\n  constructor(templ, cfg = {}) {\n    this.id = cfg.id || (templateId++)\n    if (_.hasOwnProp(templateCache, this.id)) {\n      throw new Error('Existing Template[' + this.id + ']')\n    }\n    this.parser = new DomParser(templ)\n    templateCache[this.id] = this\n  },\n  complie(scope) {\n    return this.parser.complie(scope)\n  }\n})\n","import {\n  Directive\n} from '../binding'\nimport Template from '../template'\nimport _ from 'utility'\nimport observer from 'observer'\nimport dom from '../dom'\nimport log from '../log'\n\nconst eachReg = /^\\s*([\\s\\S]+)\\s+in\\s+([\\S]+)(\\s+track\\s+by\\s+([\\S]+))?\\s*$/,\n  eachAliasReg = /^(\\(\\s*([^,\\s]+)(\\s*,\\s*([\\S]+))?\\s*\\))|([^,\\s]+)(\\s*,\\s*([\\S]+))?$/\n\nexport default Directive.register('each', _.dynamicClass({\n  extend: Directive,\n  independent: true,\n  block: true,\n  priority: 10,\n  constructor() {\n    this.super(arguments)\n    this.observeHandler = this.observeHandler.bind(this)\n    let token = this.expr.match(eachReg)\n    if (!token)\n      throw Error(`Invalid Expression[${this.expr}] on Each Directive`)\n\n    this.scopeExpr = token[2]\n    this.indexExpr = token[4]\n\n    let aliasToken = token[1].match(eachAliasReg)\n    if (!aliasToken)\n      throw Error(`Invalid Expression[${token[1]}] on Each Directive`)\n\n    this.valueAlias = aliasToken[2] || aliasToken[5]\n    this.keyAlias = aliasToken[4] || aliasToken[7]\n\n    this.begin = document.createComment('each begin')\n    this.end = document.createComment('each end')\n    dom.replace(this.el, this.begin)\n    dom.after(this.end, this.begin)\n    this.el = undefined\n    this.version = 1\n  },\n  update(data) {\n    let domParser = this.domParser,\n      parentScope = this.realScope(),\n      begin = this.begin,\n      end = this.end,\n      indexExpr = this.indexExpr,\n      used = this.used,\n      version = this.version++,\n      indexMap = this.used = {},\n      descs = _.map(data, (item, idx) => {\n        let index = indexExpr ? _.get(item, indexExpr) : idx, // read index of data item\n          reuse = used && used[index],\n          desc\n\n        if (reuse && reuse.version === version)\n          reuse = undefined\n\n        desc = reuse || {\n          index: index\n        }\n        desc.version = version\n        desc.data = observer.proxy(item)\n        indexMap[index] = desc\n        return desc\n      }),\n      idles = [],\n      fragment = document.createDocumentFragment()\n\n    if (used)\n      tpl.each(used, (desc) => {\n        if (desc.version != version)\n          idles.push(desc)\n        desc.tpl.remove(false)\n      })\n\n    tpl.each(descs, (desc) => {\n      if (!desc.scope) {\n        let idle = idles.pop()\n\n        if (!idle) {\n          desc.scope = this.createScope(parentScope, desc.data, desc.index)\n          desc.tpl = domParser.complie(desc.scope)\n        } else {\n          desc.scope = idle.scope\n          desc.tpl = idle.tpl\n          this.initScope(desc.scope, desc.data, desc.index)\n        }\n      }\n      dom.append(fragment, desc.tpl.el)\n    })\n    tpl.before(fragment, end)\n    tpl.each(descs, (desc) => desc.tpl.bind())\n    tpl.each(idles, (idle) => idle.tpl.destroy())\n  },\n  createScope(parentScope, value, index) {\n    let scope = _.create(parentScope)\n    scope.$parent = parentScope\n    scope.$eachContext = this\n    this.initScope(scope, value, index, true)\n    return scope\n  },\n  initScope(scope, value, index, isCreate) {\n    if (!isCreate)\n      scope = observer.proxy(scope)\n    scope[this.valueAlias] = value\n    if (this.keyAlias)\n      scope[this.keyAlias] = index\n  },\n  bind() {\n    this.observe(this.scopeExpr, this.observeHandler)\n    this.update(this.target())\n  },\n  unbind() {\n    this.unobserve(this.scopeExpr, this.observeHandler)\n  },\n  target() {\n    return this.get(this.scopeExpr)\n  },\n  observeHandler(expr, target) {\n    this.update(target)\n  }\n}))\n","import {\n  Directive\n} from '../binding'\nimport Template from '../template'\nimport expression from '../expression'\nimport _ from 'utility'\nimport {\n  hump\n} from '../util'\nimport dom from '../dom'\nimport log from '../log'\n\nconst expressionArgs = ['$el', '$event']\n\nconst EventDirective = _.dynamicClass({\n  extend: Directive,\n  constructor() {\n    this.super(arguments)\n    this.handler = this.handler.bind(this)\n    this.expression = expression(this.expr, expressionArgs)\n  },\n  handler(e) {\n    e.stopPropagation()\n\n    let scope = this.scope(),\n      exp = this.expression\n\n    if (this.expression.applyFilter(e, this, [scope, this.el, e]) !== false) {\n      let fn = exp.execute.call(this, scope, this.el, e)\n\n      if (exp.simplePath) {\n        if (_.isFunc(fn)) {\n          let _scope = this.propScope(exp.path[0])\n          fn.call(_scope, scope, this.el, e, _scope)\n        } else {\n          log.warn('Invalid Event Handler:%s', this.expr, fn)\n        }\n      }\n    }\n  },\n  bind() {\n    dom.on(this.el, this.eventType, this.handler)\n    this.super(arguments)\n  },\n  unbind() {\n    this.super(arguments)\n    dom.off(this.el, this.eventType, this.handler)\n  }\n})\n\nconst events = ['blur', 'change', 'click', 'dblclick', 'error', 'focus', 'keydown', 'keypress', 'keyup', 'load',\n  'mousedown', 'mousemove', 'mouseout', 'mouseover', 'mouseup', 'resize', 'scroll', 'select', 'submit', 'unload', {\n    name: 'oninput',\n    eventType: 'input propertychange'\n  }\n]\n\nexport default _.assign(_.convert(events, (opt) => {\n  let name = _.isObject(opt) ? opt.name : opt\n  return hump(name + 'Directive')\n}, (opt) => {\n  if (!_.isObject(opt))\n    opt = {\n      eventType: opt\n    }\n  let name = opt.name || `on${opt.eventType}`\n  opt.extend = EventDirective\n  return Directive.register(name, opt)\n}), {\n  EventDirective\n})\n","import {\n  Directive\n} from '../binding'\nimport expression from '../expression'\nimport _ from 'utility'\nimport {\n  hump,\n  YieId\n} from '../util'\nimport dom from '../dom'\nimport log from '../log'\n\nconst expressionArgs = ['$el']\n\nconst SimpleDirective = _.dynamicClass({\n  extend: Directive,\n  constructor() {\n    this.super(arguments)\n    this.observeHandler = this.observeHandler.bind(this)\n    this.expression = expression(this.expr, expressionArgs)\n  },\n  realValue() {\n    return this.expression.execute.call(this, this.scope(), this.el)\n  },\n  value() {\n    return this.expression.executeAll.call(this, this.scope(), this.el)\n  },\n  listen() {\n    _.each(this.expression.identities, (ident) => {\n      this.observe(ident, this.observeHandler)\n    })\n    this.update(this.value())\n  },\n  unlisten() {\n    _.each(this.expression.identities, (ident) => {\n      this.unobserve(ident, this.observeHandler)\n    })\n  },\n  bind() {\n    this.listen()\n    this.super(arguments)\n  },\n  unbind() {\n    this.super(arguments)\n    this.unlisten()\n  },\n  blankValue(val) {\n    if (arguments.length == 0) val = this.value()\n    return _.isNil(val) ? '' : val\n  },\n  observeHandler(expr, val) {\n    if (this.expression.simplePath) {\n      this.update(this.expression.applyFilter(val, this, [this.scope(), this.el]))\n    } else {\n      this.update(this.value())\n    }\n  },\n  update(val) {\n    throw `abstract method`\n  }\n})\n\nconst EVENT_CHANGE = 'change',\n  EVENT_INPUT = 'input',\n  EVENT_CLICK = 'click',\n  TAG_SELECT = 'SELECT',\n  TAG_INPUT = 'INPUT',\n  TAG_TEXTAREA = 'TEXTAREA',\n  RADIO = 'radio',\n  CHECKBOX = 'checkbox',\n  directives = {\n    text: {\n      block: true,\n      update(val) {\n        dom.text(this.el, this.blankValue(val))\n      }\n    },\n    html: {\n      block: true,\n      update(val) {\n        dom.html(this.el, this.blankValue(val))\n      }\n    },\n    'class': {\n      update(value) {\n        if (value && typeof value == 'string') {\n          this.handleArray(_.trim(value).split(/\\s+/))\n        } else if (value instanceof Array) {\n          this.handleArray(value)\n        } else if (value && typeof value == 'object') {\n          this.handleObject(value)\n        } else {\n          this.cleanup()\n        }\n      },\n      handleObject(value) {\n        this.cleanup(value, false)\n        let keys = this.prevKeys = [],\n          el = this.el\n        for (let key in value) {\n          if (value[key]) {\n            dom.addClass(el, key)\n            keys.push(key)\n          } else {\n            dom.removeClass(el, key)\n          }\n        }\n      },\n      handleArray(value) {\n        this.cleanup(value, true)\n        let keys = this.prevKeys = [],\n          el = this.el\n        _.each(value, (val) => {\n          if (val) {\n            keys.push(val)\n            dom.addClass(el, val)\n          }\n        })\n      },\n      cleanup(value, isArr) {\n        let prevKeys = this.prevKeys\n        if (prevKeys) {\n          let i = prevKeys.length,\n            el = this.el\n          while (i--) {\n            let key = prevKeys[i]\n            if (!value || (isArr ? _.indexOf(value, key) == -1 : !_.hasOwnProp(value, key))) {\n              dom.removeClass(el, key)\n            }\n          }\n        }\n      }\n    },\n    'style': {\n      update(value) {\n        if (value && _.isString(value)) {\n          dom.style(this.el, value)\n        } else if (value && _.isObject(value)) {\n          this.handleObject(value)\n        }\n      },\n      handleObject(value) {\n        this.cleanup(value)\n        let keys = this.prevKeys = [],\n          el = this.el\n        _.each(value, (val, key) => {\n          dom.css(el, key, val)\n        })\n      }\n    },\n    show: {\n      update(val) {\n        dom.css(this.el, 'display', val ? '' : 'none')\n      }\n    },\n    hide: {\n      update(val) {\n        dom.css(this.el, 'display', val ? 'none' : '')\n      }\n    },\n    value: {\n      update(val) {\n        dom.val(this.el, this.blankValue(val))\n      }\n    },\n    'if': {\n      priority: 9,\n      bind() {\n        this.yieId = new YieId()\n        this.listen()\n        return this.yieId\n      },\n      unbind() {\n        if (!this.yieId)\n          this.unbindChildren()\n        this.unlisten()\n      },\n      update(val) {\n        if (!val) {\n          dom.css(this.el, 'display', 'none')\n        } else {\n          if (this.yieId) {\n            this.yieId.done()\n            this.yieId = undefined\n            this.bindChildren()\n          }\n          dom.css(this.el, 'display', '')\n        }\n      }\n    },\n    checked: {\n      update(val) {\n        _.isArray(val) ? dom.checked(this.el, _.indexOf(val, dom.val(this.el))) : dom.checked(this.el, !!val)\n      }\n    },\n    selected: {\n      update(val) {}\n    },\n    focus: {\n      update(val) {\n        if (val) dom.focus(this.el)\n      }\n    },\n    input: {\n      priority: 4,\n      constructor() {\n        this.super(arguments)\n        if (!this.expression.simplePath)\n          throw TypeError(`Invalid Expression[${this.expression.expr}] on InputDirective`)\n\n        this.onChange = this.onChange.bind(this)\n        let tag = this.tag = this.el.tagName\n        switch (tag) {\n          case TAG_SELECT:\n            this.event = EVENT_CHANGE\n            break\n          case TAG_INPUT:\n            let type = this.type = this.el.type\n            this.event = (type == RADIO || type == CHECKBOX) ? EVENT_CHANGE : EVENT_INPUT\n            break\n          case TAG_TEXTAREA:\n            throw TypeError('Directive[input] not support ' + tag)\n            break\n          default:\n            throw TypeError('Directive[input] not support ' + tag)\n        }\n      },\n\n      bind() {\n        dom.on(this.el, this.event, this.onChange)\n        this.super()\n      },\n\n      unbind() {\n        this.super()\n        dom.off(this.el, this.event, this.onChange)\n      },\n\n      setRealValue(val) {\n        this.set(this.expression.path, val)\n      },\n\n      setValue(val) {\n        this.setRealValue(this.expression.applyFilter(val, this, [this.scope(), this.el], false))\n      },\n\n      onChange(e) {\n        let val = this.elVal(),\n          idx,\n          _val = this.val\n        if (val != _val)\n          this.setValue(val)\n        e.stopPropagation()\n      },\n\n      update(val) {\n        let _val = this.blankValue(val)\n        if (_val != this.val)\n          this.elVal((this.val = _val))\n      },\n\n      elVal(val) {\n        let tag = this.tag\n\n        switch (tag) {\n          case TAG_SELECT:\n            break\n          case TAG_INPUT:\n            let type = this.type\n\n            if (type == RADIO || type == CHECKBOX) {\n              if (arguments.length == 0) {\n                return dom.checked(this.el) ? dom.val(this.el) : undefined\n              } else {\n                let checked\n\n                checked = val == dom.val(this.el)\n                if (dom.checked(this.el) != checked)\n                  dom.checked(this.el, checked)\n              }\n            } else {\n              if (arguments.length == 0) {\n                return dom.val(this.el)\n              } else if (val != dom.val(this.el)) {\n                dom.val(this.el, val)\n              }\n            }\n            break\n          case TAG_TEXTAREA:\n            throw TypeError('Directive[input] not support ' + tag)\n            break\n          default:\n            throw TypeError('Directive[input] not support ' + tag)\n        }\n      }\n    }\n  }\n\nexport default _.assign(_.convert(directives, (opt, name) => {\n  return hump(name + 'Directive')\n}, (opt, name) => {\n  opt.extend = SimpleDirective\n  return Directive.register(name, opt)\n}), {\n  SimpleDirective\n})\n","import EachDirective from './each'\nimport event from './event'\nimport simple from './simple'\nimport _ from 'utility'\n\nexport default _.assign({\n  EachDirective\n}, event, simple)\n"],"names":["translationProcessor","str","isString","i","translations","length","replace","newlineReg","translationRestoreProcessor","identityProcessor","raw","idx","l","suffix","charAt","exp","slice","prop","match","propReg","defaultKeywords","currentKeywords","prevPropScope","complileExpr","body","undefined","identityReg","translationRestoreReg","compileFilterArgs","argExprs","keywords","makeExecuter","compileFilter","filterExprs","filters","filterExpr","_","trim","split","push","shift","compileExecuter","ret","isSimple","isSimplePath","reverseConvert","translationReg","wsReg","parseExpr","simplePath","identities","keys","currentIdentities","applyFilter","data","argScope","args","apply","fs","f","_args","rs","parseFilterArgs","translate","unapply","name","stop","replaceData","executeAll","val","execute","this","arguments","executors","scope","map","executor","concat","Function","e","Error","pathTestReg","test","booleanLiteralReg","expression","res","cache","firstEl","el","isArrayLike","lastEl","coll","callback","each","_prop","set","dom","camelize","target","indexOf","toUpperCase","cssName","host","camelCase","cssFix","root","style","n","prefixes","offsetParent","css","offset","box","tagName","ownerDocument","doc","documentElement","win","defaultView","parentWindow","inDoc","getBoundingClientRect","clientTop","clientLeft","scrollTop","Math","max","pageYOffset","scrollLeft","pageXOffset","top","left","getWindow","node","window","document","nodeType","stringValue","isNil","NaN","addListen","type","handler","once","isFunc","TypeError","listens","listenKey","handlers","contains","LinkedList","removeListen","empty","remove","getListens","hasListen","bandEvent","cb","hook","eventHooks","bind","dispatch","focusBlur","unbandEvent","unbind","delegateEvent","delegateEvents","undelegateEvent","dispatchElement","event","isMove","currentTarget","isImmediatePropagationStopped","now","Date","last","call","off","dispatchEvent","disabled","canBubbleUp","getAttribute","cancelBubble","parentNode","Event","eventHookTypes","fix","fireReady","fn","readyList","_hump","k","hump","regHump","assign","source","alias","v","reg","dynamicClass","text","index","token","exec","lastIndex","Configuration","Binding","cfg","_scope","observer","obj","proxy","realScope","parent","$parent","hasOwnProp","expr","propScope","on","exprScope","un","get","has","value","config","register","commentCfg","Logger","translates","desc","debug","restore","transform","warn","keyCodes","eventTranslates","which","stopPropagation","preventDefault","nomalTranslates","indent","JSON","stringify","Number","parse","toLowerCase","currency","parseFloat","isFinite","stringified","abs","toFixed","_int","head","_float","sign","digitsRE","plural","singular","unit","format","RegExp","textContent","createElement","selectors","all","querySelectorAll","querySelector","deep","clone","cloneNode","nextSibling","nextElementSibling","previousSibling","previousElementSibling","childNodes","children","removeChild","insertBefore","lastChild","next","appendChild","firstChild","before","append","replaceChild","html","innerHTML","outerHTML","container","focus","selector","styleTag","__qsaels","styleSheet","cssText","textnode","createTextNode","scrollBy","elements","rfocusable","rclickable","propFix","propHooks","setAttribute","removeAttribute","check","cls","classList","add","cur","elem","attributeNode","getAttributeNode","specified","parseInt","nodeName","href","cssHooks","cssDefaultHook","convert","num","cssNumber","_offsetParent","_offset","parentOffset","scrollTo","W3C","cssDefaultGet","getComputedStyle","styles","getPropertyValue","opacity","rnumnonpx","rposition","ralpha","ie8","XDomainRequest","salpha","border","currentStyle","rsLeft","runtimeStyle","pixelLeft","alpha","op","enabled","filter","zoom","position","boxSizing","offsetProp","method","includeMargin","valHooks","attributes","signle","selectedIndex","options","option","values","selected","vl","isArray","nr","isBoolean","opts","hackEvent","createEvent","initEvent","createEventObject","fireEvent","mouseEventReg","keyEventReg","eventProps","eventFixHooks","keyEventFixHook","original","charCode","keyCode","mouseEventFixHook","eventDoc","button","pageX","clientX","pageY","clientY","fixHook","originalEvent","returnValue","defaultPrevented","getPreventDefault","timeStamp","props","srcElement","stopImmediatePropagation","capture","addEventListener","attachEvent","removeEventListener","detachEvent","canBubbleUpArray","change","select","origType","fixType","t","relatedTarget","compareDocumentPosition","construct","animationend","navigator","userAgent","input","oldValue","actEl","activeElement","propertyName","$onchange","onmousewheel","fixWheelType","onwheel","fixWheelDelta","mousewheel","wheelDeltaY","wheelDelta","wheelDeltaX","isReady","readyState","doScroll","frameElement","external","doScrollCheck","ready","expressionArgs","comment","createComment","observeHandler","ident","observe","_this","update","unobserve","_this2","attr","directives","Directive","domParser","directive","bindChildren","unbindChildren","prototype","priority","block","independent","isExtendOf","isObject","extend","directiveCount","bindedCount","bindedChildren","_bind","YieId","then","getDirective","bindings","query","after","prepend","binded","destroy","DirectiveParser","TextParser","TEXT","DIRECTIVE","DIRECTIVE_GROUP","DomParser","parseEl","directiveParser","df","createDocumentFragment","Template","parseBindings","parseEls","descs","els","Text","Const","DirectiveGroup","elStatus","eachDom","templ","elemHandler","textHandler","_eachDom","markEl","marked","isDirective","isBlock","isIndependent","sort","a","b","getPriority","childEl","removeAttr","parser","p","nextToken","start","_this4","insertNotBlankText","substring","insertText","end","substr","content","templateId","templateCache","id","complie","eachReg","eachAliasReg","scopeExpr","indexExpr","aliasToken","valueAlias","keyAlias","begin","version","parentScope","used","indexMap","item","reuse","idles","fragment","tpl","idle","pop","initScope","createScope","create","$eachContext","isCreate","doned","thens","EventDirective","path","eventType","events","opt","SimpleDirective","listen","unlisten","EVENT_CHANGE","EVENT_INPUT","TAG_SELECT","TAG_INPUT","TAG_TEXTAREA","RADIO","CHECKBOX","blankValue","handleArray","Array","handleObject","cleanup","prevKeys","key","addClass","removeClass","isArr","yieId","done","checked","onChange","tag","setRealValue","elVal","_val","setValue","simple","init","util"],"mappings":"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"}