{"version":3,"file":null,"sources":["../src/util.js","../src/dom/core.js","../src/dom/attr.js","../src/dom/css.js","../src/dom/val.js","../src/dom/event.js","../src/dom/ready.js","../src/filter.js","../src/expression.js","../src/Template.js","../src/template.js","../src/config.js","../src/binding/Binding.js","../src/log.js","../src/binding/Text.js","../src/binding/Directive.js","../src/binding/DirectiveGroup.js","../src/TextParser.js","../src/TemplateParser.js","../src/templateInstance.js","../src/directives/each.js","../src/directives/event.js","../src/directives/simple.js","../src/directives/index.js","../src/index.js"],"sourcesContent":["import observer from 'observer'\n\nconst regHump = /(^[a-z])|([_-][a-zA-Z])/g\n\nfunction _hump(k) {\n  if (k[0] == '_' || k[0] == '-')\n    k = k[1]\n  return k.toUpperCase();\n}\n\nfunction assign(target, source, alias) {\n  observer.each(source, (v, k) => {\n    target[alias[k] || k] = v\n  })\n  return target\n}\n\nexport default assign({\n  hump(str) {\n    return str.replace(regHump, _hump);\n  },\n  YieId: observer.dynamicClass({\n    constructor() {\n      this.doned = false\n      this.thens = []\n    },\n    then(callback) {\n      if (this.doned)\n        callback()\n      else\n        this.thens.push(callback)\n    },\n    done() {\n      if (!this.doned) {\n        let thens = this.thens;\n        for (let i = 0, l = thens.length; i < l; i++) {\n          thens[i]()\n        }\n        this.doned = true\n      }\n    },\n    isDone() {\n      return this.doned\n    }\n  })\n}, observer, {\n  on: 'observe',\n  un: 'unobserve',\n  hasListen: 'isObserved'\n})\n","import _ from '../util'\n\nconst textContent = typeof document.createElement('div').textContent == 'string' ? 'textContent' : 'innerText'\n\nfunction firstEl(el) {\n  return _.isArrayLike(el) ? el[0] : el\n}\n\nfunction lastEl(el) {\n  return _.isArrayLike(el) ? el[el.length - 1] : el\n}\n\nfunction apply(coll, callback) {\n  _.isArrayLike(coll) ? _.each(coll, callback) : callback(coll)\n}\n\nlet dom = {\n  W3C: !!window.dispatchEvent,\n  inDoc(el, root) {\n    root = root || document.documentElement\n    if (root.contains)\n      return root.contains(el)\n    try {\n      while ((el = el.parentNode)) {\n        if (el === root)\n          return true\n      }\n    } catch (e) {}\n    return false\n  },\n  query(selectors, all) {\n    if (_.isString(selectors))\n      return all ? document.querySelectorAll(selectors) : document.querySelector(selectors)\n    return selectors\n  },\n  cloneNode(el, deep) {\n    function clone(el) {\n      return el.cloneNode(deep !== false)\n    }\n    return _.isArrayLike(el) ? _.map(el, clone) : clone(el)\n  },\n  parent(el) {\n    return firstEl(el).parentNode\n  },\n  next(el, all) {\n    el = lastEl(el)\n    return all ? el.nextSibling : el.nextElementSibling\n  },\n  prev(el, all) {\n    el = firstEl(el)\n    return all ? el.previousSibling : el.previousElementSibling\n  },\n  children(el, all) {\n    el = firstEl(el)\n    return all ? el.childNodes : el.children\n  },\n  remove(el) {\n    apply(el, (el) => {\n      let parent = el.parentNode\n      if (parent)\n        parent.removeChild(el)\n    })\n    return dom\n  },\n  before(el, target) {\n    target = firstEl(target)\n    let parent = target.parentNode\n    apply(el, (el) => {\n      parent.insertBefore(el, target)\n    })\n    return dom\n  },\n  after(el, target) {\n    target = lastEl(target)\n    let parent = target.parentNode\n\n    apply(el, parent.lastChild === target ? (el) => {\n      parent.insertBefore(el, target)\n    } : (() => {\n      let next = target.nextSibling\n      return (el) => {\n        parent.insertBefore(el, next)\n      }\n    })())\n    return dom\n  },\n  append(target, el) {\n    target = firstEl(target)\n    apply(el, (el) => {\n      target.appendChild(el)\n    })\n    return dom\n  },\n  prepend(target, el) {\n    target.firstChild ? dom.before(el, el.firstChild) : dom.append(target, el)\n    return dom\n  },\n  replace(source, target) {\n    let parent = source.parentNode\n    parent.replaceChild(target, source)\n  },\n  html(el, html) {\n    return arguments.length > 1 ? (el.innerHTML = html) : el.innerHTML\n  },\n  outerHtml(el) {\n    if (el.outerHTML)\n      return el.outerHTML\n\n    let container = document.createElement('div')\n    container.appendChild(el.cloneNode(true))\n    return container.innerHTML\n  },\n  text(el, text) {\n    if (el.nodeType == 3)\n      return arguments.length > 1 ? (el.data = text) : el.data\n    return arguments.length > 1 ? (el[textContent] = text) : el[textContent]\n  },\n  focus(el) {\n    el.focus()\n    return dom\n  }\n}\n\nexport default dom\n\n//====================== Query =============================\nif (!document.querySelectorAll) {\n  document.querySelectorAll = function querySelectorAll(selector) {\n    let doc = document,\n      head = doc.documentElement.firstChild,\n      styleTag = doc.createElement('STYLE')\n\n    head.appendChild(styleTag)\n    doc.__qsaels = []\n    if (styleTag.styleSheet) { // for IE\n      styleTag.styleSheet.cssText = selector + '{x:expression(document.__qsaels.push(this))}'\n    } else { // others\n      let textnode = document.createTextNode(selector + '{x:expression(document.__qsaels.push(this))}')\n      styleTag.appendChild(textnode)\n    }\n    window.scrollBy(0, 0)\n    return doc.__qsaels\n  }\n}\nif (!document.querySelector) {\n  document.querySelector = function querySelector(selectors) {\n    let elements = document.querySelectorAll(selectors)\n    return elements.length ? elements[0] : null\n  }\n}\n","import dom from './core'\nimport _ from '../util'\n\nconst rfocusable = /^(?:input|select|textarea|button|object)$/i,\n  rclickable = /^(?:a|area)$/i\n\nexport default _.assign(dom, {\n  prop(el, name, value) {\n    name = dom.propFix[name] || name\n    let hook = dom.propHooks[name]\n\n    if (arguments.length == 2)\n      return hook && hook.get ? hook.get(el, name) : el[name]\n    hook && hook.set ? hook.set(el, name, value) : (el[name] = value)\n    return dom\n  },\n  attr(el, name, val) {\n    if (arguments.length == 2)\n      return el.getAttribute(name)\n    el.setAttribute(name, val)\n    return dom\n  },\n  removeAttr(el, name) {\n    el.removeAttribute(name)\n    return dom\n  },\n  checked(el, check) {\n    return _prop(el, 'checked', arguments.length > 1, check)\n  },\n  class(el, cls) {\n    return _prop(el, 'class', arguments.length > 1, cls)\n  },\n  addClass(el, cls) {\n    if (el.classList) {\n      el.classList.add(cls)\n    } else {\n      let cur = ` ${dom.prop(el, 'class')} `\n      if (cur.indexOf(` ${cls} `) === -1)\n        dom.class(el, _.trim(cur + cls))\n    }\n    return dom\n  },\n  removeClass(el, cls) {\n    el.classList ? el.classList.remove(cls) :\n      dom.class(el, _.trim(` ${dom.prop(el, 'class')} `.replace(new RegExp(` ${cls} `, 'g'), '')))\n    return dom\n  },\n  style(el, style) {\n    return _prop(el, 'style', arguments.length > 1, style)\n  },\n  propHooks: {\n    tabIndex: {\n      get: function(elem) {\n        let attributeNode = elem.getAttributeNode('tabindex')\n\n        return attributeNode && attributeNode.specified ? parseInt(attributeNode.value, 10) :\n          rfocusable.test(elem.nodeName) || rclickable.test(elem.nodeName) && elem.href ?\n          0 : undefined\n      }\n    }\n  },\n  propFix: {\n    tabindex: 'tabIndex',\n    readonly: 'readOnly',\n    'for': 'htmlFor',\n    'class': 'className',\n    maxlength: 'maxLength',\n    cellspacing: 'cellSpacing',\n    cellpadding: 'cellPadding',\n    rowspan: 'rowSpan',\n    colspan: 'colSpan',\n    usemap: 'useMap',\n    frameborder: 'frameBorder',\n    contenteditable: 'contentEditable'\n  }\n})\n\nfunction _prop(el, name, set, val) {\n  if (!set) return dom.prop(el, name)\n  dom.prop(el, name)\n  return dom\n}\n","import dom from './core'\nimport _ from '../util'\n\nexport default _.assign(dom, {\n  css(el, name, value) {\n    let prop = /[_-]/.test(name) ? camelize(name) : name,\n      hook\n\n    name = cssName(prop) || prop\n    hook = cssHooks[prop] || cssDefaultHook\n    if (arguments.length == 2) {\n      let convert = value,\n        num;\n\n      if (name === 'background')\n        name = 'backgroundColor';\n      value = hook.get(el, name);\n      return convert !== false && isFinite((num = parseFloat(value))) ? num : value;\n    } else if (!value && value !== 0) {\n      el.style[name] = ''\n    } else {\n      if (isFinite(value) && !cssNumber[prop])\n        value += 'px'\n      hook.set(el, name, value)\n    }\n    return dom\n  },\n  position: function(el) {\n    let _offsetParent, _offset,\n      parentOffset = {\n        top: 0,\n        left: 0\n      };\n    if (dom.css(el, 'position') === 'fixed') {\n      _offset = el.getBoundingClientRect();\n    } else {\n      _offsetParent = offsetParent(el);\n      _offset = offset(el);\n      if (_offsetParent.tagName !== 'HTML')\n        parentOffset = offset(_offsetParent);\n      parentOffset.top += dom.css(_offsetParent, 'borderTopWidth', true);\n      parentOffset.left += dom.css(_offsetParent, 'borderLeftWidth', true);\n\n      parentOffset.top -= dom.scrollTop(_offsetParent);\n      parentOffset.left -= dom.scrollLeft(_offsetParent);\n    }\n    return {\n      top: _offset.top - parentOffset.top - dom.css(el, 'marginTop', true),\n      left: _offset.left - parentOffset.left - dom.css(el, 'marginLeft', true)\n    }\n  },\n  scrollTop(el, val) {\n    let win = getWindow(el);\n    if (arguments.length == 1) {\n      return (win ? 'scrollTop' in win ? win.scrollTop : root.pageYOffset : el.pageYOffset) || 0;\n    } else if (win) {\n      win.scrollTo(dom.scrollLeft(el), val);\n    } else {\n      el.pageYOffset = val;\n    }\n    return dom\n  },\n\n  scrollLeft(el, val) {\n    let win = getWindow(el);\n    if (arguments.length == 1) {\n      return (win ? 'scrollLeft' in win ? win.scrollLeft : root.pageXOffset : el.pageXOffset) || 0;\n    } else if (win) {\n      win.scrollTo(val, dom.scrollTop(el));\n    } else {\n      el.pageXOffset = val;\n    }\n    return dom\n  },\n\n  scroll(el, left, top) {\n    let win = getWindow(el);\n    if (arguments.length == 1) {\n      return {\n        left: dom.scrollLeft(el),\n        top: dom.scrollTop(el)\n      }\n    } else if (win) {\n      win.scrollTo(left, top);\n    } else {\n      el.pageXOffset = left;\n      el.pageYOffset = top;\n    }\n    return dom\n  }\n});\n\nlet cssFix = dom.cssFix = {\n    'float': dom.W3C ? 'cssFloat' : 'styleFloat'\n  },\n  cssHooks = dom.cssHooks = {},\n  cssDefaultHook = {},\n  prefixes = ['', '-webkit-', '-o-', '-moz-', '-ms-'],\n  cssNumber = {\n    animationIterationCount: true,\n    columnCount: true,\n    order: true,\n    flex: true,\n    flexGrow: true,\n    flexShrink: true,\n    fillOpacity: true,\n    fontWeight: true,\n    lineHeight: true,\n    opacity: true,\n    orphans: true,\n    widows: true,\n    zIndex: true,\n    zoom: true\n  },\n  cssShow = {\n    position: 'absolute',\n    visibility: 'hidden',\n    display: 'block'\n  },\n  rdisplayswap = /^(none|table(?!-c[ea]).+)/,\n  root = document.documentElement,\n  css = dom.css;\n\nfunction camelize(target) {\n  if (!target || target.indexOf('-') < 0 && target.indexOf('_') < 0) {\n    return target\n  }\n  return target.replace(/[-_][^-_]/g, function(match) {\n    return match.charAt(1).toUpperCase()\n  });\n}\n\nfunction cssName(name, host, camelCase) {\n  if (cssFix[name])\n    return cssFix[name]\n  host = host || root.style\n  for (var i = 0, n = prefixes.length; i < n; i++) {\n    camelCase = camelize(prefixes[i] + name)\n    if (camelCase in host) {\n      return (cssFix[name] = camelCase)\n    }\n  }\n  return null\n}\ncssDefaultHook.set = function cssDefaultSet(el, name, value) {\n  try {\n    el.style[name] = value\n  } catch (e) {}\n}\n\nlet cssDefaultGet;\nif (window.getComputedStyle) {\n  cssDefaultGet = cssDefaultHook.get = function cssDefaultGet(el, name) {\n    let val,\n      styles = getComputedStyle(el, null)\n\n    if (styles) {\n      val = name === 'filter' ? styles.getPropertyValue(name) : styles[name]\n      if (val === '')\n        val = el.style[name]\n    }\n    return val\n  }\n  cssHooks.opacity = {\n    get(el, name) {\n      let val = cssDefaultGet(el, name);\n      return val === '' ? '1' : ret;\n    }\n  }\n} else {\n  let rnumnonpx = /^-?(?:\\d*\\.)?\\d+(?!px)[^\\d\\s]+$/i,\n    rposition = /^(top|right|bottom|left)$/,\n    ralpha = /alpha\\([^)]*\\)/i,\n    ie8 = !!window.XDomainRequest,\n    salpha = 'DXImageTransform.Microsoft.Alpha',\n    border = {\n      thin: ie8 ? '1px' : '2px',\n      medium: ie8 ? '3px' : '4px',\n      thick: ie8 ? '5px' : '6px'\n    }\n\n  cssDefaultGet = cssDefaultHook.get = function cssDefaultGet(el, name) {\n    let currentStyle = el.currentStyle,\n      val = currentStyle[name];\n\n    if ((rnumnonpx.test(val) && !rposition.test(val))) {\n      let style = el.style,\n        left = style.left,\n        rsLeft = el.runtimeStyle.left;\n\n      el.runtimeStyle.left = currentStyle.left;\n      style.left = name === 'fontSize' ? '1em' : (val || 0);\n      val = style.pixelLeft + 'px';\n      style.left = left;\n      el.runtimeStyle.left = rsLeft;\n    }\n    if (val === 'medium') {\n      name = name.replace('Width', 'Style');\n      if (currentStyle[name] === 'none')\n        val = '0px';\n    }\n    return val === '' ? 'auto' : border[val] || val;\n  }\n  cssHooks.opacity = {\n    get(el, name) {\n      let alpha = el.filters.alpha || el.filters[salpha],\n        op = alpha && alpha.enabled ? alpha.opacity : 100;\n\n      return (op / 100) + ''\n    },\n    set(el, name, value) {\n      var style = el.style,\n        opacity = isFinite(value) && value <= 1 ? `alpha(opacity=${value * 100})` : '',\n        filter = style.filter || '';\n\n      style.zoom = 1;\n      style.filter = (ralpha.test(filter) ?\n        filter.replace(ralpha, opacity) : filter + ' ' + opacity).trim();\n      if (!style.filter)\n        style.removeAttribute('filter');\n    }\n  }\n}\n\n_.each(['top', 'left'], function(name) {\n  cssHooks[name] = {\n    get(el, name) {\n      let val = cssDefaultGet(el, name);\n      return /px$/.test(val) ? val : dom.position(el)[name] + 'px'\n    }\n  }\n})\n\n_.each(['Width', 'Height'], function(name) {\n  var method = name.toLowerCase(),\n    clientProp = 'client' + name,\n    scrollProp = 'scroll' + name,\n    offsetProp = 'offset' + name,\n    which = name == 'Width' ? ['Left', 'Right'] : ['Top', 'Bottom'];\n\n  function get(el, boxSizing) {\n    let val;\n\n    val = el[offsetProp] // border-box 0\n    if (boxSizing === 2) // margin-box 2\n      return val + css(el, 'margin' + which[0], true) + css(el, 'margin' + which[1], true);\n    if (boxSizing < 0) // padding-box  -2\n      val = val - css(el, 'border' + which[0] + 'Width', true) - css(el, 'border' + which[1] + 'Width', true);\n    if (boxSizing === -4) // content-box -4\n      val = val - css(el, 'padding' + which[0], true) - css(el, 'padding' + which[1], true);\n    return val\n  }\n\n  dom[method] = function(el) {\n    return get(el, -4);\n  }\n\n  dom['inner' + name] = function(el) {\n    return get(el, -2);\n  }\n  dom['outer' + name] = function(el, includeMargin) {\n    return get(el, includeMargin === true ? 2 : 0);\n  }\n})\n\nfunction offsetParent(el) {\n  var offsetParent = el.offsetParent\n  while (offsetParent && css(offsetParent, \"position\") === \"static\") {\n    offsetParent = offsetParent.offsetParent;\n  }\n  return offsetParent || root;\n}\n\nfunction offset(el) { //取得距离页面左右角的坐标\n  var box = {\n    left: 0,\n    top: 0\n  };\n\n  if (!el || !el.tagName || !el.ownerDocument)\n    return box;\n\n  var doc = el.ownerDocument,\n    body = doc.body,\n    root = doc.documentElement,\n    win = doc.defaultView || doc.parentWindow;\n\n  if (!dom.inDoc(el, root))\n    return box;\n\n  if (el.getBoundingClientRect)\n    box = el.getBoundingClientRect();\n\n  var clientTop = root.clientTop || body.clientTop,\n    clientLeft = root.clientLeft || body.clientLeft,\n    scrollTop = Math.max(win.pageYOffset || 0, root.scrollTop, body.scrollTop),\n    scrollLeft = Math.max(win.pageXOffset || 0, root.scrollLeft, body.scrollLeft);\n  return {\n    top: box.top + scrollTop - clientTop,\n    left: box.left + scrollLeft - clientLeft\n  }\n}\n\nfunction getWindow(node) {\n  return node.window && node.document ? node : node.nodeType === 9 ? node.defaultView || node.parentWindow : false;\n}\n","import dom from './core'\nimport _ from '../util'\n\nfunction stringValue(val) {\n  if (_.isNil(val) || val === NaN)\n    return ''\n  if (!_.isString(val))\n    return val + ''\n  return val\n}\n\nexport default _.assign(dom, {\n  val(el, val) {\n    let hook = dom.valHooks[el.type || el.tagName.toLowerCase()]\n\n    if (arguments.length == 1)\n      return hook && hook.get ? hook.get(el) : el.value || ''\n\n    if (hook && hook.set) {\n      hook.set(el, val)\n    } else {\n      el.value = stringValue(val)\n    }\n    return dom\n  },\n  valHooks: {\n    option: {\n      get(el) {\n        let val = el.attributes.value\n\n        return !val || val.specified ? el.value : el.text\n      }\n    },\n\n    select: {\n      get(el) {\n        let signle = el.type == 'select-one',\n          index = el.selectedIndex\n\n        if (index < 0)\n          return signle ? undefined : []\n\n        let options = el.options,\n          option,\n          values = signle ? undefined : []\n\n        for (let i = 0, l = options.length; i < l; i++) {\n          option = options[i];\n          if (option.selected || i == index) {\n            if (signle) return dom.val(option);\n            values.push(dom.val(option))\n          }\n        }\n        return values\n      },\n\n      set(el, value) {\n        let signle = el.type == 'select-one',\n          options = el.options,\n          option, i, l, vl, val\n\n        el.selectedIndex = -1;\n\n        if (!_.isArray(value))\n          value = _.isNil(value) ? [] : [value]\n\n        if ((vl = value.length)) {\n          if (signle) vl = value.length = 1\n\n          let map = _.reverseConvert(value, () => false),\n            nr = 0\n\n          for (i = 0, l = options.length; i < l; i++) {\n            option = options[i]\n            val = dom.val(option)\n            if (_.isBoolean(map[val])) {\n              map[val] = option.selected = true\n              if (++nr === vl)\n                break\n            }\n            value = _.keys(map, (v) => v === true)\n          }\n        }\n        return signle ? value[0] : value\n      }\n    }\n  }\n})\n","import dom from './core'\nimport _ from '../util'\n\nconst root = document.documentElement\n\nexport default _.assign(dom, {\n  hasListen(el, type, cb) {\n    return hasListen(el, type, cb)\n  },\n  on(el, type, cb, once) {\n    if (addListen(el, type, cb, once === true))\n      canBubbleUp[type] ? delegateEvent(type, cb) : bandEvent(el, type, cb)\n    return dom\n  },\n  once(el, type, cb) {\n    return dom.on(el, type, cb, true)\n  },\n  off(el, type, cb) {\n    if (removeListen(el, type, cb))\n      canBubbleUp[type] ? undelegateEvent(type, cb) : unbandEvent(el, type, cb)\n    return dom\n  },\n  dispatchEvent(el, type, opts) {\n    let hackEvent\n    if (document.createEvent) {\n      hackEvent = document.createEvent('Events')\n      hackEvent.initEvent(type, true, true, opts)\n      _.assign(hackEvent, opts)\n      el.dispatchEvent(hackEvent)\n    } else if (dom.inDoc(el)) { //IE6-8触发事件必须保证在DOM树中,否则报'SCRIPT16389: 未指明的错误'\n      hackEvent = document.createEventObject()\n      _.assign(hackEvent, opts)\n      el.fireEvent('on' + type, hackEvent)\n    }\n    return hackEvent\n  }\n})\n\nconst mouseEventReg = /^(?:mouse|contextmenu|drag)|click/,\n  keyEventReg = /^key/,\n  eventProps = ['altKey', 'bubbles', 'cancelable', 'ctrlKey', 'currentTarget', 'propertyName',\n    'eventPhase', 'metaKey', 'relatedTarget', 'shiftKey', 'target', 'view', 'which'\n  ],\n  eventFixHooks = {},\n  keyEventFixHook = {\n    props: ['char', 'charCode', 'key', 'keyCode'],\n    fix: function(event, original) {\n      if (event.which == null)\n        event.which = original.charCode != null ? original.charCode : original.keyCode\n    }\n  },\n  mouseEventFixHook = {\n    props: ['button', 'buttons', 'clientX', 'clientY', 'offsetX', 'offsetY', 'pageX', 'pageY', 'screenX', 'screenY', 'toElement'],\n    fix: function(event, original) {\n      var eventDoc, doc, body,\n        button = original.button\n\n      if (event.pageX == null && original.clientX != null) {\n        eventDoc = event.target.ownerDocument || document\n        doc = eventDoc.documentElement\n        body = eventDoc.body\n        event.pageX = original.clientX + (doc && doc.scrollLeft || body && body.scrollLeft || 0) - (doc && doc.clientLeft || body && body.clientLeft || 0)\n        event.pageY = original.clientY + (doc && doc.scrollTop || body && body.scrollTop || 0) - (doc && doc.clientTop || body && body.clientTop || 0)\n      }\n      if (!event.which && button !== undefined)\n        event.which = (button & 1 ? 1 : (button & 2 ? 3 : (button & 4 ? 2 : 0)))\n    }\n  }\n\nclass Event {\n  constructor(event) {\n    let type = event.type,\n      fixHook = eventFixHooks[type],\n      i, prop\n\n    this.originalEvent = event\n    this.type = event.type\n    this.returnValue = !(event.defaultPrevented || event.returnValue === false || event.getPreventDefault && event.getPreventDefault())\n    this.timeStamp = event && event.timeStamp || (new Date() + 0)\n\n    i = eventProps.length\n    while (i--) {\n      prop = eventProps[i]\n      this[prop] = event[prop]\n    }\n\n    if (!fixHook)\n      eventFixHooks[type] = fixHook = mouseEventReg.test(type) ? mouseEventFixHook : keyEventReg.test(type) ? keyEventFixHook : {}\n\n    if (fixHook.props) {\n      let props = fixHook.props\n      i = props.length\n      while (i--) {\n        prop = props[i]\n        this[prop] = event[prop]\n      }\n    }\n\n    if (!this.target)\n      this.target = event.srcElement || document\n    if (this.target.nodeType == 3)\n      this.target = this.target.parentNode\n\n    if (fixHook.fix)\n      fixHook.fix(this, event)\n  }\n\n  preventDefault() {\n    let e = this.originalEvent\n    this.returnValue = false\n    if (e) {\n      e.returnValue = false\n      if (e.preventDefault)\n        e.preventDefault()\n    }\n  }\n\n  stopPropagation() {\n    let e = this.originalEvent\n    this.cancelBubble = true\n    if (e) {\n      e.cancelBubble = true\n      if (e.stopPropagation)\n        e.stopPropagation()\n    }\n  }\n\n  stopImmediatePropagation() {\n    let e = this.originalEvent\n    this.isImmediatePropagationStopped = true\n    if (e.stopImmediatePropagation)\n      e.stopImmediatePropagation()\n    this.stopPropagation()\n  }\n}\n\nconst listenKey = '__LISTEN__'\n\nfunction addListen(el, type, handler, once) {\n  if (!_.isFunc(handler))\n    throw TypeError('Invalid Event Handler')\n\n  let listens = el[listenKey],\n    handlers\n\n  if (!listens)\n    el[listenKey] = listens = {}\n\n  if (!(handlers = listens[type]))\n    listens[type] = handlers = []\n\n  handlers.push({\n    handler: handler,\n    once: once\n  })\n  return handlers.length === 1\n}\n\nfunction removeListen(el, type, handler) {\n  let listens = el[listenKey],\n    handlers = listens ? listens[type] : undefined\n\n  if (handlers) {\n    for (let i = 0, l = handlers.length; i < l; i++) {\n      if (handlers[i].handler === handler) {\n        handlers.splice(i, 1);\n        return l === 1\n      }\n    }\n  }\n  return false;\n}\n\nfunction getListens(el, type) {\n  let listens = el[listenKey],\n    handlers = listens ? listens[type] : undefined\n\n  return handlers ? handlers.slice() : undefined\n}\n\nfunction hasListen(el, type, handler) {\n  let listens = el[listenKey],\n    handlers = listens ? listens[type] : undefined\n\n  return handlers ? handler ? _.indexOf(handlers, handler) != -1 : !!handlers.length : false;\n}\n\nconst bind = dom.W3C ? function(el, type, fn, capture) {\n    el.addEventListener(type, fn, capture)\n  } : function(el, type, fn) {\n    el.attachEvent('on' + type, fn)\n  },\n  unbind = dom.W3C ? function(el, type, fn) {\n    el.removeEventListener(type, fn)\n  } : function(el, type, fn) {\n    el.detachEvent('on' + type, fn)\n  },\n  canBubbleUpArray = ['click', 'dblclick', 'keydown', 'keypress', 'keyup',\n    'mousedown', 'mousemove', 'mouseup', 'mouseover', 'mouseout', 'wheel', 'mousewheel',\n    'input', 'change', 'beforeinput', 'compositionstart', 'compositionupdate', 'compositionend',\n    'select', 'cut', 'copy', 'paste', 'beforecut', 'beforecopy', 'beforepaste', 'focusin',\n    'focusout', 'DOMFocusIn', 'DOMFocusOut', 'DOMActivate', 'dragend', 'datasetchanged'\n  ],\n  canBubbleUp = {},\n  focusBlur = {\n    focus: true,\n    blur: true\n  },\n  eventHooks = {},\n  eventHookTypes = {},\n  delegateEvents = {};\n\n_.each(canBubbleUpArray, (name) => {\n  canBubbleUp[name] = true;\n});\nif (!dom.W3C) {\n  delete canBubbleUp.change\n  delete canBubbleUp.select\n}\n\nfunction bandEvent(el, type, cb) {\n  let hook = eventHooks[type];\n  if (!hook || !hook.bind || hook.bind(el, type, cb) !== false)\n    bind(el, hook ? hook.type || type : type, dispatch, !!focusBlur[type]);\n}\n\nfunction unbandEvent(el, type, cb) {\n  let hook = eventHooks[type];\n  if (!hook || !hook.unbind || hook.unbind(el, type, cb) !== false)\n    unbind(el, hook ? hook.type || type : type, dispatch);\n}\n\nfunction delegateEvent(type, cb) {\n  if (!delegateEvents[type]) {\n    bandEvent(root, type, cb);\n    delegateEvents[type] = 1;\n  } else {\n    delegateEvents[type]++;\n  }\n}\n\nfunction undelegateEvent(type, cb) {\n  if (delegateEvents[type]) {\n    delegateEvents[type]--;\n    if (!delegateEvents[type])\n      unbandEvent(root, type, cb);\n  }\n}\n\nlet last = new Date();\n\nfunction dispatchElement(el, event, isMove) {\n  let handlers = getListens(el, event.type);\n\n  if (handlers) {\n    event.currentTarget = el;\n    let handler, i, l;\n    for (i = 0, l = handlers.length; i < l && !event.isImmediatePropagationStopped; i++) {\n      handler = handlers[i];\n      if (isMove) {\n        let now = new Date();\n        if (now - last > 16) {\n          handler.handler.call(el, event);\n          last = now;\n        }\n      } else\n        handler.handler.call(el, event);\n\n      if (handler.once)\n        dom.off(el, event.type, handler.handler);\n    }\n  }\n}\n\nfunction dispatchEvent(el, type, event) {\n  if (el.disabled !== true || type !== 'click') {\n    let isMove = /move|scroll/.test(type);\n    if (canBubbleUp[type]) {\n      while (el && el.getAttribute && !event.cancelBubble) {\n        dispatchElement(el, event, isMove);\n        el = el.parentNode;\n      }\n    } else\n      dispatchElement(el, event, isMove);\n  }\n}\n\nfunction dispatch(event) {\n  event = new Event(event);\n  let type = event.type,\n    el = event.target;\n  if (eventHookTypes[type]) {\n    type = eventHookTypes[type]\n    let hook = eventHooks[type];\n    if (hook && hook.fix && hook.fix(el, event) === false)\n      return;\n    event.type = type;\n    dispatchEvent(el, type, event);\n  } else {\n    dispatchEvent(el, type, event);\n  }\n}\n\n//针对firefox, chrome修正mouseenter, mouseleave\nif (!('onmouseenter' in root)) {\n  _.each({\n    mouseenter: 'mouseover',\n    mouseleave: 'mouseout'\n  }, function(origType, fixType) {\n    eventHooks[origType] = {\n      type: fixType,\n      fix(elem, event, fn) {\n        let t = event.relatedTarget;\n        return !t || (t !== elem && !(elem.compareDocumentPosition(t) & 16))\n      }\n    }\n  })\n}\n//针对IE9+, w3c修正animationend\n_.each({\n  AnimationEvent: 'animationend',\n  WebKitAnimationEvent: 'webkitAnimationEnd'\n}, function(construct, fixType) {\n  if (window[construct] && !eventHooks.animationend) {\n    eventHooks.animationend = {\n      type: fixType\n    }\n  }\n});\n\n//针对IE6-8修正input\nif (!('oninput' in document.createElement('input'))) {\n  delete canBubbleUp.input;\n  eventHooks.input = {\n    type: 'propertychange',\n    fix(elem, event) {\n      return event.propertyName == 'value';\n    }\n  }\n  eventHooks.change = {\n    bind(elem) {\n      if (elem.type == 'checkbox' || elem.type == 'radio') {\n        if (!elem.$onchange) {\n          elem.$onchange = function(event) {\n            event.type = 'change';\n            dispatchEvent(elem, 'change', event);\n          }\n          dom.on(elem, 'click', elem.$onchange);\n        }\n        return false;\n      }\n    },\n    unbind(elem) {\n      if (elem.type == 'checkbox' || elem.type == 'radio') {\n        dom.off(elem, 'click', elem.$onchange);\n        return false;\n      }\n    }\n  }\n} else if (navigator.userAgent.indexOf('MSIE 9') !== -1) {\n  eventHooks.input = {\n      type: 'input',\n      fix(elem) {\n        elem.oldValue = elem.value;\n      }\n    }\n    // http://stackoverflow.com/questions/6382389/oninput-in-ie9-doesnt-fire-when-we-hit-backspace-del-do-cut\n  document.addEventListener('selectionchange', function(event) {\n    var actEl = document.activeElement;\n    if (actEl.tagName === 'TEXTAREA' || (actEl.tagName === 'INPUT' && actEl.type === 'text')) {\n      if (actEl.value == actEl.oldValue)\n        return;\n      actEl.oldValue = actEl.value;\n      if (hasListen(actEl, 'input')) {\n        event = new Event(event);\n        event.type = 'input';\n        dispatchEvent(actEl, 'input', event);\n      }\n    }\n  });\n}\n\n\nif (document.onmousewheel === void 0) {\n  /* IE6-11 chrome mousewheel wheelDetla 下 -120 上 120\n   firefox DOMMouseScroll detail 下3 上-3\n   firefox wheel detlaY 下3 上-3\n   IE9-11 wheel deltaY 下40 上-40\n   chrome wheel deltaY 下100 上-100 */\n  let fixWheelType = document.onwheel ? 'wheel' : 'DOMMouseScroll',\n    fixWheelDelta = fixWheelType === 'wheel' ? 'deltaY' : 'detail';\n  eventHooks.mousewheel = {\n    type: fixWheelType,\n    fix(elem, event) {\n      event.wheelDeltaY = event.wheelDelta = event[fixWheelDelta] > 0 ? -120 : 120;\n      event.wheelDeltaX = 0;\n      return true;\n    }\n  }\n}\n_.each(eventHooks, function(hook, type) {\n  eventHookTypes[hook.type || type] = type;\n})\n","import dom from './event'\n\nlet readyList = [],\n  isReady,\n  root = document.documentElement\n\nfunction fireReady(fn) {\n  isReady = true\n  while (fn = readyList.shift())\n    fn()\n}\n\nif (document.readyState === 'complete') {\n  setTimeout(fireReady)\n} else if (document.addEventListener) {\n  document.addEventListener('DOMContentLoaded', fireReady)\n} else if (document.attachEvent) {\n  document.attachEvent('onreadystatechange', function() {\n    if (document.readyState === 'complete')\n      fireReady()\n  })\n  if (root.doScroll && window.frameElement === null && window.external) {\n    function doScrollCheck() {\n      try {\n        root.doScroll('left')\n        fireReady()\n      } catch (e) {\n        setTimeout(doScrollCheck)\n      }\n    }\n    doScrollCheck()\n  }\n}\n\ndom.on(window, 'load', fireReady);\n\ndom.ready = function(fn) {\n  !isReady ? readyList.push(fn) : fn()\n  return dom\n}\n\nexport default dom\n","import _ from './util'\nimport log from './log'\n\nconst slice = Array.prototype.slice,\n  filters = {}\n\nfunction apply(name, data, args, apply) {\n  let f = filters[name],\n    type = f ? f.type : undefined,\n    fn\n\n  fn = f ? apply !== false ? f.apply : f.unapply : undefined\n  if (!fn) {\n    log.warn(`filter[${name}].${apply !== false ? 'apply' : 'unapply'} is undefined`)\n  } else {\n    if (_.isFunc(args)) args = args()\n    data = fn.apply(f, [data].concat(args))\n  }\n  return {\n    stop: type == 'event' && data === false,\n    data: data,\n    replaceData: type !== 'event'\n  }\n}\nlet filter = {\n  register(name, filter) {\n    if (filters[name])\n      throw Error(`Filter[${name}] is existing`)\n    if (typeof filter == 'function')\n      filter = {\n        apply: filter\n      }\n    filter.type = filter.type || 'normal'\n    filters[name] = filter\n    log.debug('register Filter[%s:%s]', filter.type, name)\n  },\n\n  get(name) {\n    return filters[name]\n  },\n\n  apply: apply,\n\n  unapply(name, data, args) {\n    return apply(name, data, args, false)\n  }\n}\n\nexport default filter\n\nexport const keyCodes = {\n  esc: 27,\n  tab: 9,\n  enter: 13,\n  space: 32,\n  'delete': [8, 46],\n  up: 38,\n  left: 37,\n  right: 39,\n  down: 40\n}\n\nlet eventFilters = {\n  key(e) {\n    let which = e.which,\n      k\n\n    for (let i = 1, l = arguments.length; i < l; i++) {\n      k = arguments[i]\n      if (which == (keyCodes[k] || k))\n        return true\n    }\n    return false\n  },\n  stop(e) {\n    e.stopPropagation()\n  },\n  prevent(e) {\n    e.preventDefault()\n  },\n  self(e) {\n    return e.target === e.currentTarget\n  }\n}\n\n_.each(eventFilters, (fn, name) => {\n  filter.register(name, {\n    type: 'event',\n    apply: fn\n  })\n})\n\nlet nomalFilters = {\n  json: {\n    apply: function(value, indent) {\n      return typeof value === 'string' ? value : JSON.stringify(value, null, Number(indent) || 2)\n    },\n    unapply: function(value) {\n      try {\n        return JSON.parse(value)\n      } catch (e) {\n        return value\n      }\n    }\n  },\n\n  capitalize(value) {\n    if (!value && value !== 0) return ''\n    value = value.toString()\n    return value.charAt(0).toUpperCase() + value.slice(1)\n  },\n\n  uppercase(value) {\n    return (value || value === 0) ? value.toString().toUpperCase() : ''\n  },\n\n  lowercase(value) {\n    return (value || value === 0) ? value.toString().toLowerCase() : ''\n  },\n\n  currency(value, currency) {\n    value = parseFloat(value)\n    if (!isFinite(value) || (!value && value !== 0)) return ''\n    currency = currency != null ? currency : '$'\n    var stringified = Math.abs(value).toFixed(2)\n    var _int = stringified.slice(0, -3)\n    var i = _int.length % 3\n    var head = i > 0 ? (_int.slice(0, i) + (_int.length > 3 ? ',' : '')) : ''\n    var _float = stringified.slice(-3)\n    var sign = value < 0 ? '-' : ''\n    return sign + currency + head + _int.slice(i).replace(digitsRE, '$1,') + _float\n  },\n\n  pluralize(value) {\n    var args = slice.call(arguments, 1)\n    return args.length > 1 ? (args[value % 10 - 1] || args[args.length - 1]) : (args[0] + (value === 1 ? '' : 's'))\n  }\n}\n_.each(nomalFilters, (f, name) => {\n  filter.register(name, f)\n})\n","import _ from './util'\nimport filter from './filter'\n\nconst defaultKeywords = _.reverseConvert('Math,Date,this,true,false,null,undefined,Infinity,NaN,isNaN,isFinite,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,parseInt,parseFloat,$scope'.split(','), () => true),\n  wsReg = /\\s/g,\n  newlineReg = /\\n/g,\n  translationReg = /[\\{,]\\s*[\\w\\$_]+\\s*:|('(?:[^'\\\\]|\\\\.)*'|\"(?:[^\"\\\\]|\\\\.)*\"|`(?:[^`\\\\]|\\\\.)*\\$\\{|\\}(?:[^`\\\\]|\\\\.)*`|`(?:[^`\\\\]|\\\\.)*`)|new |typeof |void |(\\|\\|)/g,\n  translationRestoreReg = /\"(\\d+)\"/g,\n  pathTestReg = /^[A-Za-z_$][\\w$]*(?:\\.[A-Za-z_$][\\w$]*|\\['.*?'\\]|\\[\".*?\"\\]|\\[\\d+\\]|\\[[A-Za-z_$][\\w$]*\\])*$/,\n  booleanLiteralReg = /^(?:true|false)$/,\n  identityReg = /[A-Za-z_$][\\w$]*(?:\\.[A-Za-z_$][\\w$]*|\\['.*?'\\]|\\[\".*?\"\\]|\\[\\d+\\]|\\[[A-Za-z_$][\\w$]*\\])*[^\\w$\\.]/g,\n  propReg = /^[A-Za-z_$][\\w$]*/\n\nlet translations = []\n\nfunction translationProcessor(str, isString) {\n  let i = translations.length\n  translations[i] = isString ? str.replace(newlineReg, '\\\\n') : str\n  return `\"${i}\"`\n}\n\nfunction translationRestoreProcessor(str, i) {\n  return translations[i]\n}\n\nlet currentIdentities, currentKeywords, prevPropScope\n\nfunction identityProcessor(raw, idx, str) {\n  let l = raw.length,\n    suffix = raw.charAt(l - 1),\n    exp = raw.slice(0, l - 1),\n    prop = exp.match(propReg)[0]\n\n  if (defaultKeywords[prop] || currentKeywords[prop])\n    return raw\n  if (prop === '$context')\n    return raw.replace(propReg, prevPropScope)\n  if (suffix == '(') {\n    suffix = (idx + l == str.length || str.charAt(idx + l) == ')') ? '' : ','\n    prevPropScope = `this.propScope('${prop}')`\n    return `$scope.${exp}.call(${prevPropScope}${suffix}`\n  }\n  currentIdentities[exp] = true\n  return `$scope.${exp}${suffix}`\n}\n\nfunction complileExpr(body) {\n  prevPropScope = undefined;\n  return (body + ' ').replace(identityReg, identityProcessor)\n    .replace(translationRestoreReg, translationRestoreProcessor);\n}\n\nfunction compileFilterArgs(argExprs, keywords) {\n  for (let i = 0, l = argExprs.length; i < l; i++) {\n    argExprs[i] = makeExecuter(complileExpr(argExprs[i]), keywords);\n  }\n  return argExprs;\n}\n\nfunction compileFilter(filterExprs, keywords) {\n  if (!filterExprs || !filterExprs.length)\n    return [];\n\n  let filters = [],\n    filterExpr, name, argExprs\n\n  for (let i = 0, l = filterExprs.length; i < l; i++) {\n    if ((filterExpr = _.trim(filterExprs[i]))) {\n      argExprs = filterExpr.replace(/,?\\s+/g, ',').split(',')\n      filters.push({\n        name: argExprs.shift().replace(translationRestoreReg, translationRestoreProcessor),\n        args: compileFilterArgs(argExprs, keywords)\n      })\n    }\n  }\n  return filters\n}\n\nfunction compileExecuter(exp, keywords) {\n  let filterExprs, ret,\n    isSimple = isSimplePath(exp)\n\n  currentIdentities = {}\n  currentKeywords = keywords ? _.reverseConvert(keywords, () => true) : {}\n\n  if (!isSimple) {\n    filterExprs = exp.replace(translationReg, translationProcessor).split('|')\n    exp = filterExprs.shift().replace(wsReg, '')\n    isSimple = isSimplePath(exp)\n  }\n  if (isSimple) {\n    exp = exp.replace(translationRestoreReg, translationRestoreProcessor)\n    currentIdentities[exp] = true\n    ret = {\n      execute: makeExecuter(`$scope.${exp}`, keywords),\n      path: _.parseExpr(exp),\n      expr: exp\n    }\n  } else {\n    ret = {\n      execute: makeExecuter(complileExpr(exp), keywords),\n      expr: exp\n    }\n  }\n  ret.filters = compileFilter(filterExprs, keywords)\n  ret.simplePath = isSimple;\n  ret.identities = _.keys(currentIdentities)\n\n  currentKeywords = undefined\n  currentIdentities = undefined\n  translations.length = 0\n  ret.applyFilter = function(data, argScope, args, apply) {\n    let fs = ret.filters,\n      f, _args, rs\n\n    for (let i = 0, l = fs.length; i < l; i++) {\n      f = fs[i]\n      _args = parseFilterArgs(f.args, argScope, args)\n      rs = (apply !== false ? filter.apply : filter.unapply)(f.name, data, _args)\n      if (rs.stop) {\n        return rs.data\n      } else if (rs.replaceData)\n        data = rs.data\n    }\n    return data\n  }\n  ret.executeAll = function() {\n    let val = ret.execute.apply(this, arguments)\n    val = ret.applyFilter(val, this, arguments)\n    return val\n  }\n  return ret\n}\n\nfunction parseFilterArgs(executors, scope, args) {\n  return _.map(executors, (executor) => {\n    return executor.apply(scope, args)\n  })\n}\n\nfunction makeExecuter(body, args) {\n  let _args = ['$scope']\n\n  args = args ? _args.concat(args) : _args\n  args.push(`return ${body};`)\n  try {\n    return Function.apply(Function, args)\n  } catch (e) {\n    throw Error(`Invalid expression. Generated function body: ${body}`)\n  }\n}\n\nfunction isSimplePath(exp) {\n  return pathTestReg.test(exp) &&\n    !booleanLiteralReg.test(exp)\n}\n\nlet cache = {}\n\nexport default function expression(exp, args) {\n  let res\n\n  exp = _.trim(exp)\n  if (!(res = cache[exp]))\n    cache[exp] = res = compileExecuter(exp, args)\n  return res\n}\n","import _ from './util'\nimport dom from './dom'\nimport {\n  Text,\n  DirectiveGroup\n} from './binding'\nimport TextParser from './TextParser'\nimport config from './config'\nimport TemplateParser from './TemplateParser'\nimport TemplateInstance from './templateInstance'\n\nconst directiveRegCfg = 'directiveReg',\n  textParserCfg = 'textParser'\n\nconfig.register(directiveRegCfg, /^tpl-/)\nconfig.register(textParserCfg, TextParser.NormalTextParser)\n\nfunction parseEl(templ, clone) {\n  if (_.isString(templ)) {\n    templ = _.trim(templ)\n    if (templ.charAt(0) == '<') {\n      let el = document.createElement('div')\n      dom.html(el, templ)\n      return el.childNodes\n    }\n    templ = dom.query(templ)\n  }\n  return clone ? dom.cloneNode(templ) : templ\n}\n\nfunction getConfig(cfg, name) {\n  return cfg[name] || config.get(name)\n}\n\nlet templateId = 0\nconst templateCache = {}\nexport default _.dynamicClass({\n  statics: {\n    get(id) {\n      return templateCache[id]\n    }\n  },\n  constructor(templ, cfg = {}) {\n    this.id = cfg.id || (templateId++)\n    this.directiveReg = getConfig(cfg, directiveRegCfg)\n    this.TextParser = getConfig(cfg, textParserCfg)\n    this.el = parseEl(templ, cfg.clone !== false)\n    this.parser = new TemplateParser(this.el, this.directiveReg, this.TextParser)\n    templateCache[this.id] = this\n  },\n  complie(scope) {\n    let templ = this.parser.clone(),\n      els = templ.els,\n      bindings\n\n    dom.append(document.createDocumentFragment(), templ.el)\n    bindings = _.map(templ.bindings, (binding) => {\n      return this.parser.createDirective(binding, {\n        el: els[binding.index],\n        scope: scope,\n        template: this\n      })\n    })\n    return new TemplateInstance(templ.el, bindings)\n  }\n})\n","import _ from './util'\nimport dom from './dom'\nimport {\n  Text,\n  DirectiveGroup\n} from './binding'\nimport TextParser from './TextParser'\nimport config from './config'\nimport TemplateParser from './TemplateParser'\nimport TemplateInstance from './templateInstance'\n\nconst directiveRegCfg = 'directiveReg',\n  textParserCfg = 'textParser'\n\nconfig.register(directiveRegCfg, /^tpl-/)\nconfig.register(textParserCfg, TextParser.NormalTextParser)\n\nfunction parseEl(templ, clone) {\n  if (_.isString(templ)) {\n    templ = _.trim(templ)\n    if (templ.charAt(0) == '<') {\n      let el = document.createElement('div')\n      dom.html(el, templ)\n      return el.childNodes\n    }\n    templ = dom.query(templ)\n  }\n  return clone ? dom.cloneNode(templ) : templ\n}\n\nfunction getConfig(cfg, name) {\n  return cfg[name] || config.get(name)\n}\n\nlet templateId = 0\nconst templateCache = {}\nexport default _.dynamicClass({\n  statics: {\n    get(id) {\n      return templateCache[id]\n    }\n  },\n  constructor(templ, cfg = {}) {\n    this.id = cfg.id || (templateId++)\n    this.directiveReg = getConfig(cfg, directiveRegCfg)\n    this.TextParser = getConfig(cfg, textParserCfg)\n    this.el = parseEl(templ, cfg.clone !== false)\n    this.parser = new TemplateParser(this.el, this.directiveReg, this.TextParser)\n    templateCache[this.id] = this\n  },\n  complie(scope) {\n    let templ = this.parser.clone(),\n      els = templ.els,\n      bindings\n\n    dom.append(document.createDocumentFragment(), templ.el)\n    bindings = _.map(templ.bindings, (binding) => {\n      return this.parser.createDirective(binding, {\n        el: els[binding.index],\n        scope: scope,\n        template: this\n      })\n    })\n    return new TemplateInstance(templ.el, bindings)\n  }\n})\n","import _ from './util'\n\nexport default new _.Configuration()\n","import _ from '../util'\nimport config from '../config'\n\nconst Binding = _.dynamicClass({\n  statics: {\n    commentCfg: 'generateComments'\n  },\n  constructor(cfg) {\n    this._scope = _.obj(cfg.scope)\n    this.el = cfg.el\n  },\n  scope() {\n    let scope = this._scope\n    return _.proxy(scope) || scope\n  },\n  realScope() {\n    return this._scope\n  },\n  propScope(prop) {\n    let scope = this.realScope(),\n      parent\n\n    while ((parent = scope.$parent) && !_.hasOwnProp(scope, prop)) {\n      scope = parent\n    }\n    return _.proxy(scope) || scope\n  },\n  exprScope(expr) {\n    return this.propScope(_.parseExpr(expr)[0])\n  },\n  observe(expr, callback) {\n    _.observe(this.exprScope(expr), expr, callback)\n  },\n  unobserve(expr, callback) {\n    _.unobserve(this.exprScope(expr), expr, callback)\n  },\n  get(expr) {\n    return _.get(this.realScope(), expr)\n  },\n  has(expr) {\n    return _.has(this.realScope(), expr)\n  },\n  set(expr, value) {\n    _.set(this.scope(), expr, value)\n  },\n  bind() {\n    throw new Error('abstract method')\n  },\n  unbind() {\n    throw new Error('abstract method')\n  },\n  destroy() {}\n})\nconfig.register(Binding.commentCfg, true)\nexport default Binding\n","import _ from './util'\n\nexport default new _.Logger('tpl', 'debug')\n","import Binding from './Binding'\nimport _ from '../util'\nimport dom from '../dom'\nimport expression from '../expression'\nimport config from '../config'\nimport log from '../log'\n\nconst expressionArgs = ['$el']\n\nexport default _.dynamicClass({\n  extend: Binding,\n  constructor(cfg) {\n    this.super(arguments)\n    this.expr = expression(cfg.expression, expressionArgs)\n    if (config.get(Binding.commentCfg)) {\n      this.comment = document.createComment('Text Binding ' + this.expr)\n      dom.before(this.comment, this.el)\n    }\n    this.observeHandler = this.observeHandler.bind(this)\n  },\n  value() {\n    return this.expr.executeAll.call(this, this.scope(), this.el)\n  },\n  bind() {\n    _.each(this.expr.identities, (ident) => {\n      this.observe(ident, this.observeHandler)\n    })\n    this.update(this.value())\n  },\n  unbind() {\n    _.each(this.expr.identities, (ident) => {\n      this.unobserve(ident, this.observeHandler)\n    })\n  },\n  observeHandler(attr, val) {\n    if (this.expr.simplePath) {\n      this.update(this.expr.applyFilter(val, this, [this.scope(), this.el]))\n    } else {\n      this.update(this.value())\n    }\n  },\n  update(val) {\n    if (_.isNil(val)) val = ''\n    if (val !== dom.text(this.el))\n      dom.text(this.el, val)\n  }\n})\n","import Binding from './Binding'\nimport _ from '../util'\nimport dom from '../dom'\nimport config from '../config'\nimport log from '../log'\n\nconst directives = {}\n\nconst Directive = _.dynamicClass({\n  extend: Binding,\n  abstract: false,\n  block: false,\n  priority: 5,\n  constructor(cfg) {\n    this.super(arguments)\n    this.expr = cfg.expression\n    this.attr = cfg.attr\n    this.template = cfg.template\n    this.templateIndex = cfg.index\n    this.children = _.map(cfg.children, (binding) => {\n      return this.template.parser.createDirective(binding, {\n        el: this.el,\n        template: this.template,\n        scope: this.realScope()\n      })\n    })\n    this.group = cfg.group\n    if (config.get(Binding.commentCfg)) {\n      this.comment = document.createComment(`Directive[${this.attr}]: ${this.expr}`)\n      dom.before(this.comment, this.el)\n    }\n  },\n  bindChildren() {\n    _.each(this.children, (directive) => {\n      directive.bind()\n    })\n  },\n  unbindChildren() {\n    _.each(this.children, (directive) => {\n      directive.unbind()\n    })\n  },\n  statics: {\n    getPriority(directive) {\n      return directive.prototype.priority\n    },\n    isBlock(directive) {\n      return directive.prototype.block\n    },\n    isAbstract(directive) {\n      return directive.prototype.abstract\n    },\n    getDirective(name) {\n      return directives[name.toLowerCase()]\n    },\n    isDirective(obj) {\n      return _.isExtendOf(obj, Directive)\n    },\n    register(name, option) {\n      let directive\n\n      name = name.toLowerCase()\n\n      if (_.isObject(option)) {\n        option.extend = option.extend || Directive\n        directive = _.dynamicClass(option)\n      } else if (_.isFunc(option) && _.isExtendOf(option, Directive)) {\n        directive = option\n      } else {\n        throw TypeError(`Invalid Directive[${name}] ${option}`)\n      }\n\n      if (name in directives)\n        throw new Error(`Directive[${name}] is existing`)\n\n      directives[name] = directive\n      log.debug('register Directive[%s]', name)\n      return directive\n    }\n  }\n})\nexport default Directive\n","import Binding from './Binding'\nimport Directive from './Directive'\nimport _ from '../util'\n\nexport default _.dynamicClass({\n  extend: Binding,\n  constructor(cfg) {\n    this.super(arguments)\n    this.template = cfg.template\n    this.directives = _.map(cfg.directives, (directive) => {\n      return this.createDirective(directive)\n    })\n    this.bindedCount = 0\n    this.bindedChildren = false\n    this.parse = this.parse.bind(this)\n    this.children = _.map(cfg.children, (directive) => {\n      return this.createDirective(directive)\n    })\n  },\n  createDirective(binding) {\n    return this.template.parser.createDirective(binding, {\n      el: this.el,\n      template: this.template,\n      scope: this.realScope(),\n      group: this\n    })\n  },\n  parse() {\n    let idx = this.bindedCount\n    if (idx < this.directives.length) {\n      let directive = this.directives[idx],\n        ret\n      ret = directive.bind()\n      this.bindedCount++;\n      (ret && ret instanceof _.YieId) ? ret.then(this.parse): this.parse()\n    } else {\n      _.each(this.children, (directive) => {\n        directive.bind()\n      })\n      this.bindedChildren = true\n    }\n  },\n  bind() {\n    this.parse()\n  },\n  unbind() {\n    let directives = this.directives,\n      i = this.bindedCount\n\n    if (this.bindedChildren) {\n      _.each(this.children, (directive) => {\n        directive.unbind()\n      })\n      this.bindedChildren = false\n    }\n    while (i--) {\n      directives[i].unbind()\n    }\n    this.bindedCount = 0\n  }\n})\n","import _ from './util'\n\nconst TextParser = _.dynamicClass({\n  constructor(text) {\n    this.text = text\n  },\n  token() {\n    throw new Error('abstract method')\n  }\n})\n\nTextParser.NormalTextParser = _.dynamicClass({\n  extend: TextParser,\n  constructor() {\n    this.super(arguments)\n    this.index = 0\n    this.reg = /{([^{]+)}/g\n  },\n  token() {\n    let tk, reg = this.reg\n\n    if (tk = reg.exec(this.text)) {\n      let index = reg.lastIndex\n\n      this.index = index\n      return {\n        token: tk[1],\n        start: index - tk[0].length,\n        end: index\n      }\n    }\n    this.index = 0\n  }\n})\nexport default TextParser\n","import _ from './util'\nimport dom from './dom'\nimport log from './log'\nimport {\n  Directive,\n  DirectiveGroup,\n  Text\n} from './binding'\n\nconst TemplateParser = _.dynamicClass({\n  statics: {\n    TEXT: 1,\n    DIRECTIVE: 2,\n    DIRECTIVE_GROUP: 3\n  },\n  constructor(el, directiveReg, TextParser) {\n    this.el = el\n    this.directiveReg = directiveReg\n    this.TextParser = TextParser\n    this.parse()\n  },\n  createDirective(binding, cfg) {\n    cfg = _.assign(cfg, binding)\n    switch (binding.type) {\n      case TemplateParser.TEXT:\n        return new Text(cfg)\n        break\n      case TemplateParser.DIRECTIVE:\n        return new binding.directive(cfg)\n      case TemplateParser.DIRECTIVE_GROUP:\n        return new DirectiveGroup(cfg)\n      default:\n        throw new Error('invalid binding')\n    }\n  },\n  clone() {\n    let el = dom.cloneNode(this.el)\n\n    return {\n      el: el,\n      els: this.parseEls(el),\n      bindings: this.bindings\n    }\n  },\n  parseEls(el) {\n    let els = []\n\n    if (_.isArrayLike(el)) {\n      _.each(el, (el) => {\n        this.parseElsNode(el, els)\n      })\n    } else {\n      this.parseElsNode(el, els)\n    }\n    return els\n  },\n  parseElsNode(el, els) {\n    els.push(el)\n    if (el.nodeType === 1 && this.els[els.length - 1].parsed)\n      _.each(el.childNodes, (el) => {\n        this.parseElsNode(el, els)\n      })\n  },\n  parse() {\n    this.els = []\n    this.bindings = []\n    if (_.isArrayLike(this.el)) {\n      _.each(this.el, (el) => {\n        this.parseNode(el, this.bindings)\n      })\n    } else {\n      this.parseNode(this.el, this.bindings)\n    }\n  },\n  parseNode(el, coll) {\n    switch (el.nodeType) {\n      case 1:\n        this.parseElement(el, coll)\n        break\n      case 3:\n        this.parseText(el, coll)\n        break\n    }\n  },\n  parseText(el, coll) {\n    let text = dom.text(el),\n      parser = new this.TextParser(text),\n      token, index = 0,\n      els = this.els\n\n    while (token = parser.token()) {\n      this.insertText2(text.substring(index, token.start), el)\n      this.insertText('binding', el)\n      coll.push({\n        expression: token.token,\n        index: els.length - 1,\n        type: TemplateParser.TEXT\n      })\n      index = token.end\n    }\n    if (index) {\n      this.insertText2(text.substr(index), el)\n      dom.remove(el)\n    } else {\n      this.pushEl(el, false)\n    }\n  },\n  parseElement(el, coll) {\n    let directives = [],\n      index = this.els.length,\n      directiveReg = this.directiveReg,\n      directive = undefined,\n      block\n\n    _.each(el.attributes, (attr) => {\n      let name = attr.name\n      if (directiveReg.test(name)) {\n        let directive = Directive.getDirective(name.replace(directiveReg, ''))\n        if (directive) {\n          let cfg = {\n            expression: attr.value,\n            index: index,\n            directive: directive,\n            attr: name,\n            type: TemplateParser.DIRECTIVE\n          }\n          if (Directive.isAbstract(directive)) {\n            directives = [cfg]\n            block = Directive.isBlock(directive)\n            return false\n          }\n          if (Directive.isBlock(directive))\n            block = true\n          directives.push(cfg)\n        } else {\n          log.warn(`Directive[${name}] is undefined`)\n        }\n      }\n    })\n\n    if (directives.length == 1) {\n      directive = directives[0]\n    } else if (directives.length) {\n      directive = {\n        directives: directives.sort((a, b) => {\n          return Directive.getPriority(b.directive) - Directive.getPriority(a.directive)\n        }),\n        index: index,\n        type: TemplateParser.DIRECTIVE_GROUP\n      }\n    }\n    if (directive) {\n      coll.push(directive)\n      coll = directive.children = []\n    }\n\n    this.pushEl(el, !block)\n    if (!block)\n      _.each(_.map(el.childNodes, (n) => n), (el) => {\n        this.parseNode(el, coll)\n      })\n  },\n  pushEl(el, parsed) {\n    el.parsed = parsed\n    this.els.push(el)\n  },\n  insertText(content, before) {\n    let el = document.createTextNode(content)\n    dom.before(el, before)\n    this.pushEl(el, false)\n    return el\n  },\n  insertText2(content, before) {\n    if ((content = _.trim(content)))\n      return this.insertText(content, before)\n  }\n})\n\nexport default TemplateParser\n","import _ from './util'\nimport dom from './dom'\n\nexport default _.dynamicClass({\n  constructor(el, bindings) {\n    this.el = el\n    this.bindings = bindings\n  },\n  before(target) {\n    this.bind()\n    dom.before(this.el, dom.query(target))\n    return this\n  },\n  after(target) {\n    this.bind()\n    dom.after(this.el, dom.query(target))\n    return this\n  },\n  prependTo(target) {\n    this.bind()\n    dom.prepend(dom.query(target), this.el)\n    return this\n  },\n  appendTo(target) {\n    this.bind()\n    dom.append(dom.query(target), this.el)\n    return this\n  },\n  bind() {\n    if (!this.binded) {\n      _.each(this.bindings, (bind) => {\n        bind.bind()\n      })\n      this.binded = true\n    }\n    return this\n  },\n  unbind() {\n    if (this.binded) {\n      _.each(this.bindings, (bind) => {\n        bind.unbind()\n      })\n      this.binded = false\n    }\n    return this\n  },\n  destroy() {\n    if (this.binded)\n      _.each(this.bindings, (bind) => {\n        bind.unbind()\n        bind.destroy()\n      })\n    dom.remove(this.el)\n    this.bindings = undefined\n    this.el = undefined\n  }\n})\n","import {\n  Directive\n} from '../binding'\nimport Template from '../template'\nimport _ from '../util'\nimport dom from '../dom'\nimport log from '../log'\n\nconst eachReg = /^\\s*([\\s\\S]+)\\s+in\\s+([\\S]+)(\\s+track\\s+by\\s+([\\S]+))?\\s*$/,\n  eachAliasReg = /^(\\(\\s*([^,\\s]+)(\\s*,\\s*([\\S]+))?\\s*\\))|([^,\\s]+)(\\s*,\\s*([\\S]+))?$/\n\nexport default Directive.register('each', _.dynamicClass({\n  extend: Directive,\n  abstract: true,\n  block: true,\n  priority: 10,\n  constructor() {\n    this.super(arguments)\n    this.observeHandler = this.observeHandler.bind(this)\n    let token = this.expr.match(eachReg)\n    if (!token)\n      throw Error(`Invalid Expression[${this.expr}] on Each Directive`)\n\n    this.scopeExpr = token[2]\n    this.indexExpr = token[4]\n\n    let aliasToken = token[1].match(eachAliasReg)\n    if (!aliasToken)\n      throw Error(`Invalid Expression[${token[1]}] on Each Directive`)\n\n    this.valueAlias = aliasToken[2] || aliasToken[5]\n    this.keyAlias = aliasToken[4] || aliasToken[7]\n\n    dom.removeAttr(this.el, this.attr)\n    this.begin = document.createComment('each begin')\n    this.end = document.createComment('each end')\n    dom.replace(this.el, this.begin)\n    dom.after(this.end, this.begin)\n\n    let eachTemplateId = this.template.id + '-' + this.templateIndex\n    if (!(this.eachTemplate = Template.get(eachTemplateId)))\n      this.eachTemplate = new Template(this.el, {\n        id: eachTemplateId,\n        directiveReg: this.template.directiveReg,\n        TextParser: this.template.TextParser,\n        clone: false\n      })\n    this.el = null\n  },\n  update(data) {\n    let parentScope = this.realScope(),\n      begin = this.begin,\n      end = this.end,\n      indexExpr = this.indexExpr,\n      valueAlias = this.valueAlias,\n      keyAlias = this.keyAlias,\n      init = !this.cache,\n      oldSort = this.sort,\n      sort = this.sort = new Array(data.length),\n      cache = init ? (this.cache = {}) : this.cache,\n      removed = [],\n      added = []\n\n    _.each(data, (item, idx) => {\n      let index = indexExpr ? _.get(item, indexExpr) : idx, // read index of data item\n        scope = !init && cache[index] // find scope in cache\n\n      if (scope) { // update scope\n        this.initScope(scope, item, idx, index)\n      } else { // create scope\n        scope = cache[index] = this.createScope(parentScope, item, idx, index)\n        if (!init)\n          added.push(scope)\n      }\n      sort[idx] = scope // update sort\n      if (init) { // init compontent\n        scope.$tpl = this.eachTemplate.complie(scope)\n        data[idx] = scope[valueAlias]\n        scope.$tpl.before(end)\n      }\n    })\n    if (!init) {\n      _.each(oldSort, (oldScope) => {\n        let scope = cache[oldScope.$index]\n        if (scope && scope !== sort[oldScope.$sort]) {\n          removed.push(oldScope)\n          cache[oldScope.$index] = undefined\n        }\n      })\n\n      _.each(added, (scope) => {\n        let scope2 = removed.pop()\n        if (scope2) {\n          this.initScope(scope2, scope)\n          cache[scope.$index] = scope2\n          sort[scope.$sort] = scope2\n          scope = scope2\n        } else {\n          scope.$tpl = this.eachTemplate.complie(scope)\n        }\n        data[scope.$sort] = scope[valueAlias]\n        scope.$tpl.after(scope.$sort ? sort[scope.$sort - 1].$tpl.els : begin)\n      })\n\n      _.each(removed, (scope) => {\n        scope.$tpl.destroy()\n      })\n    }\n  },\n  createScope(parentScope, value, i, index) {\n    let scope = _.create(parentScope)\n    scope.$parent = parentScope\n    scope.$eachContext = this\n    scope.$tpl = null\n    this.initScope(scope, value, i, index, true)\n    return scope\n  },\n  initScope(scope, value, i, index, isCreate) {\n    if (!isCreate)\n      scope = scope.$tpl.scope\n    scope.$sort = i\n    scope[this.valueAlias] = value\n    if (this.keyAlias)\n      scope[this.keyAlias] = i\n    scope.$index = index\n  },\n  bind() {\n    this.observe(this.scopeExpr, this.observeHandler)\n    this.update(this.target())\n  },\n  unbind() {\n    this.unobserve(this.scopeExpr, this.observeHandler)\n  },\n  target() {\n    return this.get(this.scopeExpr)\n  },\n  observeHandler(expr, target) {\n    this.update(target)\n  }\n}))\n","import {\n  Directive\n} from '../binding'\nimport Template from '../template'\nimport expression from '../expression'\nimport _ from '../util'\nimport dom from '../dom'\nimport log from '../log'\n\nconst expressionArgs = ['$el', '$event']\n\nconst EventDirective = _.dynamicClass({\n  extend: Directive,\n  constructor() {\n    this.super(arguments)\n    this.handler = this.handler.bind(this)\n    this.expression = expression(this.expr, expressionArgs)\n  },\n  handler(e) {\n    e.stopPropagation()\n\n    let scope = this.scope(),\n      exp = this.expression\n\n    if (this.expression.applyFilter(e, this, [scope, this.el, e]) !== false) {\n      let fn = exp.execute.call(this, scope, this.el, e)\n\n      if (exp.simplePath) {\n        if (_.isFunc(fn)) {\n          let _scope = this.propScope(exp.path[0])\n          fn.call(_scope, scope, this.el, e, _scope)\n        } else {\n          log.warn('Invalid Event Handler:%s', this.expr, fn)\n        }\n      }\n    }\n  },\n  bind() {\n    dom.on(this.el, this.eventType, this.handler)\n    this.bindChildren()\n  },\n  unbind() {\n    dom.off(this.el, this.eventType, this.handler)\n    this.unbindChildren()\n  }\n})\n\nconst events = ['blur', 'change', 'click', 'dblclick', 'error', 'focus', 'keydown', 'keypress', 'keyup', 'load',\n  'mousedown', 'mousemove', 'mouseout', 'mouseover', 'mouseup', 'resize', 'scroll', 'select', 'submit', 'unload', {\n    name: 'oninput',\n    eventType: 'input propertychange'\n  }\n]\n\nexport default _.assign(_.convert(events, (opt) => {\n  let name = _.isObject(opt) ? opt.name : opt\n  return _.hump(name + 'Directive')\n}, (opt) => {\n  if (!_.isObject(opt))\n    opt = {\n      eventType: opt\n    }\n  let name = opt.name || `on${opt.eventType}`\n  opt.extend = EventDirective\n  return Directive.register(name, opt)\n}), {\n  EventDirective\n})\n","import {\n  Directive\n} from '../binding'\nimport expression from '../expression'\nimport _ from '../util'\nimport dom from '../dom'\nimport log from '../log'\n\nconst expressionArgs = ['$el']\n\nconst SimpleDirective = _.dynamicClass({\n  extend: Directive,\n  constructor() {\n    this.super(arguments)\n    this.observeHandler = this.observeHandler.bind(this)\n    this.expression = expression(this.expr, expressionArgs)\n  },\n  realValue() {\n    return this.expression.execute.call(this, this.scope(), this.el)\n  },\n  value() {\n    return this.expression.executeAll.call(this, this.scope(), this.el)\n  },\n  listen() {\n    _.each(this.expression.identities, (ident) => {\n      this.observe(ident, this.observeHandler)\n    })\n    this.update(this.value())\n  },\n  bind() {\n    this.listen()\n  },\n  unlisten() {\n    _.each(this.expression.identities, (ident) => {\n      this.unobserve(ident, this.observeHandler)\n    })\n  },\n  unbind() {\n    this.unlisten()\n  },\n  blankValue(val) {\n    if (arguments.length == 0) val = this.value()\n    return _.isNil(val) ? '' : val\n  },\n  observeHandler(expr, val) {\n    if (this.expression.simplePath) {\n      this.update(this.expression.applyFilter(val, this, [this.scope(), this.el]))\n    } else {\n      this.update(this.value())\n    }\n  },\n  update(val) {\n    throw `abstract method`\n  }\n})\n\nconst EVENT_CHANGE = 'change',\n  EVENT_INPUT = 'input',\n  EVENT_CLICK = 'click',\n  TAG_SELECT = 'SELECT',\n  TAG_INPUT = 'INPUT',\n  TAG_TEXTAREA = 'TEXTAREA',\n  RADIO = 'radio',\n  CHECKBOX = 'checkbox',\n  directives = {\n    text: {\n      block: true,\n      update(val) {\n        dom.text(this.el, this.blankValue(val))\n      }\n    },\n    html: {\n      block: true,\n      update(val) {\n        dom.html(this.el, this.blankValue(val))\n      }\n    },\n    'class': {\n      update(value) {\n        if (value && typeof value == 'string') {\n          this.handleArray(_.trim(value).split(/\\s+/))\n        } else if (value instanceof Array) {\n          this.handleArray(value)\n        } else if (value && typeof value == 'object') {\n          this.handleObject(value)\n        } else {\n          this.cleanup()\n        }\n      },\n      handleObject(value) {\n        this.cleanup(value, false)\n        let keys = this.prevKeys = [],\n          el = this.el\n        for (let key in value) {\n          if (value[key]) {\n            dom.addClass(el, key)\n            keys.push(key)\n          } else {\n            dom.removeClass(el, key)\n          }\n        }\n      },\n      handleArray(value) {\n        this.cleanup(value, true)\n        let keys = this.prevKeys = [],\n          el = this.el\n        _.each(value, (val) => {\n          if (val) {\n            keys.push(val)\n            dom.addClass(el, val)\n          }\n        })\n      },\n      cleanup(value, isArr) {\n        let prevKeys = this.prevKeys\n        if (prevKeys) {\n          let i = prevKeys.length,\n            el = this.el\n          while (i--) {\n            let key = prevKeys[i]\n            if (!value || (isArr ? _.indexOf(value, key) == -1 : !_.hasOwnProp(value, key))) {\n              dom.removeClass(el, key)\n            }\n          }\n        }\n      }\n    },\n    'style': {\n      update(value) {\n        if (value && _.isString(value)) {\n          dom.style(this.el, value)\n        } else if (value && _.isObject(value)) {\n          this.handleObject(value)\n        }\n      },\n      handleObject(value) {\n        this.cleanup(value)\n        let keys = this.prevKeys = [],\n          el = this.el\n        _.each(value, (val, key) => {\n          dom.css(el, key, val)\n        })\n      }\n    },\n    show: {\n      update(val) {\n        dom.css(this.el, 'display', val ? '' : 'none')\n      }\n    },\n    hide: {\n      update(val) {\n        dom.css(this.el, 'display', val ? 'none' : '')\n      }\n    },\n    value: {\n      update(val) {\n        dom.val(this.el, this.blankValue(val))\n      }\n    },\n    'if': {\n      priority: 9,\n      bind() {\n        this.yieId = new _.YieId()\n        this.listen()\n        return this.yieId\n      },\n      unbind() {\n        this.unlisten()\n        this.unbindChildren()\n      },\n      update(val) {\n        if (!val) {\n          dom.css(this.el, 'display', 'none')\n        } else {\n          this.bindChildren()\n          if (this.yieId) {\n            this.yieId.done()\n            this.yieId = undefined\n          }\n          dom.css(this.el, 'display', '')\n        }\n      }\n    },\n    checked: {\n      update(val) {\n        _.isArray(val) ? dom.checked(this.el, _.indexOf(val, dom.val(this.el))) : dom.checked(this.el, !!val)\n      }\n    },\n    selected: {\n      update(val) {}\n    },\n    focus: {\n      update(val) {\n        if (val) dom.focus(this.el)\n      }\n    },\n    input: {\n      priority: 4,\n      constructor() {\n        this.super(arguments)\n        if (!this.expression.simplePath)\n          throw TypeError(`Invalid Expression[${this.expression.expr}] on InputDirective`)\n\n        this.onChange = this.onChange.bind(this)\n        let tag = this.tag = this.el.tagName\n        switch (tag) {\n          case TAG_SELECT:\n            this.event = EVENT_CHANGE\n            break\n          case TAG_INPUT:\n            let type = this.type = this.el.type\n            this.event = (type == RADIO || type == CHECKBOX) ? EVENT_CHANGE : EVENT_INPUT\n            break\n          case TAG_TEXTAREA:\n            throw TypeError('Directive[input] not support ' + tag)\n            break\n          default:\n            throw TypeError('Directive[input] not support ' + tag)\n        }\n      },\n\n      bind() {\n        this.super()\n        dom.on(this.el, this.event, this.onChange)\n      },\n\n      unbind() {\n        this.super()\n        dom.off(this.el, this.event, this.onChange)\n      },\n\n      setRealValue(val) {\n        this.set(this.expression.path, val)\n      },\n\n      setValue(val) {\n        this.setRealValue(this.expression.applyFilter(val, this, [this.scope(), this.el], false))\n      },\n\n      onChange(e) {\n        let val = this.elVal(),\n          idx,\n          _val = this.val\n        if (val != _val)\n          this.setValue(val)\n        e.stopPropagation()\n      },\n\n      update(val) {\n        let _val = this.blankValue(val)\n        if (_val != this.val)\n          this.elVal((this.val = _val))\n      },\n\n      elVal(val) {\n        let tag = this.tag\n\n        switch (tag) {\n          case TAG_SELECT:\n            break\n          case TAG_INPUT:\n            let type = this.type\n\n            if (type == RADIO || type == CHECKBOX) {\n              if (arguments.length == 0) {\n                return dom.checked(this.el) ? dom.val(this.el) : undefined\n              } else {\n                let checked\n\n                checked = val == dom.val(this.el)\n                if (dom.checked(this.el) != checked)\n                  dom.checked(this.el, checked)\n              }\n            } else {\n              if (arguments.length == 0) {\n                return dom.val(this.el)\n              } else if (val != dom.val(this.el)) {\n                dom.val(this.el, val)\n              }\n            }\n            break\n          case TAG_TEXTAREA:\n            throw TypeError('Directive[input] not support ' + tag)\n            break\n          default:\n            throw TypeError('Directive[input] not support ' + tag)\n        }\n      }\n    }\n  }\n\nexport default _.assign(_.convert(directives, (opt, name) => {\n  console.log('name', name)\n  return _.hump(name + 'Directive')\n}, (opt, name) => {\n  console.log('name2', name)\n  opt.extend = SimpleDirective\n  return Directive.register(name, opt)\n}), {\n  SimpleDirective\n})\n","import EachDirective from './each'\nimport event from './event'\nimport simple from './simple'\nimport _ from '../util'\n\nexport default _.assign({\n  EachDirective\n}, event, simple)\n","import observer from 'observer'\nimport Template from './Template'\nimport TemplateParser from './TemplateParser'\nimport TextParser from './TextParser'\nimport expression from './expression'\nimport filter from './filter'\nimport {\n  Directive\n} from './binding'\nimport directives from './directives'\nimport config from './config'\nimport _ from './util'\nimport dom from './dom'\n\nexport default _.assign(Template, _, dom, {\n  filter,\n  expression,\n  Directive,\n  directives,\n  TextParser,\n  config,\n  TemplateParser,\n  init(cfg) {\n    observer.init(cfg)\n    config.config(cfg)\n  }\n})\n"],"names":["_hump","k","toUpperCase","assign","target","source","alias","each","v","firstEl","el","_","isArrayLike","lastEl","length","apply","coll","callback","_prop","name","set","val","prop","dom","camelize","indexOf","replace","match","charAt","cssName","host","camelCase","cssFix","root","style","i","n","prefixes","offsetParent","css","offset","box","tagName","ownerDocument","doc","body","documentElement","win","defaultView","parentWindow","inDoc","getBoundingClientRect","clientTop","clientLeft","scrollTop","Math","max","pageYOffset","scrollLeft","pageXOffset","top","left","getWindow","node","window","document","nodeType","stringValue","isNil","NaN","isString","addListen","type","handler","once","isFunc","TypeError","listens","listenKey","handlers","push","removeListen","undefined","_i","l","splice","getListens","slice","hasListen","bandEvent","cb","hook","eventHooks","bind","dispatch","focusBlur","unbandEvent","unbind","delegateEvent","delegateEvents","undelegateEvent","dispatchElement","event","isMove","currentTarget","_i2","isImmediatePropagationStopped","now","Date","last","call","off","dispatchEvent","disabled","test","canBubbleUp","getAttribute","cancelBubble","parentNode","Event","eventHookTypes","fix","fireReady","fn","readyList","shift","data","args","f","filters","unapply","concat","warn","translationProcessor","str","translations","newlineReg","translationRestoreProcessor","identityProcessor","raw","idx","suffix","exp","propReg","defaultKeywords","currentKeywords","prevPropScope","complileExpr","identityReg","translationRestoreReg","compileFilterArgs","argExprs","keywords","makeExecuter","compileFilter","filterExprs","filterExpr","trim","split","compileExecuter","ret","isSimple","isSimplePath","reverseConvert","translationReg","wsReg","parseExpr","simplePath","identities","keys","currentIdentities","applyFilter","argScope","fs","_args","rs","parseFilterArgs","filter","stop","replaceData","executeAll","execute","this","arguments","executors","scope","map","executor","Function","e","Error","pathTestReg","booleanLiteralReg","expression","res","cache","parseEl","templ","clone","createElement","html","childNodes","query","cloneNode","getConfig","cfg","config","get","regHump","observer","dynamicClass","doned","thens","textContent","contains","selectors","all","querySelectorAll","querySelector","deep","nextSibling","nextElementSibling","previousSibling","previousElementSibling","children","parent","removeChild","insertBefore","lastChild","next","appendChild","firstChild","before","append","replaceChild","innerHTML","outerHTML","container","text","focus","selector","head","styleTag","__qsaels","styleSheet","cssText","textnode","createTextNode","scrollBy","elements","rfocusable","rclickable","value","propFix","propHooks","setAttribute","removeAttribute","check","cls","classList","add","cur","remove","RegExp","elem","attributeNode","getAttributeNode","specified","parseInt","nodeName","href","cssHooks","cssDefaultHook","convert","num","isFinite","parseFloat","cssNumber","_offsetParent","_offset","parentOffset","scrollTo","W3C","cssDefaultGet","getComputedStyle","styles","getPropertyValue","opacity","rnumnonpx","rposition","ralpha","ie8","XDomainRequest","salpha","border","currentStyle","rsLeft","runtimeStyle","pixelLeft","alpha","op","enabled","zoom","position","boxSizing","offsetProp","which","method","toLowerCase","includeMargin","valHooks","attributes","signle","index","selectedIndex","options","option","values","selected","vl","isArray","nr","isBoolean","on","opts","hackEvent","createEvent","initEvent","createEventObject","fireEvent","mouseEventReg","keyEventReg","eventProps","eventFixHooks","keyEventFixHook","original","charCode","keyCode","mouseEventFixHook","eventDoc","button","pageX","clientX","pageY","clientY","fixHook","originalEvent","returnValue","defaultPrevented","getPreventDefault","timeStamp","props","srcElement","preventDefault","stopPropagation","stopImmediatePropagation","capture","addEventListener","attachEvent","removeEventListener","detachEvent","canBubbleUpArray","change","select","origType","fixType","t","relatedTarget","compareDocumentPosition","construct","animationend","navigator","userAgent","input","oldValue","actEl","activeElement","propertyName","$onchange","onmousewheel","fixWheelType","onwheel","fixWheelDelta","mousewheel","wheelDeltaY","wheelDelta","wheelDeltaX","isReady","readyState","doScroll","frameElement","external","doScrollCheck","ready","Configuration","Binding","_scope","obj","proxy","realScope","$parent","hasOwnProp","expr","propScope","observe","exprScope","unobserve","has","register","commentCfg","Logger","Array","prototype","debug","keyCodes","eventFilters","nomalFilters","indent","JSON","stringify","Number","parse","toString","currency","stringified","abs","toFixed","_int","_float","sign","digitsRE","expressionArgs","comment","createComment","observeHandler","ident","_this","update","_this2","attr","directives","Directive","template","templateIndex","binding","parser","createDirective","group","directive","priority","block","isExtendOf","isObject","extend","bindedCount","bindedChildren","YieId","then","TextParser","NormalTextParser","reg","tk","exec","lastIndex","TemplateParser","directiveReg","TEXT","Text","DIRECTIVE","DIRECTIVE_GROUP","DirectiveGroup","parseEls","bindings","els","parseElsNode","parsed","parseNode","_this3","parseElement","parseText","token","insertText2","substring","start","insertText","end","substr","pushEl","_directive","getDirective","isAbstract","isBlock","sort","a","b","getPriority","content","after","prepend","binded","destroy","directiveRegCfg","textParserCfg","templateId","templateCache","id","createDocumentFragment","TemplateInstance","eachReg","eachAliasReg","scopeExpr","indexExpr","aliasToken","valueAlias","keyAlias","removeAttr","begin","eachTemplateId","eachTemplate","Template","parentScope","init","oldSort","removed","added","item","initScope","createScope","$tpl","complie","oldScope","$index","$sort","scope2","pop","create","$eachContext","isCreate","EventDirective","path","eventType","bindChildren","unbindChildren","events","opt","hump","SimpleDirective","listen","unlisten","EVENT_CHANGE","EVENT_INPUT","TAG_SELECT","TAG_INPUT","TAG_TEXTAREA","RADIO","CHECKBOX","blankValue","handleArray","handleObject","cleanup","prevKeys","key","addClass","removeClass","isArr","yieId","done","checked","onChange","tag","setRealValue","elVal","_val","setValue","log","simple"],"mappings":"mNAIA,QAASA,GAAMC,SACD,KAARA,EAAE,IAAqB,KAARA,EAAE,KACnBA,EAAIA,EAAE,IACDA,EAAEC,cAGX,QAASC,GAAOC,EAAQC,EAAQC,YACrBC,KAAKF,EAAQ,SAACG,EAAGP,KACjBK,EAAML,IAAMA,GAAKO,IAEnBJ,ECVT,QAASK,GAAQC,SACRC,GAAEC,YAAYF,GAAMA,EAAG,GAAKA,EAGrC,QAASG,GAAOH,SACPC,GAAEC,YAAYF,GAAMA,EAAGA,EAAGI,OAAS,GAAKJ,EAGjD,QAASK,GAAMC,EAAMC,KACjBL,YAAYI,GAAQL,EAAEJ,KAAKS,EAAMC,GAAYA,EAASD,GCgE1D,QAASE,GAAMR,EAAIS,EAAMC,EAAKC,SACvBD,MACDE,KAAKZ,EAAIS,GACNI,GAFUA,EAAID,KAAKZ,EAAIS,GC6ChC,QAASK,GAASpB,UACXA,GAAUA,EAAOqB,QAAQ,KAAO,GAAKrB,EAAOqB,QAAQ,KAAO,EACvDrB,EAEFA,EAAOsB,QAAQ,aAAc,SAASC,SACpCA,GAAMC,OAAO,GAAG1B,gBAI3B,QAAS2B,GAAQV,EAAMW,EAAMC,MACvBC,EAAOb,GACT,MAAOa,GAAOb,KACTW,GAAQG,EAAKC,UACf,GAAIC,GAAI,EAAGC,EAAIC,EAASvB,OAAQqB,EAAIC,EAAGD,SAC9BX,EAASa,EAASF,GAAKhB,GAC/BY,IAAaD,SACPE,GAAOb,GAAQY,QAGpB,MA2HT,QAASO,GAAa5B,UAChB4B,GAAe5B,EAAG4B,aACfA,GAAkD,WAAlCC,EAAID,EAAc,eACxBA,EAAaA,mBAEvBA,IAAgBL,EAGzB,QAASO,GAAO9B,MACV+B,SACI,MACD,OAGF/B,IAAOA,EAAGgC,UAAYhC,EAAGiC,cAC5B,MAAOF,MAELG,GAAMlC,EAAGiC,cACXE,EAAOD,EAAIC,KACXZ,EAAOW,EAAIE,gBACXC,EAAMH,EAAII,aAAeJ,EAAIK,iBAE1B1B,EAAI2B,MAAMxC,EAAIuB,GACjB,MAAOQ,EAEL/B,GAAGyC,wBACLV,EAAM/B,EAAGyC,4BAEPC,GAAYnB,EAAKmB,WAAaP,EAAKO,UACrCC,EAAapB,EAAKoB,YAAcR,EAAKQ,WACrCC,EAAYC,KAAKC,IAAIT,EAAIU,aAAe,EAAGxB,EAAKqB,UAAWT,EAAKS,WAChEI,EAAaH,KAAKC,IAAIT,EAAIY,aAAe,EAAG1B,EAAKyB,WAAYb,EAAKa,uBAE7DjB,EAAImB,IAAMN,EAAYF,OACrBX,EAAIoB,KAAOH,EAAaL,GAIlC,QAASS,GAAUC,SACVA,GAAKC,QAAUD,EAAKE,SAAWF,EAAyB,IAAlBA,EAAKG,WAAiBH,EAAKf,aAAee,EAAKd,cC7S9F,QAASkB,GAAY9C,SACfV,GAAEyD,MAAM/C,IAAgBgD,MAARhD,EACX,GACJV,EAAE2D,SAASjD,GAETA,EADEA,EAAM,GCmIjB,QAASkD,GAAU7D,EAAI8D,EAAMC,EAASC,OAC/B/D,EAAEgE,OAAOF,GACZ,KAAMG,WAAU,4BAEdC,GAAUnE,EAAGoE,IACfC,eAEGF,KACHnE,EAAGoE,IAAaD,OAEZE,EAAWF,EAAQL,MACvBK,EAAQL,GAAQO,QAETC,cACEP,OACHC,IAEmB,IAApBK,EAASjE,OAGlB,QAASmE,GAAavE,EAAI8D,EAAMC,MAC1BI,GAAUnE,EAAGoE,IACfC,EAAWF,EAAUA,EAAQL,GAAQU,UAEnCH,MACG,GAAII,GAAI,EAAGC,EAAIL,EAASjE,OAAQqE,EAAIC,EAAGD,OACtCJ,EAASI,GAAGV,UAAYA,WACjBY,OAAOF,EAAG,GACN,IAANC,SAIN,EAGT,QAASE,GAAW5E,EAAI8D,MAClBK,GAAUnE,EAAGoE,IACfC,EAAWF,EAAUA,EAAQL,GAAQU,aAEhCH,GAAWA,EAASQ,QAAUL,OAGvC,QAASM,GAAU9E,EAAI8D,EAAMC,MACvBI,GAAUnE,EAAGoE,IACfC,EAAWF,EAAUA,EAAQL,GAAQU,eAEhCH,IAAWN,EAAU9D,EAAEc,QAAQsD,EAAUN,SAAmBM,EAASjE,QAoC9E,QAAS2E,GAAU/E,EAAI8D,EAAMkB,MACvBC,GAAOC,GAAWpB,EACjBmB,IAASA,EAAKE,MAAQF,EAAKE,KAAKnF,EAAI8D,EAAMkB,MAAQ,GACrDG,GAAKnF,EAAIiF,EAAOA,EAAKnB,MAAQA,EAAOA,EAAMsB,IAAYC,GAAUvB,IAGpE,QAASwB,GAAYtF,EAAI8D,EAAMkB,MACzBC,GAAOC,GAAWpB,EACjBmB,IAASA,EAAKM,QAAUN,EAAKM,OAAOvF,EAAI8D,EAAMkB,MAAQ,GACzDO,GAAOvF,EAAIiF,EAAOA,EAAKnB,MAAQA,EAAOA,EAAMsB,GAGhD,QAASI,GAAc1B,EAAMkB,GACtBS,GAAe3B,MAIHA,QAHLvC,GAAMuC,EAAMkB,MACPlB,GAAQ,GAM3B,QAAS4B,GAAgB5B,EAAMkB,GACzBS,GAAe3B,QACFA,KACV2B,GAAe3B,IAClBwB,EAAY/D,GAAMuC,EAAMkB,IAM9B,QAASW,GAAgB3F,EAAI4F,EAAOC,MAC9BxB,GAAWO,EAAW5E,EAAI4F,EAAM9B,SAEhCO,EAAU,GACNyB,cAAgB9F,KAClB+D,UAASgC,SAAGrB,aACXqB,EAAI,EAAGrB,EAAIL,EAASjE,OAAQ2F,EAAIrB,IAAMkB,EAAMI,8BAA+BD,IAAK,MACzE1B,EAAS0B,GACfF,EAAQ,IACNI,GAAM,GAAIC,KACVD,GAAME,GAAO,OACPpC,QAAQqC,KAAKpG,EAAI4F,MAClBK,OAGTlC,GAAQA,QAAQqC,KAAKpG,EAAI4F,EAEvB7B,GAAQC,MACVnD,EAAIwF,IAAIrG,EAAI4F,EAAM9B,KAAMC,EAAQA,WAKxC,QAASuC,GAActG,EAAI8D,EAAM8B,MAC3B5F,EAAGuG,YAAa,GAAiB,UAATzC,EAAkB,IACxC+B,GAAS,cAAcW,KAAK1C,MAC5B2C,GAAY3C,QACP9D,GAAMA,EAAG0G,eAAiBd,EAAMe,gBACrB3G,EAAI4F,EAAOC,KACtB7F,EAAG4G,eAGVjB,GAAgB3F,EAAI4F,EAAOC,IAIjC,QAAST,GAASQ,KACR,GAAIiB,IAAMjB,MACd9B,GAAO8B,EAAM9B,KACf9D,EAAK4F,EAAMlG,UACToH,GAAehD,GAAO,GACjBgD,GAAehD,MAClBmB,GAAOC,GAAWpB,MAClBmB,GAAQA,EAAK8B,KAAO9B,EAAK8B,IAAI/G,EAAI4F,MAAW,EAC9C,SACI9B,KAAOA,IACC9D,EAAI8D,EAAM8B,UAEV5F,EAAI8D,EAAM8B,GCrS5B,QAASoB,GAAUC,WACP,EACHA,EAAKC,GAAUC,aCFxB,QAAS9G,GAAMI,EAAM2G,EAAMC,EAAMhH,MAC3BiH,GAAIC,GAAQ9G,GACdqD,EAAOwD,EAAIA,EAAExD,KAAOU,OACpByC,kBAEGK,EAAIjH,KAAU,EAAQiH,EAAEjH,MAAQiH,EAAEE,QAAUhD,OAC5CyC,GAGChH,EAAEgE,OAAOoD,KAAOA,EAAOA,OACpBJ,EAAG5G,MAAMiH,GAAIF,GAAMK,OAAOJ,QAH7BK,eAAejH,QAASJ,KAAU,EAAQ,QAAU,kCAM1C,SAARyD,GAAmBsD,KAAS,OAC5BA,cACgB,UAATtD,GCNjB,QAAS6D,GAAqBC,EAAKhE,MAC7BnC,GAAIoG,GAAazH,iBACRqB,GAAKmC,EAAWgE,EAAI5G,QAAQ8G,GAAY,OAASF,MACnDnG,MAGb,QAASsG,GAA4BH,EAAKnG,SACjCoG,IAAapG,GAKtB,QAASuG,GAAkBC,EAAKC,EAAKN,MAC/BlD,GAAIuD,EAAI7H,OACV+H,EAASF,EAAI/G,OAAOwD,EAAI,GACxB0D,EAAMH,EAAIpD,MAAM,EAAGH,EAAI,GACvB9D,EAAOwH,EAAInH,MAAMoH,IAAS,SAExBC,IAAgB1H,IAAS2H,GAAgB3H,GACpCqH,EACI,aAATrH,EACKqH,EAAIjH,QAAQqH,GAASG,IAChB,KAAVL,KACQD,EAAMxD,GAAKkD,EAAIxH,QAAiC,KAAvBwH,EAAI1G,OAAOgH,EAAMxD,GAAa,GAAK,0BACnC9D,iBAClBwH,WAAYI,GAAgBL,OAE7BC,IAAO,YACRA,EAAMD,GAGzB,QAASM,GAAatG,aACJqC,QACRrC,EAAO,KAAKnB,QAAQ0H,GAAaV,GACtChH,QAAQ2H,GAAuBZ,GAGpC,QAASa,GAAkBC,EAAUC,OAC9B,GAAIrH,GAAI,EAAGiD,EAAImE,EAASzI,OAAQqB,EAAIiD,EAAGjD,MACjCA,GAAKsH,EAAaN,EAAaI,EAASpH,IAAKqH,SAEjDD,GAGT,QAASG,GAAcC,EAAaH,OAC7BG,IAAgBA,EAAY7I,OAC/B,aAKG,GAHDmH,MACF2B,SAAkBL,SAEXpH,EAAI,EAAGiD,EAAIuE,EAAY7I,OAAQqB,EAAIiD,EAAGjD,KACxCyH,EAAajJ,EAAEkJ,KAAKF,EAAYxH,SACxByH,EAAWlI,QAAQ,SAAU,KAAKoI,MAAM,OAC3C9E,WACAuE,EAAS1B,QAAQnG,QAAQ2H,GAAuBZ,QAChDa,EAAkBC,EAAUC,YAIjCvB,GAGT,QAAS8B,GAAgBjB,EAAKU,MACxBG,UAAaK,SACfC,EAAWC,EAAapB,mBAGRU,EAAW7I,EAAEwJ,eAAeX,EAAU,kBAAM,OAEzDS,MACWnB,EAAIpH,QAAQ0I,GAAgB/B,GAAsByB,MAAM,OAChEH,EAAY9B,QAAQnG,QAAQ2I,GAAO,MAC9BH,EAAapB,IAEtBmB,KACInB,EAAIpH,QAAQ2H,GAAuBZ,MACvBK,IAAO,aAEdW,YAAuBX,EAAOU,QACjC7I,EAAE2J,UAAUxB,QACZA,eAIGW,EAAaN,EAAaL,GAAMU,QACnCV,KAGNb,QAAUyB,EAAcC,EAAaH,KACrCe,WAAaN,IACbO,WAAa7J,EAAE8J,KAAKC,OAENxF,UACEA,UACPpE,OAAS,IAClB6J,YAAc,SAAS7C,EAAM8C,EAAU7C,EAAMhH,OAI1C,GAHD8J,GAAKb,EAAI/B,QACXD,SAAG8C,SAAOC,SAEH5I,EAAI,EAAGiD,EAAIyF,EAAG/J,OAAQqB,EAAIiD,EAAGjD,IAAK,MACrC0I,EAAG1I,KACC6I,EAAgBhD,EAAED,KAAM6C,EAAU7C,MACpChH,KAAU,EAAQkK,GAAOlK,MAAQkK,GAAO/C,SAASF,EAAE7G,KAAM2G,EAAMgD,GACjEC,EAAGG,WACEH,GAAGjD,IACDiD,GAAGI,cACZrD,EAAOiD,EAAGjD,YAEPA,MAELsD,WAAa,cACX/J,GAAM2I,EAAIqB,QAAQtK,MAAMuK,KAAMC,oBAC5BvB,EAAIW,YAAYtJ,EAAKiK,KAAMC,YAG5BvB,EAGT,QAASgB,GAAgBQ,EAAWC,EAAO1D,SAClCpH,GAAE+K,IAAIF,EAAW,SAACG,SAChBA,GAAS5K,MAAM0K,EAAO1D,KAIjC,QAAS0B,GAAa5G,EAAMkF,MACtB+C,IAAS,YAEN/C,EAAO+C,EAAM3C,OAAOJ,GAAQ+C,IAC9B9F,eAAenC,iBAEX+I,UAAS7K,MAAM6K,SAAU7D,GAChC,MAAO8D,QACDC,uDAAsDjJ,IAIhE,QAASqH,GAAapB,SACbiD,IAAY7E,KAAK4B,KACrBkD,GAAkB9E,KAAK4B,GAK5B,QAAwBmD,GAAWnD,EAAKf,MAClCmE,mBAEEvL,EAAEkJ,KAAKf,IACPoD,EAAMC,GAAMrD,MAChBqD,GAAMrD,GAAOoD,EAAMnC,EAAgBjB,EAAKf,IACnCmE,ECpJT,QAASE,GAAQC,EAAOC,MAClB3L,EAAE2D,SAAS+H,GAAQ,MACb1L,EAAEkJ,KAAKwC,GACQ,KAAnBA,EAAMzK,OAAO,GAAW,IACtBlB,GAAKuD,SAASsI,cAAc,gBAC5BC,KAAK9L,EAAI2L,GACN3L,EAAG+L,aAEJlL,EAAImL,MAAML,SAEbC,GAAQ/K,EAAIoL,UAAUN,GAASA,EAGxC,QAASO,GAAUC,EAAK1L,SACf0L,GAAI1L,IAAS2L,GAAOC,IAAI5L,GCdjC,QAASiL,GAAQC,EAAOC,MAClB3L,EAAE2D,SAAS+H,GAAQ,MACb1L,EAAEkJ,KAAKwC,GACQ,KAAnBA,EAAMzK,OAAO,GAAW,IACtBlB,GAAKuD,SAASsI,cAAc,gBAC5BC,KAAK9L,EAAI2L,GACN3L,EAAG+L,aAEJlL,EAAImL,MAAML,SAEbC,GAAQ/K,EAAIoL,UAAUN,GAASA,EAGxC,QAASO,GAAUC,EAAK1L,SACf0L,GAAI1L,IAAS2L,GAAOC,IAAI5L,iCV7BjC,IAAM6L,GAAU,6BAeD7M,iBACRmI,SACIA,GAAI5G,QAAQsL,EAAShN,UAEvBiN,EAASC,0CAEPC,OAAQ,OACRC,wBAEFnM,GACCqK,KAAK6B,MACPlM,IAEAqK,KAAK8B,MAAMpI,KAAK/D,wBAGbqK,KAAK6B,MAAO,KAEV,GADDC,GAAQ9B,KAAK8B,MACRjL,EAAI,EAAGiD,EAAIgI,EAAMtM,OAAQqB,EAAIiD,EAAGjD,MACjCA,UAEHgL,OAAQ,4BAIR7B,MAAK6B,UAGfF,MACG,aACA,sBACO,eC9CPI,EAAkE,gBAA7CpJ,UAASsI,cAAc,OAAOc,YAA0B,cAAgB,YAc/F9L,SACKyC,OAAOgD,6BACRtG,EAAIuB,QACDA,GAAQgC,SAASnB,gBACpBb,EAAKqL,SACP,MAAOrL,GAAKqL,SAAS5M,YAEbA,EAAKA,EAAG4G,eACV5G,IAAOuB,EACT,OAAO,EAEX,MAAO4J,WACF,kBAEH0B,EAAWC,SACX7M,GAAE2D,SAASiJ,GACNC,EAAMvJ,SAASwJ,iBAAiBF,GAAatJ,SAASyJ,cAAcH,GACtEA,sBAEC7M,EAAIiN,WACHrB,GAAM5L,SACNA,GAAGiM,UAAUgB,KAAS,SAExBhN,GAAEC,YAAYF,GAAMC,EAAE+K,IAAIhL,EAAI4L,GAASA,EAAM5L,oBAE/CA,SACED,GAAQC,GAAI4G,0BAEhB5G,EAAI8M,YACF3M,EAAOH,GACL8M,EAAM9M,EAAGkN,YAAclN,EAAGmN,kCAE9BnN,EAAI8M,YACF/M,EAAQC,GACN8M,EAAM9M,EAAGoN,gBAAkBpN,EAAGqN,0CAE9BrN,EAAI8M,YACN/M,EAAQC,GACN8M,EAAM9M,EAAG+L,WAAa/L,EAAGsN,0BAE3BtN,YACCA,EAAI,SAACA,MACLuN,GAASvN,EAAG4G,UACZ2G,IACFA,EAAOC,YAAYxN,KAEhBa,mBAEFb,EAAIN,KACAK,EAAQL,MACb6N,GAAS7N,EAAOkH,oBACd5G,EAAI,SAACA,KACFyN,aAAazN,EAAIN,KAEnBmB,kBAEHb,EAAIN,KACCS,EAAOT,MACZ6N,GAAS7N,EAAOkH,oBAEd5G,EAAIuN,EAAOG,YAAchO,EAAS,SAACM,KAChCyN,aAAazN,EAAIN,IACrB,cACCiO,GAAOjO,EAAOwN,kBACX,UAAClN,KACCyN,aAAazN,EAAI2N,QAGrB9M,mBAEFnB,EAAQM,YACJD,EAAQL,KACXM,EAAI,SAACA,KACF4N,YAAY5N,KAEda,oBAEDnB,EAAQM,YACP6N,WAAahN,EAAIiN,OAAO9N,EAAIA,EAAG6N,YAAchN,EAAIkN,OAAOrO,EAAQM,GAChEa,oBAEDlB,EAAQD,MACV6N,GAAS5N,EAAOiH,aACboH,aAAatO,EAAQC,kBAEzBK,EAAI8L,SACAjB,WAAUzK,OAAS,EAAKJ,EAAGiO,UAAYnC,EAAQ9L,EAAGiO,8BAEjDjO,MACJA,EAAGkO,UACL,MAAOlO,GAAGkO,aAERC,GAAY5K,SAASsI,cAAc,gBAC7B+B,YAAY5N,EAAGiM,WAAU,IAC5BkC,EAAUF,yBAEdjO,EAAIoO,SACY,IAAfpO,EAAGwD,SACEqH,UAAUzK,OAAS,EAAKJ,EAAGoH,KAAOgH,EAAQpO,EAAGoH,KAC/CyD,UAAUzK,OAAS,EAAKJ,EAAG2M,GAAeyB,EAAQpO,EAAG2M,mBAExD3M,YACDqO,QACIxN,GAON0C,UAASwJ,4BACHA,iBAAmB,SAA0BuB,MAChDpM,GAAMqB,SACRgL,EAAOrM,EAAIE,gBAAgByL,WAC3BW,EAAWtM,EAAI2J,cAAc,cAE1B+B,YAAYY,KACbC,YACAD,EAASE,aACFA,WAAWC,QAAUL,EAAW,mDACpC,IACDM,GAAWrL,SAASsL,eAAeP,EAAW,kDACzCV,YAAYgB,iBAEhBE,SAAS,EAAG,GACZ5M,EAAIuM,WAGVlL,SAASyJ,yBACHA,cAAgB,SAAuBH,MAC1CkC,GAAWxL,SAASwJ,iBAAiBF,SAClCkC,GAAS3O,OAAS2O,EAAS,GAAK,MChJrC,IAAAC,GAAa,6CACjBC,EAAa,eAEfhP,GAAiBR,OAAOoB,iBACjBb,EAAIS,EAAMyO,KACNrO,EAAIsO,QAAQ1O,IAASA,KACxBwE,GAAOpE,EAAIuO,UAAU3O,SAED,IAApBoK,UAAUzK,OACL6E,GAAQA,EAAKoH,IAAMpH,EAAKoH,IAAIrM,EAAIS,GAAQT,EAAGS,OAC5CwE,EAAKvE,IAAMuE,EAAKvE,IAAIV,EAAIS,EAAMyO,GAAUlP,EAAGS,GAAQyO,EACpDrO,kBAEJb,EAAIS,EAAME,SACW,IAApBkK,UAAUzK,OACLJ,EAAG0G,aAAajG,MACtB4O,aAAa5O,EAAME,GACfE,wBAEEb,EAAIS,YACV6O,gBAAgB7O,GACZI,oBAEDb,EAAIuP,SACH/O,GAAMR,EAAI,UAAW6K,UAAUzK,OAAS,EAAGmP,qBAE9CvP,EAAIwP,SACDhP,GAAMR,EAAI,QAAS6K,UAAUzK,OAAS,EAAGoP,sBAEzCxP,EAAIwP,MACPxP,EAAGyP,YACFA,UAAUC,IAAIF,OACZ,IACDG,OAAU9O,EAAID,KAAKZ,EAAI,YACvB2P,GAAI5O,YAAYyO,aAClB3O,WAAUb,EAAIC,EAAEkJ,KAAKwG,EAAMH,UAExB3O,yBAEGb,EAAIwP,YACXC,UAAYzP,EAAGyP,UAAUG,OAAOJ,GACjC3O,WAAUb,EAAIC,EAAEkJ,UAAStI,EAAID,KAAKZ,EAAI,cAAYgB,QAAQ,GAAI6O,YAAWL,MAAQ,KAAM,MAClF3O,kBAEHb,EAAIwB,SACDhB,GAAMR,EAAI,QAAS6K,UAAUzK,OAAS,EAAGoB,6BAIzC,SAASsO,MACRC,GAAgBD,EAAKE,iBAAiB,kBAEnCD,IAAiBA,EAAcE,UAAYC,SAASH,EAAcb,MAAO,IAC9EF,EAAWxI,KAAKsJ,EAAKK,WAAalB,EAAWzI,KAAKsJ,EAAKK,WAAaL,EAAKM,KACzE,EAAI5L,4BAKA,oBACA,iBACH,kBACE,sBACE,wBACE,0BACA,sBACJ,kBACA,iBACD,qBACK,8BACI,qBCtENvE,EAAER,OAAOoB,gBAClBb,EAAIS,EAAMyO,MACRtO,GAAO,OAAO4F,KAAK/F,GAAQK,EAASL,GAAQA,EAC9CwE,cAEK9D,EAAQP,IAASA,IACjByP,EAASzP,IAAS0P,EACD,GAApBzF,UAAUzK,OAAa,IACrBmQ,GAAUrB,EACZsB,eAEW,eAAT/P,IACFA,EAAO,qBACDwE,EAAKoH,IAAIrM,EAAIS,GACd8P,KAAY,GAASE,SAAUD,EAAME,WAAWxB,IAAWsB,EAAMtB,QAC9DA,IAAmB,IAAVA,GAGfuB,SAASvB,KAAWyB,EAAU/P,KAChCsO,GAAS,QACNxO,IAAIV,EAAIS,EAAMyO,MAJhB1N,MAAMf,GAAQ,GAMZI,YAEC,SAASb,MACb4Q,UAAeC,SACjBC,OACO,OACC,SAEsB,UAA5BjQ,EAAIgB,IAAI7B,EAAI,cACJA,EAAGyC,2BAEGb,EAAa5B,KACnB8B,EAAO9B,GACa,SAA1B4Q,EAAc5O,UAChB8O,EAAehP,EAAO8O,MACX1N,KAAOrC,EAAIgB,IAAI+O,EAAe,kBAAkB,KAChDzN,MAAQtC,EAAIgB,IAAI+O,EAAe,mBAAmB,KAElD1N,KAAOrC,EAAI+B,UAAUgO,KACrBzN,MAAQtC,EAAImC,WAAW4N,SAG/BC,EAAQ3N,IAAM4N,EAAa5N,IAAMrC,EAAIgB,IAAI7B,EAAI,aAAa,QACzD6Q,EAAQ1N,KAAO2N,EAAa3N,KAAOtC,EAAIgB,IAAI7B,EAAI,cAAc,wBAG7DA,EAAIW,MACR0B,GAAMe,EAAUpD,SACI,IAApB6K,UAAUzK,QACJiC,EAAM,aAAeA,GAAMA,EAAIO,UAAYrB,EAAKwB,YAAc/C,EAAG+C,cAAgB,GAChFV,IACL0O,SAASlQ,EAAImC,WAAWhD,GAAKW,KAE9BoC,YAAcpC,EAEZE,wBAGEb,EAAIW,MACT0B,GAAMe,EAAUpD,SACI,IAApB6K,UAAUzK,QACJiC,EAAM,cAAgBA,GAAMA,EAAIW,WAAazB,EAAK0B,YAAcjD,EAAGiD,cAAgB,GAClFZ,IACL0O,SAASpQ,EAAKE,EAAI+B,UAAU5C,MAE7BiD,YAActC,EAEZE,oBAGFb,EAAImD,EAAMD,MACXb,GAAMe,EAAUpD,SACI,IAApB6K,UAAUzK,aAEJS,EAAImC,WAAWhD,OAChBa,EAAI+B,UAAU5C,KAEZqC,IACL0O,SAAS5N,EAAMD,MAEhBD,YAAcE,IACdJ,YAAcG,GAEZrC,KAIX,IAAIS,GAAST,EAAIS,gBACJT,EAAImQ,IAAM,WAAa,cAElCX,EAAWxP,EAAIwP,YACfC,KACA3O,GAAY,GAAI,WAAY,MAAO,QAAS,QAC5CgP,4BAC2B,eACZ,SACN,QACD,YACI,cACE,eACC,cACD,cACA,WACH,WACA,UACD,UACA,QACF,GAQRpP,EAAOgC,SAASnB,gBAChBP,EAAMhB,EAAIgB,GAuBZyO,GAAe5P,IAAM,SAAuBV,EAAIS,EAAMyO,SAE/C1N,MAAMf,GAAQyO,EACjB,MAAO/D,KAGX,IAAI8F,UACA3N,QAAO4N,qBACOZ,EAAejE,IAAM,SAAuBrM,EAAIS,MAC1DE,UACFwQ,EAASD,iBAAiBlR,EAAI,YAE5BmR,OACa,WAAT1Q,EAAoB0Q,EAAOC,iBAAiB3Q,GAAQ0Q,EAAO1Q,GACrD,KAARE,IACFA,EAAMX,EAAGwB,MAAMf,KAEZE,KAEA0Q,sBACHrR,EAAIS,MACFE,GAAMsQ,GAAcjR,EAAIS,SACb,KAARE,EAAa,IAAM2I,sBAI1BgI,GAAY,mCACdC,EAAY,4BACZC,EAAS,kBACTC,IAAQnO,OAAOoO,eACfC,EAAS,mCACTC,QACQH,EAAM,MAAQ,aACZA,EAAM,MAAQ,YACfA,EAAM,MAAQ,UAGTnB,EAAejE,IAAM,SAAuBrM,EAAIS,MAC1DoR,GAAe7R,EAAG6R,aACpBlR,EAAMkR,EAAapR,MAEhB6Q,EAAU9K,KAAK7F,KAAS4Q,EAAU/K,KAAK7F,GAAO,IAC7Ca,GAAQxB,EAAGwB,MACb2B,EAAO3B,EAAM2B,KACb2O,EAAS9R,EAAG+R,aAAa5O,OAExB4O,aAAa5O,KAAO0O,EAAa1O,OAC9BA,KAAgB,aAAT1C,EAAsB,MAASE,GAAO,IAC7Ca,EAAMwQ,UAAY,OAClB7O,KAAOA,IACV4O,aAAa5O,KAAO2O,QAEb,WAARnR,MACKF,EAAKO,QAAQ,QAAS,SACF,SAAvB6Q,EAAapR,KACfE,EAAM,QAEK,KAARA,EAAa,OAASiR,EAAOjR,IAAQA,KAErC0Q,sBACHrR,EAAIS,MACFwR,GAAQjS,EAAGuH,QAAQ0K,OAASjS,EAAGuH,QAAQoK,GACzCO,EAAKD,GAASA,EAAME,QAAUF,EAAMZ,QAAU,UAExCa,GAAK,IAAO,iBAElBlS,EAAIS,EAAMyO,MACR1N,GAAQxB,EAAGwB,MACb6P,EAAUZ,SAASvB,IAAUA,GAAS,mBAA6B,IAARA,MAAiB,GAC5E3E,EAAS/I,EAAM+I,QAAU,KAErB6H,KAAO,IACP7H,QAAUiH,EAAOhL,KAAK+D,GAC1BA,EAAOvJ,QAAQwQ,EAAQH,GAAW9G,EAAS,IAAM8G,GAASlI,OACvD3H,EAAM+I,QACT/I,EAAM8N,gBAAgB,eAK9BrP,EAAEJ,MAAM,MAAO,QAAS,SAASY,KACtBA,iBACHT,EAAIS,MACFE,GAAMsQ,GAAcjR,EAAIS,eACf+F,KAAK7F,GAAOA,EAAME,EAAIwR,SAASrS,GAAIS,GAAQ,SAK9DR,EAAEJ,MAAM,QAAS,UAAW,SAASY,WAO1B4L,GAAIrM,EAAIsS,MACX3R,mBAEEX,EAAGuS,GACS,IAAdD,EACK3R,EAAMkB,EAAI7B,EAAI,SAAWwS,EAAM,IAAI,GAAQ3Q,EAAI7B,EAAI,SAAWwS,EAAM,IAAI,IAC7EF,EAAY,MACR3R,EAAMkB,EAAI7B,EAAI,SAAWwS,EAAM,GAAK,SAAS,GAAQ3Q,EAAI7B,EAAI,SAAWwS,EAAM,GAAK,SAAS,IAChGF,WACI3R,EAAMkB,EAAI7B,EAAI,UAAYwS,EAAM,IAAI,GAAQ3Q,EAAI7B,EAAI,UAAYwS,EAAM,IAAI,IAC3E7R,MAhBL8R,GAAShS,EAAKiS,cAGhBH,EAAa,SAAW9R,EACxB+R,EAAgB,SAAR/R,GAAmB,OAAQ,UAAY,MAAO,YAepDgS,GAAU,SAASzS,SACdqM,GAAIrM,SAGT,QAAUS,GAAQ,SAAST,SACtBqM,GAAIrM,SAET,QAAUS,GAAQ,SAAST,EAAI2S,SAC1BtG,GAAIrM,EAAI2S,KAAkB,EAAO,EAAI,MC1PhD1S,EAAiBR,OAAOoB,gBAClBb,EAAIW,MACFsE,GAAOpE,EAAI+R,SAAS5S,EAAG8D,MAAQ9D,EAAGgC,QAAQ0Q,qBAEtB,IAApB7H,UAAUzK,OACL6E,GAAQA,EAAKoH,IAAMpH,EAAKoH,IAAIrM,GAAMA,EAAGkP,OAAS,IAEnDjK,GAAQA,EAAKvE,MACVA,IAAIV,EAAIW,KAEVuO,MAAQzL,EAAY9C,GAElBE,mCAIDb,MACEW,GAAMX,EAAG6S,WAAW3D,aAEhBvO,GAAOA,EAAIsP,UAAYjQ,EAAGkP,MAAQlP,EAAGoO,4BAK3CpO,MACE8S,GAAoB,cAAX9S,EAAG8D,KACdiP,EAAQ/S,EAAGgT,iBAETD,EAAQ,EACV,MAAOD,GAAStO,cAMb,GAJDyO,GAAUjT,EAAGiT,QACfC,SACAC,EAASL,EAAStO,UAEX/C,EAAI,EAAGiD,EAAIuO,EAAQ7S,OAAQqB,EAAIiD,EAAGjD,SAChCwR,EAAQxR,GACbyR,EAAOE,UAAY3R,GAAKsR,EAAO,IAC7BD,EAAQ,MAAOjS,GAAIF,IAAIuS,KACpB5O,KAAKzD,EAAIF,IAAIuS,UAGjBC,iBAGLnT,EAAIkP,MACF4D,GAAoB,cAAX9S,EAAG8D,KACdmP,EAAUjT,EAAGiT,QACbC,SAAQzR,SAAGiD,SAAG2O,SAAI1S,cAEjBqS,iBAEE/S,EAAEqT,QAAQpE,KACbA,EAAQjP,EAAEyD,MAAMwL,OAAeA,IAE5BmE,EAAKnE,EAAM9O,OAAS,CACnB0S,IAAQO,EAAKnE,EAAM9O,OAAS,MAE5B4K,GAAM/K,EAAEwJ,eAAeyF,EAAO,kBAAM,IACtCqE,EAAK,MAEF9R,EAAI,EAAGiD,EAAIuO,EAAQ7S,OAAQqB,EAAIiD,MACzBuO,EAAQxR,KACXZ,EAAIF,IAAIuS,IACVjT,EAAEuT,UAAUxI,EAAIrK,QACdA,GAAOuS,EAAOE,UAAW,IACvBG,IAAOF,IALsB5R,MAQ7BxB,EAAE8J,KAAKiB,EAAK,SAAClL,SAAMA,MAAM,UAG9BgT,GAAS5D,EAAM,GAAKA,2GChF7B3N,GAAOgC,SAASnB,mBAEPnC,EAAER,OAAOoB,sBACZb,EAAI8D,EAAMkB,SACXF,GAAU9E,EAAI8D,EAAMkB,gBAE1BhF,EAAI8D,EAAMkB,EAAIhB,SACXH,GAAU7D,EAAI8D,EAAMkB,EAAIhB,KAAS,KACnCyC,GAAY3C,GAAQ0B,EAAc1B,EAAMkB,GAAMD,EAAU/E,EAAI8D,EAAMkB,IAC7DnE,iBAEJb,EAAI8D,EAAMkB,SACNnE,GAAI4S,GAAGzT,EAAI8D,EAAMkB,GAAI,iBAE1BhF,EAAI8D,EAAMkB,SACRT,GAAavE,EAAI8D,EAAMkB,KACzByB,GAAY3C,GAAQ4B,EAAgB5B,EAAMkB,GAAMM,EAAYtF,EAAI8D,EAAMkB,IACjEnE,0BAEKb,EAAI8D,EAAM4P,MAClBC,gBACApQ,UAASqQ,eACCrQ,SAASqQ,YAAY,YACvBC,UAAU/P,GAAM,GAAM,EAAM4P,KACpCjU,OAAOkU,EAAWD,KACjBpN,cAAcqN,IACR9S,EAAI2B,MAAMxC,OACPuD,SAASuQ,sBACnBrU,OAAOkU,EAAWD,KACjBK,UAAU,KAAOjQ,EAAM6P,IAErBA,KAILK,GAAgB,oCACpBC,GAAc,OACdC,IAAc,SAAU,UAAW,aAAc,UAAW,gBAAiB,eAC3E,aAAc,UAAW,gBAAiB,WAAY,SAAU,OAAQ,SAE1EC,MACAC,WACU,OAAQ,WAAY,MAAO,eAC9B,SAASxO,EAAOyO,GACA,MAAfzO,EAAM4M,QACR5M,EAAM4M,MAA6B,MAArB6B,EAASC,SAAmBD,EAASC,SAAWD,EAASE,WAG7EC,WACU,SAAU,UAAW,UAAW,UAAW,UAAW,UAAW,QAAS,QAAS,UAAW,UAAW,iBAC5G,SAAS5O,EAAOyO,MACfI,GAAUvS,EAAKC,EACjBuS,EAASL,EAASK,MAED,OAAf9O,EAAM+O,OAAqC,MAApBN,EAASO,YACvBhP,EAAMlG,OAAOuC,eAAiBsB,WACnCkR,EAASrS,kBACRqS,EAAStS,OACVwS,MAAQN,EAASO,SAAW1S,GAAOA,EAAIc,YAAcb,GAAQA,EAAKa,YAAc,IAAMd,GAAOA,EAAIS,YAAcR,GAAQA,EAAKQ,YAAc,KAC1IkS,MAAQR,EAASS,SAAW5S,GAAOA,EAAIU,WAAaT,GAAQA,EAAKS,WAAa,IAAMV,GAAOA,EAAIQ,WAAaP,GAAQA,EAAKO,WAAa,IAEzIkD,EAAM4M,OAAoBhO,SAAXkQ,IAClB9O,EAAM4M,MAAkB,EAATkC,EAAa,EAAc,EAATA,EAAa,EAAc,EAATA,EAAa,EAAI,KAItE7N,yBACQjB,iBACN9B,GAAO8B,EAAM9B,KACfiR,EAAUZ,GAAcrQ,GACxBrC,SAAGb,kBAEAoU,cAAgBpP,OAChB9B,KAAO8B,EAAM9B,UACbmR,cAAgBrP,EAAMsP,kBAAoBtP,EAAMqP,eAAgB,GAASrP,EAAMuP,mBAAqBvP,EAAMuP,0BAC1GC,UAAYxP,GAASA,EAAMwP,WAAc,GAAIlP,MAAS,IAEvDgO,GAAW9T,OACRqB,OACEyS,GAAWzS,QACbb,GAAQgF,EAAMhF,MAGhBmU,IACHZ,GAAcrQ,GAAQiR,EAAUf,GAAcxN,KAAK1C,GAAQ0Q,GAAoBP,GAAYzN,KAAK1C,GAAQsQ,OAEtGW,EAAQM,MAAO,IACbA,GAAQN,EAAQM,YAChBA,EAAMjV,OACHqB,OACE4T,EAAM5T,QACRb,GAAQgF,EAAMhF,GAIlBgK,KAAKlL,SACRkL,KAAKlL,OAASkG,EAAM0P,YAAc/R,UACR,GAAxBqH,KAAKlL,OAAO8D,WACdoH,KAAKlL,OAASkL,KAAKlL,OAAOkH,YAExBmO,EAAQhO,KACVgO,EAAQhO,IAAI6D,KAAMhF,sBAGtB2P,6BACMpK,GAAIP,KAAKoK,mBACRC,aAAc,EACf9J,MACA8J,aAAc,EACZ9J,EAAEoK,gBACJpK,EAAEoK,+BAIRC,8BACMrK,GAAIP,KAAKoK,mBACRrO,cAAe,EAChBwE,MACAxE,cAAe,EACbwE,EAAEqK,iBACJrK,EAAEqK,gCAIRC,uCACMtK,GAAIP,KAAKoK,mBACRhP,+BAAgC,EACjCmF,EAAEsK,0BACJtK,EAAEsK,gCACCD,wBAIHpR,GAAY,aAmDZe,GAAOtE,EAAImQ,IAAM,SAAShR,EAAI8D,EAAMmD,EAAIyO,KACvCC,iBAAiB7R,EAAMmD,EAAIyO,IAC5B,SAAS1V,EAAI8D,EAAMmD,KAClB2O,YAAY,KAAO9R,EAAMmD,IAE9B1B,GAAS1E,EAAImQ,IAAM,SAAShR,EAAI8D,EAAMmD,KACjC4O,oBAAoB/R,EAAMmD,IAC3B,SAASjH,EAAI8D,EAAMmD,KAClB6O,YAAY,KAAOhS,EAAMmD,IAE9B8O,IAAoB,QAAS,WAAY,UAAW,WAAY,QAC9D,YAAa,YAAa,UAAW,YAAa,WAAY,QAAS,aACvE,QAAS,SAAU,cAAe,mBAAoB,oBAAqB,iBAC3E,SAAU,MAAO,OAAQ,QAAS,YAAa,aAAc,cAAe,UAC5E,WAAY,aAAc,cAAe,cAAe,UAAW,kBAErEtP,MACApB,WACS,QACD,GAERH,MACA4B,MACArB,KAEFxF,GAAEJ,KAAKkW,GAAkB,SAACtV,MACZA,IAAQ,IAEjBI,EAAImQ,YACAvK,IAAYuP,aACZvP,IAAYwP,OAgCrB,IAAI9P,IAAO,GAAID,KAuDT,iBAAkB3E,OACpB1B,iBACY,uBACA,YACX,SAASqW,EAAUC,MACTD,SACHC,eACFrG,EAAMlK,EAAOqB,MACXmP,GAAIxQ,EAAMyQ,qBACND,GAAMA,IAAMtG,KAA4C,GAAlCA,EAAKwG,wBAAwBF,QAMnEnW,EAAEJ,qBACgB,oCACM,sBACrB,SAAS0W,EAAWJ,GACjB7S,OAAOiT,KAAerR,GAAWsR,kBACxBA,mBACHL,MAMN,WAAa5S,UAASsI,cAAc,SA4B/B4K,UAAUC,UAAU3V,QAAQ,oBAC1B4V,YACD,qBACF7G,KACG8G,SAAW9G,EAAKZ,iBAIlByG,iBAAiB,kBAAmB,SAAS/P,MAChDiR,GAAQtT,SAASuT,iBACC,aAAlBD,EAAM7U,SAA6C,UAAlB6U,EAAM7U,SAAsC,SAAf6U,EAAM/S,KAAkB,IACpF+S,EAAM3H,OAAS2H,EAAMD,SACvB,SACIA,SAAWC,EAAM3H,MACnBpK,EAAU+R,EAAO,aACX,GAAIhQ,IAAMjB,KACZ9B,KAAO,UACC+S,EAAO,QAASjR,eA5C7Ba,IAAYkQ,SACRA,YACH,8BACF7G,EAAMlK,SACqB,SAAtBA,EAAMmR,kBAGNf,sBACJlG,MACc,YAAbA,EAAKhM,MAAmC,SAAbgM,EAAKhM,WAC7BgM,GAAKkH,cACHA,UAAY,SAASpR,KAClB9B,KAAO,WACCgM,EAAM,SAAUlK,MAE5B6N,GAAG3D,EAAM,QAASA,EAAKkH,aAEtB,mBAGJlH,MACY,YAAbA,EAAKhM,MAAmC,SAAbgM,EAAKhM,cAC9BuC,IAAIyJ,EAAM,QAASA,EAAKkH,YACrB,KA4Be,SAA1BzT,SAAS0T,6BAMPC,GAAe3T,SAAS4T,QAAU,QAAU,iBAC9CC,EAAiC,UAAjBF,EAA2B,SAAW,YAC7CG,iBACHH,eACFpH,EAAMlK,YACF0R,YAAc1R,EAAM2R,WAAa3R,EAAMwR,GAAiB,OAAW,MACnEI,YAAc,GACb,OAIbvX,EAAEJ,KAAKqF,GAAY,SAASD,EAAMnB,MACjBmB,EAAKnB,MAAQA,GAAQA,GC/YlC,IAAAoD,OACFuQ,UACAlW,GAAOgC,SAASnB,eAQU,cAAxBmB,SAASmU,sBACA1Q,GACFzD,SAASoS,0BACTA,iBAAiB,mBAAoB3O,GACrCzD,SAASqS,uBACTA,YAAY,qBAAsB,WACb,aAAxBrS,SAASmU,YACX1Q,MAEAzF,GAAKoW,UAAoC,OAAxBrU,OAAOsU,cAAyBtU,OAAOuU,yBACjDC,GAAT,kBAESH,SAAS,YAEd,MAAOxM,cACI2M,aAOnBjX,GAAI4S,GAAGnQ,OAAQ,OAAQ0D,GAEvBnG,GAAIkX,MAAQ,SAAS9Q,SAClBwQ,IAA+BxQ,IAArBC,GAAU5C,KAAK2C,GACnBpG,GKpCT,QAAe,GAAIZ,GAAE+X,cCCfC,GAAUhY,EAAEuM,kCAEF,yCAEFL,QACL+L,OAASjY,EAAEkY,IAAIhM,EAAIpB,YACnB/K,GAAKmM,EAAInM,wBAGV+K,GAAQH,KAAKsN,aACVjY,GAAEmY,MAAMrN,IAAUA,8BAGlBH,MAAKsN,2BAEJtX,UACJmK,GAAQH,KAAKyN,YACf9K,UAEMA,EAASxC,EAAMuN,WAAarY,EAAEsY,WAAWxN,EAAOnK,MAC9C2M,QAEHtN,GAAEmY,MAAMrN,IAAUA,sBAEjByN,SACD5N,MAAK6N,UAAUxY,EAAE2J,UAAU4O,GAAM,sBAElCA,EAAMjY,KACVmY,QAAQ9N,KAAK+N,UAAUH,GAAOA,EAAMjY,uBAE9BiY,EAAMjY,KACZqY,UAAUhO,KAAK+N,UAAUH,GAAOA,EAAMjY,iBAEtCiY,SACKvY,GAAEoM,IAAIzB,KAAKyN,YAAaG,iBAE7BA,SACKvY,GAAE4Y,IAAIjO,KAAKyN,YAAaG,iBAE7BA,EAAMtJ,KACNxO,IAAIkK,KAAKG,QAASyN,EAAMtJ,yBAGpB,IAAI9D,OAAM,2CAGV,IAAIA,OAAM,0CAIpBgB,IAAO0M,SAASb,GAAQc,YAAY,ECnDpC,QAAe,GAAI9Y,GAAE+Y,OAAO,MAAO,SNC7BnU,GAAQoU,MAAMC,UAAUrU,MAC5B0C,MAoBEgD,sBACO9J,EAAM8J,MACThD,GAAQ9G,GACV,KAAM2K,iBAAgB3K,kBACH,mBAAV8J,KACTA,SACSA,MAEJzG,KAAOyG,EAAOzG,MAAQ,YACrBrD,GAAQ8J,KACZ4O,MAAM,yBAA0B5O,EAAOzG,KAAMrD,iBAG/CA,SACK8G,IAAQ9G,UAGVJ,mBAECI,EAAM2G,EAAMC,SACXhH,GAAMI,EAAM2G,EAAMC,GAAM,KAMtB+R,QACN,OACA,QACE,SACA,aACI,EAAG,OACV,QACE,SACC,QACD,IAGJC,iBACElO,OAIG,GAHDqH,GAAQrH,EAAEqH,MACZjT,SAEOkC,EAAI,EAAGiD,EAAImG,UAAUzK,OAAQqB,EAAIiD,EAAGjD,SACvCoJ,UAAUpJ,GACV+Q,IAAU4G,GAAS7Z,IAAMA,GAC3B,OAAO,SAEJ,iBAEJ4L,KACDqK,oCAEIrK,KACJoK,gCAECpK,SACIA,GAAEzL,SAAWyL,EAAErF,eAI1B7F,GAAEJ,KAAKwZ,GAAc,SAACpS,EAAIxG,MACjBqY,SAASrY,QACR,cACCwG,KAIX,IAAIqS,iBAEO,SAASpK,EAAOqK,SACG,gBAAVrK,GAAqBA,EAAQsK,KAAKC,UAAUvK,EAAO,KAAMwK,OAAOH,IAAW,YAElF,SAASrK,aAEPsK,MAAKG,MAAMzK,GAClB,MAAO/D,SACA+D,0BAKFA,SACJA,IAAmB,IAAVA,KACNA,EAAM0K,WACP1K,EAAMhO,OAAO,GAAG1B,cAAgB0P,EAAMrK,MAAM,IAFjB,uBAK1BqK,SACAA,IAAmB,IAAVA,EAAeA,EAAM0K,WAAWpa,cAAgB,uBAGzD0P,SACAA,IAAmB,IAAVA,EAAeA,EAAM0K,WAAWlH,cAAgB,sBAG1DxD,EAAO2K,QACNnJ,WAAWxB,IACduB,SAASvB,KAAYA,GAAmB,IAAVA,EAAc,MAAO,KACjC,MAAZ2K,EAAmBA,EAAW,OACrCC,GAAcjX,KAAKkX,IAAI7K,GAAO8K,QAAQ,GACtCC,EAAOH,EAAYjV,MAAM,MACzBpD,EAAIwY,EAAK7Z,OAAS,EAClBmO,EAAO9M,EAAI,EAAKwY,EAAKpV,MAAM,EAAGpD,IAAMwY,EAAK7Z,OAAS,EAAI,IAAM,IAAO,GACnE8Z,EAASJ,EAAYjV,UACrBsV,EAAOjL,EAAQ,EAAI,IAAM,SACtBiL,GAAON,EAAWtL,EAAO0L,EAAKpV,MAAMpD,GAAGT,QAAQoZ,SAAU,OAASF,sBAGjEhL,MACJ7H,GAAOxC,GAAMuB,KAAKyE,UAAW,SAC1BxD,GAAKjH,OAAS,EAAKiH,EAAK6H,EAAQ,GAAK,IAAM7H,EAAKA,EAAKjH,OAAS,GAAOiH,EAAK,IAAgB,IAAV6H,EAAc,GAAK,MAG9GjP,GAAEJ,KAAKyZ,GAAc,SAAChS,EAAG7G,MAChBqY,SAASrY,EAAM6G,ICxIlB,IAAAgB,IAAkBrI,EAAEwJ,eAAe,4JAA4JL,MAAM,KAAM,kBAAM,IACrNO,GAAQ,MACR7B,GAAa,MACb4B,GAAiB,kJACjBf,GAAwB,WACxB0C,GAAc,6FACdC,GAAoB,mBACpB5C,GAAc,oGACdL,GAAU,oBAERR,MAYAmC,UAAmBzB,UAAiBC,UAoIpCiD,MMtJE4O,IAAkB,UAETpa,EAAEuM,qBACPyL,wBACI9L,iBACCtB,gBACN2N,KAAOjN,EAAWY,EAAIZ,WAAY8O,IACnCjO,GAAOC,IAAI4L,GAAQc,mBAChBuB,QAAU/W,SAASgX,cAAc,gBAAkB3P,KAAK4N,QACzD1K,OAAOlD,KAAK0P,QAAS1P,KAAK5K,UAE3Bwa,eAAiB5P,KAAK4P,eAAerV,KAAKyF,8BAGxCA,MAAK4N,KAAK9N,WAAWtE,KAAKwE,KAAMA,KAAKG,QAASH,KAAK5K,kCAGxDH,KAAK+K,KAAK4N,KAAK1O,WAAY,SAAC2Q,KACvB/B,QAAQ+B,EAAOC,EAAKF,uBAEtBG,OAAO/P,KAAKsE,yCAGfrP,KAAK+K,KAAK4N,KAAK1O,WAAY,SAAC2Q,KACvB7B,UAAU6B,EAAOG,EAAKJ,2CAGhBK,EAAMla,GACfiK,KAAK4N,KAAK3O,gBACP8Q,OAAO/P,KAAK4N,KAAKvO,YAAYtJ,EAAKiK,MAAOA,KAAKG,QAASH,KAAK5K,WAE5D2a,OAAO/P,KAAKsE,0BAGdvO,GACDV,EAAEyD,MAAM/C,KAAMA,EAAM,IACpBA,IAAQE,EAAIuN,KAAKxD,KAAK5K,KACxBa,EAAIuN,KAAKxD,KAAK5K,GAAIW,MCtClBma,MAEAC,GAAY9a,EAAEuM,qBACVyL,eACE,SACH,WACG,uBACE9L,4BACCtB,gBACN2N,KAAOrM,EAAIZ,gBACXsP,KAAO1O,EAAI0O,UACXG,SAAW7O,EAAI6O,cACfC,cAAgB9O,EAAI4G,WACpBzF,SAAWrN,EAAE+K,IAAImB,EAAImB,SAAU,SAAC4N,SAC5BR,GAAKM,SAASG,OAAOC,gBAAgBF,MACtCR,EAAK1a,YACC0a,EAAKM,eACRN,EAAKrC,qBAGXgD,MAAQlP,EAAIkP,MACbjP,GAAOC,IAAI4L,GAAQc,mBAChBuB,QAAU/W,SAASgX,2BAA2B3P,KAAKiQ,WAAUjQ,KAAK4N,QACnE1K,OAAOlD,KAAK0P,QAAS1P,KAAK5K,gCAI9BH,KAAK+K,KAAK0C,SAAU,SAACgO,KACXnW,sCAIVtF,KAAK+K,KAAK0C,SAAU,SAACgO,KACX/V,0CAIA+V,SACHA,GAAUpC,UAAUqC,2BAErBD,SACCA,GAAUpC,UAAUsC,2BAElBF,SACFA,GAAUpC,UAAVoC,mCAEI7a,SACJqa,IAAWra,EAAKiS,qCAEbyF,SACHlY,GAAEwb,WAAWtD,EAAK4C,uBAElBta,EAAMyS,MACToI,eAEG7a,EAAKiS,cAERzS,EAAEyb,SAASxI,KACNyI,OAASzI,EAAOyI,QAAUZ,KACrB9a,EAAEuM,aAAa0G,OACtB,CAAA,IAAIjT,EAAEgE,OAAOiP,KAAWjT,EAAEwb,WAAWvI,EAAQ6H,SAG5C7W,gCAA+BzD,OAASyS,KAFlCA,KAKVzS,IAAQqa,IACV,KAAM,IAAI1P,oBAAmB3K,6BAEpBA,GAAQ6a,KACfnC,MAAM,yBAA0B1Y,GAC7B6a,SCzEErb,EAAEuM,qBACPyL,wBACI9L,4BACCtB,gBACNmQ,SAAW7O,EAAI6O,cACfF,WAAa7a,EAAE+K,IAAImB,EAAI2O,WAAY,SAACQ,SAChCZ,GAAKU,gBAAgBE,UAEzBM,YAAc,OACdC,gBAAiB,OACjBlC,MAAQ/O,KAAK+O,MAAMxU,KAAKyF,WACxB0C,SAAWrN,EAAE+K,IAAImB,EAAImB,SAAU,SAACgO,SAC5BZ,GAAKU,gBAAgBE,+BAGhBJ,SACPtQ,MAAKoQ,SAASG,OAAOC,gBAAgBF,MACtCtQ,KAAK5K,YACC4K,KAAKoQ,eACRpQ,KAAKyN,kBACLzN,4BAIL1C,GAAM0C,KAAKgR,eACX1T,EAAM0C,KAAKkQ,WAAW1a,OAAQ,IAC5Bkb,GAAY1Q,KAAKkQ,WAAW5S,GAC9BoB,WACIgS,EAAUnW,YACXyW,iBACGtS,YAAerJ,GAAE6b,MAASxS,EAAIyS,KAAKnR,KAAK+O,OAAQ/O,KAAK+O,eAE3D9Z,KAAK+K,KAAK0C,SAAU,SAACgO,KACXnW,cAEP0W,gBAAiB,wBAInBlC,8BAGDmB,GAAalQ,KAAKkQ,WACpBrZ,EAAImJ,KAAKgR,gBAEPhR,KAAKiR,mBACLhc,KAAK+K,KAAK0C,SAAU,SAACgO,KACX/V,gBAEPsW,gBAAiB,GAEjBpa,OACMA,GAAG8D,cAEXqW,YAAc,KCxDjBI,GAAa/b,EAAEuM,mCACP4B,QACLA,KAAOA,yBAGN,IAAIhD,OAAM,qBAIpB4Q,IAAWC,iBAAmBhc,EAAEuM,qBACtBwP,wCAEKnR,gBACNkI,MAAQ,OACRmJ,IAAM,kCAGPC,UAAID,EAAMtR,KAAKsR,OAEfC,EAAKD,EAAIE,KAAKxR,KAAKwD,MAAO,IACxB2E,GAAQmJ,EAAIG,sBAEXtJ,MAAQA,SAEJoJ,EAAG,SACHpJ,EAAQoJ,EAAG,GAAG/b,WAChB2S,QAGJA,MAAQ,ICtBjB,IAAMuJ,IAAiBrc,EAAEuM,4BAEf,YACK,kBACM,wBAEPxM,EAAIuc,EAAcP,QACvBhc,GAAKA,OACLuc,aAAeA,OACfP,WAAaA,OACbrC,kCAESuB,EAAS/O,YACjBlM,EAAER,OAAO0M,EAAK+O,GACZA,EAAQpX,UACTwY,IAAeE,WACX,IAAIC,IAAKtQ,OAEbmQ,IAAeI,gBACX,IAAIxB,GAAQI,UAAUnP,OAC1BmQ,IAAeK,sBACX,IAAIC,IAAezQ,gBAEpB,IAAIf,OAAM,yCAIhBpL,GAAKa,EAAIoL,UAAUrB,KAAK5K,cAGtBA,MACC4K,KAAKiS,SAAS7c,YACT4K,KAAKkS,6BAGV9c,cACH+c,WAEA9c,GAAEC,YAAYF,KACdH,KAAKG,EAAI,SAACA,KACLgd,aAAahd,EAAI+c,UAGnBC,aAAahd,EAAI+c,GAEjBA,yBAEI/c,EAAI+c,gBACXzY,KAAKtE,GACW,IAAhBA,EAAGwD,UAAkBoH,KAAKmS,IAAIA,EAAI3c,OAAS,GAAG6c,QAChDhd,EAAEJ,KAAKG,EAAG+L,WAAY,SAAC/L,KAChBgd,aAAahd,EAAI+c,uCAIrBA,YACAD,YACD7c,EAAEC,YAAY0K,KAAK5K,MACnBH,KAAK+K,KAAK5K,GAAI,SAACA,KACVkd,UAAUld,EAAImd,EAAKL,iBAGrBI,UAAUtS,KAAK5K,GAAI4K,KAAKkS,8BAGvB9c,EAAIM,UACJN,EAAGwD,cACJ,QACE4Z,aAAapd,EAAIM,aAEnB,QACE+c,UAAUrd,EAAIM,wBAIfN,EAAIM,UACR8N,GAAOvN,EAAIuN,KAAKpO,GAClBmb,EAAS,GAAIvQ,MAAKoR,WAAW5N,GAC7BkP,SAAOvK,EAAQ,EACfgK,EAAMnS,KAAKmS,IAENO,EAAQnC,EAAOmC,cACfC,YAAYnP,EAAKoP,UAAUzK,EAAOuK,EAAMG,OAAQzd,QAChD0d,WAAW,UAAW1d,KACtBsE,iBACSgZ,EAAMA,YACXP,EAAI3c,OAAS,OACdkc,GAAeE,SAEfc,EAAMK,GAEZ5K,SACGwK,YAAYnP,EAAKwP,OAAO7K,GAAQ/S,KACjC4P,OAAO5P,SAEN6d,OAAO7d,GAAI,0BAGPA,EAAIM,cACXwa,KACF/H,EAAQnI,KAAKmS,IAAI3c,OACjBmc,EAAe3R,KAAK2R,aACpBjB,EAAY9W,OACZgX,WAEA3b,KAAKG,EAAG6S,WAAY,SAACgI,MACjBpa,GAAOoa,EAAKpa,QACZ8b,EAAa/V,KAAK/F,GAAO,IACvBqd,GAAY/C,GAAUgD,aAAatd,EAAKO,QAAQub,EAAc,QAC9DuB,EAAW,IACT3R,eACU0O,EAAK3L,YACV6D,YACI+K,OACLrd,OACA6b,GAAeI,cAEnB3B,GAAUiD,WAAWF,aACT3R,KACN4O,GAAUkD,QAAQH,IACnB,CAEL/C,IAAUkD,QAAQH,KACpBtC,GAAQ,KACClX,KAAK6H,WAEZzE,kBAAkBjH,uBAKH,GAArBqa,EAAW1a,SACD0a,EAAW,GACdA,EAAW1a,uBAEN0a,EAAWoD,KAAK,SAACC,EAAGC,SACvBrD,IAAUsD,YAAYD,EAAE9C,WAAaP,GAAUsD,YAAYF,EAAE7C,mBAE/DvI,OACDuJ,GAAeK,kBAGrBrB,MACGhX,KAAKgX,KACHA,EAAUhO,kBAGduQ,OAAO7d,GAAKwb,GACZA,GACHvb,EAAEJ,KAAKI,EAAE+K,IAAIhL,EAAG+L,WAAY,SAACrK,SAAMA,KAAI,SAAC1B,KACjCkd,UAAUld,EAAIM,sBAGlBN,EAAIid,KACNA,OAASA,OACPF,IAAIzY,KAAKtE,wBAELse,EAASxQ,MACd9N,GAAKuD,SAASsL,eAAeyP,YAC7BxQ,OAAO9N,EAAI8N,QACV+P,OAAO7d,GAAI,GACTA,wBAEGse,EAASxQ,MACdwQ,EAAUre,EAAEkJ,KAAKmV,GACpB,MAAO1T,MAAK8S,WAAWY,EAASxQ,SC3KvB7N,EAAEuM,mCACHxM,EAAI8c,QACT9c,GAAKA,OACL8c,SAAWA,mBAEXpd,eACAyF,SACD2I,OAAOlD,KAAK5K,GAAIa,EAAImL,MAAMtM,IACvBkL,qBAEHlL,eACCyF,SACDoZ,MAAM3T,KAAK5K,GAAIa,EAAImL,MAAMtM,IACtBkL,yBAEClL,eACHyF,SACDqZ,QAAQ3d,EAAImL,MAAMtM,GAASkL,KAAK5K,IAC7B4K,wBAEAlL,eACFyF,SACD4I,OAAOlN,EAAImL,MAAMtM,GAASkL,KAAK5K,IAC5B4K,4BAGFA,MAAK6T,WACN5e,KAAK+K,KAAKkS,SAAU,SAAC3X,KAChBA,cAEFsZ,QAAS,GAET7T,8BAGHA,MAAK6T,WACL5e,KAAK+K,KAAKkS,SAAU,SAAC3X,KAChBI,gBAEFkZ,QAAS,GAET7T,yBAGHA,KAAK6T,QACPxe,EAAEJ,KAAK+K,KAAKkS,SAAU,SAAC3X,KAChBI,WACAmZ,cAEL9O,OAAOhF,KAAK5K,SACX8c,SAAWtY,YACXxE,GAAKwE,UV3CRma,GAAkB,eACtBC,GAAgB,YAElBxS,IAAO0M,SAAS6F,GAAiB,SACjCvS,GAAO0M,SAAS8F,GAAe5C,GAAWC,iBAmB1C,IAAI4C,IAAa,EACXC,SACS7e,EAAEuM,oCAETuS,SACKD,IAAcC,0BAGbpT,MAAOQ,mEACZ4S,GAAK5S,EAAI4S,IAAOF,UAChBtC,aAAerQ,EAAUC,EAAKwS,SAC9B3C,WAAa9P,EAAUC,EAAKyS,SAC5B5e,GAAK0L,EAAQC,EAAOQ,EAAIP,SAAU,QAClCuP,OAAS,GAAImB,IAAe1R,KAAK5K,GAAI4K,KAAK2R,aAAc3R,KAAKoR,eACpDpR,KAAKmU,IAAMnU,uBAEnBG,cACFY,EAAQf,KAAKuQ,OAAOvP,QACtBmR,EAAMpR,EAAMoR,IACZD,kBAEE/O,OAAOxK,SAASyb,yBAA0BrT,EAAM3L,MACzCC,EAAE+K,IAAIW,EAAMmR,SAAU,SAAC5B,SACzBR,GAAKS,OAAOC,gBAAgBF,MAC7B6B,EAAI7B,EAAQnI,aACThI,iBAIJ,GAAIkU,IAAiBtT,EAAM3L,GAAI8c,MCpDpC6B,GAAkB,eACtBC,GAAgB,YAElBxS,IAAO0M,SAAS6F,GAAiB,SACjCvS,GAAO0M,SAAS8F,GAAe5C,GAAWC,iBAmB1C,IAAI4C,IAAa,EACXC,SACS7e,EAAEuM,oCAETuS,SACKD,IAAcC,0BAGbpT,MAAOQ,mEACZ4S,GAAK5S,EAAI4S,IAAOF,UAChBtC,aAAerQ,EAAUC,EAAKwS,SAC9B3C,WAAa9P,EAAUC,EAAKyS,SAC5B5e,GAAK0L,EAAQC,EAAOQ,EAAIP,SAAU,QAClCuP,OAAS,GAAImB,IAAe1R,KAAK5K,GAAI4K,KAAK2R,aAAc3R,KAAKoR,eACpDpR,KAAKmU,IAAMnU,uBAEnBG,cACFY,EAAQf,KAAKuQ,OAAOvP,QACtBmR,EAAMpR,EAAMoR,IACZD,kBAEE/O,OAAOxK,SAASyb,yBAA0BrT,EAAM3L,MACzCC,EAAE+K,IAAIW,EAAMmR,SAAU,SAAC5B,SACzBR,GAAKS,OAAOC,gBAAgBF,MAC7B6B,EAAI7B,EAAQnI,aACThI,iBAIJ,GAAIkU,IAAiBtT,EAAM3L,GAAI8c,MUvDpCoC,GAAU,6DACdC,GAAe,yEAEFpE,GAAUjC,SAAS,OAAQ7Y,EAAEuM,qBAClCuO,eACE,SACH,WACG,wCAEGlQ,gBACN2P,eAAiB5P,KAAK4P,eAAerV,KAAKyF,SAC3C0S,GAAQ1S,KAAK4N,KAAKvX,MAAMie,QACvB5B,EACH,KAAMlS,6BAA4BR,KAAK4N,iCAEpC4G,UAAY9B,EAAM,QAClB+B,UAAY/B,EAAM,MAEnBgC,GAAahC,EAAM,GAAGrc,MAAMke,QAC3BG,EACH,KAAMlU,6BAA4BkS,EAAM,+BAErCiC,WAAaD,EAAW,IAAMA,EAAW,QACzCE,SAAWF,EAAW,IAAMA,EAAW,KAExCG,WAAW7U,KAAK5K,GAAI4K,KAAKiQ,WACxB6E,MAAQnc,SAASgX,cAAc,mBAC/BoD,IAAMpa,SAASgX,cAAc,cAC9BvZ,QAAQ4J,KAAK5K,GAAI4K,KAAK8U,SACtBnB,MAAM3T,KAAK+S,IAAK/S,KAAK8U,UAErBC,GAAiB/U,KAAKoQ,SAAS+D,GAAK,IAAMnU,KAAKqQ,eAC7CrQ,KAAKgV,aAAeC,GAASxT,IAAIsT,MACrC/U,KAAKgV,aAAe,GAAIC,IAASjV,KAAK5K,OAChC2f,eACU/U,KAAKoQ,SAASuB,wBAChB3R,KAAKoQ,SAASgB,kBACnB,UAENhc,GAAK,sBAELoH,cACD0Y,EAAclV,KAAKyN,YACrBqH,EAAQ9U,KAAK8U,MACb/B,EAAM/S,KAAK+S,IACX0B,EAAYzU,KAAKyU,UACjBE,EAAa3U,KAAK2U,WAElBQ,GADWnV,KAAK4U,UACR5U,KAAKa,OACbuU,EAAUpV,KAAKsT,KACfA,EAAOtT,KAAKsT,KAAO,GAAIjF,OAAM7R,EAAKhH,QAClCqL,EAAQsU,EAAQnV,KAAKa,SAAcb,KAAKa,MACxCwU,KACAC,OAEArgB,KAAKuH,EAAM,SAAC+Y,EAAMjY,MACd6K,GAAQsM,EAAYpf,EAAEoM,IAAI8T,EAAMd,GAAanX,KACtC6X,GAAQtU,EAAMsH,EAErBhI,KACGqV,UAAUrV,EAAOoV,EAAMjY,EAAK6K,MAEzBtH,EAAMsH,GAAS2H,EAAK2F,YAAYP,EAAaK,EAAMjY,EAAK6K,GAC3DgN,GACHG,EAAM5b,KAAKyG,MAEV7C,GAAO6C,EACRgV,MACIO,KAAO5F,EAAKkF,aAAaW,QAAQxV,KAClC7C,GAAO6C,EAAMwU,KACZe,KAAKxS,OAAO6P,MAGjBoC,MACDlgB,KAAKmgB,EAAS,SAACQ,MACXzV,GAAQU,EAAM+U,EAASC,OACvB1V,IAASA,IAAUmT,EAAKsC,EAASE,WAC3Bpc,KAAKkc,KACPA,EAASC,QAAUjc,YAI3B3E,KAAKqgB,EAAO,SAACnV,MACT4V,GAASV,EAAQW,KACjBD,MACGP,UAAUO,EAAQ5V,KACjBA,EAAM0V,QAAUE,IACjB5V,EAAM2V,OAASC,IACZA,KAEFL,KAAO5F,EAAKkF,aAAaW,QAAQxV,KAEpCA,EAAM2V,OAAS3V,EAAMwU,KACpBe,KAAK/B,MAAMxT,EAAM2V,MAAQxC,EAAKnT,EAAM2V,MAAQ,GAAGJ,KAAKvD,IAAM2C,OAGhE7f,KAAKogB,EAAS,SAAClV,KACTuV,KAAK5B,mCAILoB,EAAa5Q,EAAOzN,EAAGsR,MAC7BhI,GAAQ9K,EAAE4gB,OAAOf,YACfxH,QAAUwH,IACVgB,aAAelW,OACf0V,KAAO,UACRF,UAAUrV,EAAOmE,EAAOzN,EAAGsR,GAAO,GAChChI,sBAECA,EAAOmE,EAAOzN,EAAGsR,EAAOgO,GAC3BA,IACHhW,EAAQA,EAAMuV,KAAKvV,SACf2V,MAAQjf,IACRmJ,KAAK2U,YAAcrQ,EACrBtE,KAAK4U,WACPzU,EAAMH,KAAK4U,UAAY/d,KACnBgf,OAAS1N,wBAGV2F,QAAQ9N,KAAKwU,UAAWxU,KAAK4P,qBAC7BG,OAAO/P,KAAKlL,kCAGZkZ,UAAUhO,KAAKwU,UAAWxU,KAAK4P,yCAG7B5P,MAAKyB,IAAIzB,KAAKwU,oCAER5G,EAAM9Y,QACdib,OAAOjb,OChIV2a,IAAkB,MAAO,UAEzB2G,GAAiB/gB,EAAEuM,qBACfuO,wCAEKlQ,gBACN9G,QAAU6G,KAAK7G,QAAQoB,KAAKyF;KAC5BW,WAAaA,EAAWX,KAAK4N,KAAM6B,sBAElClP,KACJqK,qBAEEzK,GAAQH,KAAKG,QACf3C,EAAMwC,KAAKW,cAETX,KAAKW,WAAWtB,YAAYkB,EAAGP,MAAOG,EAAOH,KAAK5K,GAAImL,OAAQ,EAAO,IACnElE,GAAKmB,EAAIuC,QAAQvE,KAAKwE,KAAMG,EAAOH,KAAK5K,GAAImL,MAE5C/C,EAAIyB,cACF5J,EAAEgE,OAAOgD,GAAK,IACZiR,GAAStN,KAAK6N,UAAUrQ,EAAI6Y,KAAK,MAClC7a,KAAK8R,EAAQnN,EAAOH,KAAK5K,GAAImL,EAAG+M,WAE/BxQ,KAAK,2BAA4BkD,KAAK4N,KAAMvR,uBAMlDwM,GAAG7I,KAAK5K,GAAI4K,KAAKsW,UAAWtW,KAAK7G,cAChCod,oCAGD9a,IAAIuE,KAAK5K,GAAI4K,KAAKsW,UAAWtW,KAAK7G,cACjCqd,oBAIHC,IAAU,OAAQ,SAAU,QAAS,WAAY,QAAS,QAAS,UAAW,WAAY,QAAS,OACvG,YAAa,YAAa,WAAY,YAAa,UAAW,SAAU,SAAU,SAAU,SAAU,eAC9F,oBACK,4BAIAphB,EAAER,OAAOQ,EAAEsQ,QAAQ8Q,GAAQ,SAACC,MACrC7gB,GAAOR,EAAEyb,SAAS4F,GAAOA,EAAI7gB,KAAO6gB,QACjCrhB,GAAEshB,KAAK9gB,EAAO,cACpB,SAAC6gB,GACGrhB,EAAEyb,SAAS4F,KACdA,aACaA,OAEX7gB,GAAO6gB,EAAI7gB,WAAa6gB,EAAIJ,mBAC5BvF,OAASqF,GACNjG,GAAUjC,SAASrY,EAAM6gB,0BCxD5BjH,IAAkB,OAElBmH,GAAkBvhB,EAAEuM,qBAChBuO,wCAEKlQ,gBACN2P,eAAiB5P,KAAK4P,eAAerV,KAAKyF,WAC1CW,WAAaA,EAAWX,KAAK4N,KAAM6B,gCAGjCzP,MAAKW,WAAWZ,QAAQvE,KAAKwE,KAAMA,KAAKG,QAASH,KAAK5K,4BAGtD4K,MAAKW,WAAWb,WAAWtE,KAAKwE,KAAMA,KAAKG,QAASH,KAAK5K,oCAG9DH,KAAK+K,KAAKW,WAAWzB,WAAY,SAAC2Q,KAC7B/B,QAAQ+B,EAAOC,EAAKF,uBAEtBG,OAAO/P,KAAKsE,+BAGZuS,2CAGH5hB,KAAK+K,KAAKW,WAAWzB,WAAY,SAAC2Q,KAC7B7B,UAAU6B,EAAOG,EAAKJ,0CAIxBkH,gCAEI/gB,SACe,IAApBkK,UAAUzK,SAAaO,EAAMiK,KAAKsE,SAC/BjP,EAAEyD,MAAM/C,GAAO,GAAKA,2BAEd6X,EAAM7X,GACfiK,KAAKW,WAAW1B,gBACb8Q,OAAO/P,KAAKW,WAAWtB,YAAYtJ,EAAKiK,MAAOA,KAAKG,QAASH,KAAK5K,WAElE2a,OAAO/P,KAAKsE,0BAGdvO,6BAKHghB,GAAe,SACnBC,GAAc,QAEdC,GAAa,SACbC,GAAY,QACZC,GAAe,WACfC,GAAQ,QACRC,GAAW,WACXnH,iBAEW,kBACAna,KACDyN,KAAKxD,KAAK5K,GAAI4K,KAAKsX,WAAWvhB,mBAI7B,kBACAA,KACDmL,KAAKlB,KAAK5K,GAAI4K,KAAKsX,WAAWvhB,+BAI7BuO,GACDA,GAAyB,gBAATA,QACbiT,YAAYliB,EAAEkJ,KAAK+F,GAAO9F,MAAM,QAC5B8F,YAAiB+J,YACrBkJ,YAAYjT,GACRA,GAAyB,gBAATA,QACpBkT,aAAalT,QAEbmT,iCAGInT,QACNmT,QAAQnT,GAAO,MAChBnF,GAAOa,KAAK0X,YACdtiB,EAAK4K,KAAK5K,OACP,GAAIuiB,KAAOrT,GACVA,EAAMqT,MACJC,SAASxiB,EAAIuiB,KACZje,KAAKie,MAENE,YAAYziB,EAAIuiB,yBAIdrT,QACLmT,QAAQnT,GAAO,MAChBnF,GAAOa,KAAK0X,YACdtiB,EAAK4K,KAAK5K,KACVH,KAAKqP,EAAO,SAACvO,GACTA,MACG2D,KAAK3D,KACN6hB,SAASxiB,EAAIW,wBAIfuO,EAAOwT,MACTJ,GAAW1X,KAAK0X,YAChBA,SACE7gB,GAAI6gB,EAASliB,OACfJ,EAAK4K,KAAK5K,GACLyB,KAAK,IACN8gB,GAAMD,EAAS7gB,EACdyN,KAAUwT,EAAQziB,EAAEc,QAAQmO,EAAOqT,OAActiB,EAAEsY,WAAWrJ,EAAOqT,OACpEE,YAAYziB,EAAIuiB,6BAOrBrT,GACDA,GAASjP,EAAE2D,SAASsL,KAClB1N,MAAMoJ,KAAK5K,GAAIkP,GACVA,GAASjP,EAAEyb,SAASxM,SACxBkT,aAAalT,0BAGTA,QACNmT,QAAQnT,MAEXlP,IADS4K,KAAK0X,YACT1X,KAAK5K,MACVH,KAAKqP,EAAO,SAACvO,EAAK4hB,KACd1gB,IAAI7B,EAAIuiB,EAAK5hB,6BAKdA,KACDkB,IAAI+I,KAAK5K,GAAI,UAAWW,EAAM,GAAK,gCAIlCA,KACDkB,IAAI+I,KAAK5K,GAAI,UAAWW,EAAM,OAAS,6BAItCA,KACDA,IAAIiK,KAAK5K,GAAI4K,KAAKsX,WAAWvhB,qBAIzB,8BAEHgiB,MAAQ,GAAI1iB,GAAE6b,WACd2F,SACE7W,KAAK+X,8BAGPjB,gBACAN,kCAEAzgB,GACAA,QAGEwgB,eACDvW,KAAK+X,aACFA,MAAMC,YACND,MAAQne,UAEX3C,IAAI+I,KAAK5K,GAAI,UAAW,OAPxB6B,IAAI+I,KAAK5K,GAAI,UAAW,mCAYzBW,KACH2S,QAAQ3S,GAAOE,EAAIgiB,QAAQjY,KAAK5K,GAAIC,EAAEc,QAAQJ,EAAKE,EAAIF,IAAIiK,KAAK5K,MAAQa,EAAIgiB,QAAQjY,KAAK5K,KAAMW,+BAI5FA,6BAGAA,GACDA,GAAKE,EAAIwN,MAAMzD,KAAK5K,sBAIhB,0CAEG6K,YACND,KAAKW,WAAW1B,WACnB,KAAM3F,iCAAgC0G,KAAKW,WAAWiN,iCAEnDsK,SAAWlY,KAAKkY,SAAS3d,KAAKyF,SAC/BmY,GAAMnY,KAAKmY,IAAMnY,KAAK5K,GAAGgC,eACrB+gB,OACDlB,SACEjc,MAAQ+b,aAEVG,OACChe,GAAO8G,KAAK9G,KAAO8G,KAAK5K,GAAG8D,UAC1B8B,MAAS9B,GAAQke,IAASle,GAAQme,GAAYN,GAAeC,aAE/DG,SACG7d,WAAU,gCAAkC6e,gBAG5C7e,WAAU,gCAAkC6e,uCAMlDtP,GAAG7I,KAAK5K,GAAI4K,KAAKhF,MAAOgF,KAAKkY,+CAK7Bzc,IAAIuE,KAAK5K,GAAI4K,KAAKhF,MAAOgF,KAAKkY,iCAGvBniB,QACND,IAAIkK,KAAKW,WAAW0V,KAAMtgB,sBAGxBA,QACFqiB,aAAapY,KAAKW,WAAWtB,YAAYtJ,EAAKiK,MAAOA,KAAKG,QAASH,KAAK5K,KAAK,uBAG3EmL,MACHxK,GAAMiK,KAAKqY,QAEbC,EAAOtY,KAAKjK,GACVA,IAAOuiB,GACTtY,KAAKuY,SAASxiB,KACd6U,mCAGG7U,MACDuiB,GAAOtY,KAAKsX,WAAWvhB,EACvBuiB,IAAQtY,KAAKjK,KACfiK,KAAKqY,MAAOrY,KAAKjK,IAAMuiB,mBAGrBviB,MACAoiB,GAAMnY,KAAKmY,WAEPA,OACDlB,cAEAC,OACChe,GAAO8G,KAAK9G,QAEZA,GAAQke,IAASle,GAAQme,GAAU,IACb,GAApBpX,UAAUzK,aACLS,GAAIgiB,QAAQjY,KAAK5K,IAAMa,EAAIF,IAAIiK,KAAK5K,IAAMwE,UAE7Cqe,YAEMliB,GAAOE,EAAIF,IAAIiK,KAAK5K,IAC1Ba,EAAIgiB,QAAQjY,KAAK5K,KAAO6iB,GAC1BhiB,EAAIgiB,QAAQjY,KAAK5K,GAAI6iB,OAEpB,IACmB,GAApBhY,UAAUzK,aACLS,GAAIF,IAAIiK,KAAK5K,GACXW,IAAOE,EAAIF,IAAIiK,KAAK5K,OACzBW,IAAIiK,KAAK5K,GAAIW,aAIlBohB,SACG7d,WAAU,gCAAkC6e,gBAG5C7e,WAAU,gCAAkC6e,UAM/C9iB,EAAER,OAAOQ,EAAEsQ,QAAQuK,GAAY,SAACwG,EAAK7gB,kBAC1C2iB,IAAI,OAAQ3iB,GACbR,EAAEshB,KAAK9gB,EAAO,cACpB,SAAC6gB,EAAK7gB,kBACC2iB,IAAI,QAAS3iB,KACjBkb,OAAS6F,GACNzG,GAAUjC,SAASrY,EAAM6gB,8BCpSnBrhB,EAAER,0BAEdmG,GAAOyd,OCOKpjB,EAAER,OAAOogB,GAAU5f,EAAGY,6GAQ9BsL,KACM4T,KAAK5T,MACPC,OAAOD"}