{"version":3,"file":null,"sources":["../tpl.js/src/expression.js","../tpl.js/src/dom/core.js","../tpl.js/src/dom/attr.js","../tpl.js/src/dom/css.js","../tpl.js/src/dom/val.js","../tpl.js/src/dom/event.js","../tpl.js/src/dom/ready.js","../tpl.js/src/template/DomParser.js","../tpl.js/src/util.js","../tpl.js/src/index.js","../tpl.js/src/template/TextParser.js","../tpl.js/src/config.js","../tpl.js/src/binding/Binding.js","../tpl.js/src/log.js","../tpl.js/src/translate.js","../tpl.js/src/binding/Text.js","../tpl.js/src/binding/Directive.js","../tpl.js/src/binding/DirectiveGroup.js","../tpl.js/src/template/DirectiveParser.js","../tpl.js/src/template/Template.js","../tpl.js/src/template/index.js","../tpl.js/src/directives/each.js","../tpl.js/src/directives/event.js","../tpl.js/src/directives/simple.js","../tpl.js/src/directives/index.js"],"sourcesContent":["import translate from './translate'\nimport _ from 'utility'\nimport config from './config'\n\nconst keywords = _.reverseConvert('tpl,observer,utility,window,document,Math,Date,this,true,false,null,undefined,Infinity,NaN,isNaN,isFinite,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,parseInt,parseFloat'.split(','), () => true),\n  wsReg = /\\s/g,\n  newlineReg = /\\n/g,\n  transformReg = /[\\{,]\\s*[\\w\\$_]+\\s*:|('(?:[^'\\\\]|\\\\.)*'|\"(?:[^\"\\\\]|\\\\.)*\"|`(?:[^`\\\\]|\\\\.)*\\$\\{|\\}(?:[^`\\\\\"']|\\\\.)*`|`(?:[^`\\\\]|\\\\.)*`)|new |typeof |void |(\\|\\|)/g,\n  restoreReg = /\"(\\d+)\"/g,\n  identityReg = /[^\\w$\\.](?:(?:this\\.)?[A-Za-z_$][\\w$]*(?:\\.[A-Za-z_$][\\w$]*)*)/g,\n  propReg = /^[A-Za-z_$][\\w$]*/,\n  simplePathReg = /^[A-Za-z_$][\\w$]*(?:\\.[A-Za-z_$][\\w$]*|\\['.*?'\\]|\\[\".*?\"\\]|\\[\\d+\\]|\\[[A-Za-z_$][\\w$]*\\])*$/,\n  literalValueReg = /^(?:true|false|null|undefined|Infinity|NaN)$/,\n  exprReg = /\\s*\\|\\s*(?:\\|\\s*)*/,\n  applyFuncReg = /\\.call|\\.apply$/,\n  thisReg = /^this\\./\n\nconfig.register('keywords', {})\n\nconst cfg = config.get()\n\nlet saved = []\n\nfunction transform(str, isString) {\n  let i = saved.length\n  saved[i] = isString ? str.replace(newlineReg, '\\\\n') : str\n  return `\"${i}\"`\n}\n\nfunction restore(str, i) {\n  return saved[i]\n}\n\nlet identities, params,\n  scopeProvider\n\nfunction defaultScopeProvider() {\n  return 'this'\n}\n\nfunction initStatus(_params, _scopeProvider) {\n  identities = {}\n  scopeProvider = _scopeProvider || defaultScopeProvider\n  params = _params.__MAP__\n  if (!params)\n    params = _params.__MAP__ = _.reverseConvert(_params, () => true)\n}\n\nfunction cleanStates() {\n  identities = undefined\n  params = undefined\n  scopeProvider = undefined\n  saved.length = 0\n}\n\nfunction rewrite(raw, idx, str) {\n  let prefix = raw.charAt(0),\n    userExpr = raw.slice(1),\n    expr = userExpr.replace(thisReg, ''),\n    prop = expr.match(propReg)[0]\n\n  if (expr == userExpr && (keywords[prop] || params[prop] || cfg.keywords[prop]))\n    return raw\n\n  let nextIdx = idx + raw.length,\n    nextChar = str.charAt(nextIdx++),\n    realScope = false,\n    ident = true\n\n  switch (nextChar) {\n    case '(':\n      realScope = !applyFuncReg.test(expr)\n      ident = false\n      break\n    case '=':\n      realScope = str.charAt(nextIdx) != '='\n      break\n    case '/':\n    case '*':\n    case '+':\n    case '-':\n    case '%':\n    case '&':\n    case '&':\n      realScope = str.charAt(nextIdx) == '='\n      break\n    case '>':\n    case '<':\n      realScope = str.charAt(nextIdx) == nextChar && str.charAt(nextIdx + 1) == '='\n      break\n  }\n  if (!realScope && ident)\n    identities[expr] = true\n  return `${prefix}${scopeProvider(expr, realScope)}.${expr}`\n}\n\n\nfunction makeExecutor(body, params) {\n  params = params.slice()\n  params.push(`return ${body};`)\n  try {\n    return Function.apply(Function, params)\n  } catch (e) {\n    throw Error(`Invalid expression. Generated function body: ${body}`)\n  }\n}\n\nfunction complileExpr(body) {\n  return (' ' + body).replace(identityReg, rewrite).replace(restoreReg, restore)\n}\n\nfunction compileFilter(exprs, params) {\n  return _.map(exprs, (expr) => {\n    let args = expr.replace(/,?\\s+/g, ',').split(',')\n    return {\n      name: args.shift().replace(restoreReg, restore),\n      argExecutors: _.map(args, (expr) => {\n        return makeExecutor(complileExpr(expr), params)\n      })\n    }\n  })\n}\n\nexport function isSimplePath(expr) {\n  return simplePathReg.test(expr) && !literalValueReg.test(expr) && expr.slice(0, 5) !== 'Math.'\n}\n\nconst Expression = _.dynamicClass({\n  constructor(fullExpr, params) {\n    let exprs = fullExpr.replace(transformReg, transform).split(exprReg),\n      expr = exprs.shift().replace(wsReg, ''),\n      filterExprs = exprs\n\n    this.expr = expr.replace(restoreReg, restore)\n    this.filterExprs = _.map(expr => expr.replace(restoreReg, restore))\n    this.fullExpr = fullExpr\n    this.params = params\n    this.executor = makeExecutor(complileExpr(expr), params)\n    this.filters = compileFilter(filterExprs, params)\n    this.identities = _.keys(identities)\n    this.simplePath = isSimplePath(this.expr)\n  },\n  executeFilter(scope, params, data, transform) {\n    _.each(this.filters, filter => {\n      let args = _.map(filter.argExecutors, (executor) => {\n          return executor.apply(scope, params)\n        }),\n        rs\n      if (transform != false) {\n        rs = translate.transform(filter.name, scope, data, args)\n      } else {\n        rs = translate.restore(filter.name, scope, data, args)\n      }\n      if (rs.replace || rs.stop)\n        data = rs.data\n      return !rs.stop\n    })\n    return data\n  },\n  restore(scope, params, data) {\n    return this.executeFilter(scope, params, data, false)\n  },\n  execute(scope, params) {\n    return this.executor.apply(scope, params)\n  },\n  executeAll(scope, params) {\n    return this.executeFilter(scope, params, this.executor.apply(scope, params), true)\n  },\n  isSimple() {\n    return this.simplePath\n  }\n})\n\nconst cache = {}\n\nexport default function expression(expr, params, scopeProvider) {\n  let rs = cache[expr]\n  if (!rs) {\n    initStatus(params, scopeProvider)\n    cache[expr] = rs = new Expression(expr, params)\n    cleanStates()\n  }\n  return rs\n}\n\nexpression.cache = cache\n","import _ from 'utility'\n\nconst textContent = typeof document.createElement('div').textContent == 'string' ? 'textContent' : 'innerText'\n\nfunction firstEl(el) {\n  return _.isArrayLike(el) ? el[0] : el\n}\n\nfunction lastEl(el) {\n  return _.isArrayLike(el) ? el[el.length - 1] : el\n}\n\nfunction apply(coll, callback) {\n  _.isArrayLike(coll) ? _.each(coll, callback) : callback(coll)\n}\n\nlet dom = {\n  W3C: !!window.dispatchEvent,\n  inDoc(el, root) {\n    root = root || document.documentElement\n    if (root.contains)\n      return root.contains(el)\n    try {\n      while ((el = el.parentNode)) {\n        if (el === root)\n          return true\n      }\n    } catch (e) {}\n    return false\n  },\n  query(selectors, all) {\n    if (_.isString(selectors))\n      return all ? document.querySelectorAll(selectors) : document.querySelector(selectors)\n    return selectors\n  },\n  cloneNode(el, deep) {\n    function clone(el) {\n      return el.cloneNode(deep !== false)\n    }\n    return _.isArrayLike(el) ? _.map(el, clone) : clone(el)\n  },\n  parent(el) {\n    return firstEl(el).parentNode\n  },\n  next(el, all) {\n    el = lastEl(el)\n    return all ? el.nextSibling : el.nextElementSibling\n  },\n  prev(el, all) {\n    el = firstEl(el)\n    return all ? el.previousSibling : el.previousElementSibling\n  },\n  children(el, all) {\n    el = firstEl(el)\n    return all ? el.childNodes : el.children\n  },\n  remove(el) {\n    apply(el, (el) => {\n      let parent = el.parentNode\n      if (parent)\n        parent.removeChild(el)\n    })\n    return dom\n  },\n  before(el, target) {\n    target = firstEl(target)\n    let parent = target.parentNode\n    apply(el, (el) => {\n      parent.insertBefore(el, target)\n    })\n    return dom\n  },\n  after(el, target) {\n    target = lastEl(target)\n    let parent = target.parentNode\n\n    apply(el, parent.lastChild === target ? (el) => {\n      parent.insertBefore(el, target)\n    } : (() => {\n      let next = target.nextSibling\n      return (el) => {\n        parent.insertBefore(el, next)\n      }\n    })())\n    return dom\n  },\n  append(target, el) {\n    target = firstEl(target)\n    apply(el, (el) => {\n      target.appendChild(el)\n    })\n    return dom\n  },\n  prepend(target, el) {\n    target.firstChild ? dom.before(el, el.firstChild) : dom.append(target, el)\n    return dom\n  },\n  replace(source, target) {\n    let parent = source.parentNode\n    parent.replaceChild(target, source)\n  },\n  html(el, html) {\n    return arguments.length > 1 ? (el.innerHTML = html) : el.innerHTML\n  },\n  outerHtml(el) {\n    if (el.outerHTML)\n      return el.outerHTML\n\n    let container = document.createElement('div')\n    container.appendChild(el.cloneNode(true))\n    return container.innerHTML\n  },\n  text(el, text) {\n    if (el.nodeType == 3)\n      return arguments.length > 1 ? (el.data = text) : el.data\n    return arguments.length > 1 ? (el[textContent] = text) : el[textContent]\n  },\n  focus(el) {\n    el.focus()\n    return dom\n  }\n}\n\nexport default dom\n\n//====================== Query =============================\nif (!document.querySelectorAll) {\n  document.querySelectorAll = function querySelectorAll(selector) {\n    let doc = document,\n      head = doc.documentElement.firstChild,\n      styleTag = doc.createElement('STYLE')\n\n    head.appendChild(styleTag)\n    doc.__qsaels = []\n    if (styleTag.styleSheet) { // for IE\n      styleTag.styleSheet.cssText = selector + '{x:expression(document.__qsaels.push(this))}'\n    } else { // others\n      let textnode = document.createTextNode(selector + '{x:expression(document.__qsaels.push(this))}')\n      styleTag.appendChild(textnode)\n    }\n    window.scrollBy(0, 0)\n    return doc.__qsaels\n  }\n}\nif (!document.querySelector) {\n  document.querySelector = function querySelector(selectors) {\n    let elements = document.querySelectorAll(selectors)\n    return elements.length ? elements[0] : null\n  }\n}\n","import dom from './core'\nimport _ from 'utility'\n\nconst rfocusable = /^(?:input|select|textarea|button|object)$/i,\n  rclickable = /^(?:a|area)$/i\n\nexport default _.assign(dom, {\n  prop(el, name, value) {\n    name = dom.propFix[name] || name\n    let hook = dom.propHooks[name]\n\n    if (arguments.length == 2)\n      return hook && hook.get ? hook.get(el, name) : el[name]\n    hook && hook.set ? hook.set(el, name, value) : (el[name] = value)\n    return dom\n  },\n  attr(el, name, val) {\n    if (arguments.length == 2)\n      return el.getAttribute(name)\n    el.setAttribute(name, val)\n    return dom\n  },\n  removeAttr(el, name) {\n    el.removeAttribute(name)\n    return dom\n  },\n  checked(el, check) {\n    return _prop(el, 'checked', arguments.length > 1, check)\n  },\n  class(el, cls) {\n    return _prop(el, 'class', arguments.length > 1, cls)\n  },\n  addClass(el, cls) {\n    if (el.classList) {\n      el.classList.add(cls)\n    } else {\n      let cur = ` ${dom.prop(el, 'class')} `\n      if (cur.indexOf(` ${cls} `) === -1)\n        dom.class(el, _.trim(cur + cls))\n    }\n    return dom\n  },\n  removeClass(el, cls) {\n    el.classList ? el.classList.remove(cls) :\n      dom.class(el, _.trim(` ${dom.prop(el, 'class')} `.replace(new RegExp(` ${cls} `, 'g'), '')))\n    return dom\n  },\n  style(el, style) {\n    return _prop(el, 'style', arguments.length > 1, style)\n  },\n  propHooks: {\n    tabIndex: {\n      get: function(elem) {\n        let attributeNode = elem.getAttributeNode('tabindex')\n\n        return attributeNode && attributeNode.specified ? parseInt(attributeNode.value, 10) :\n          rfocusable.test(elem.nodeName) || rclickable.test(elem.nodeName) && elem.href ?\n          0 : undefined\n      }\n    }\n  },\n  propFix: {\n    tabindex: 'tabIndex',\n    readonly: 'readOnly',\n    'for': 'htmlFor',\n    'class': 'className',\n    maxlength: 'maxLength',\n    cellspacing: 'cellSpacing',\n    cellpadding: 'cellPadding',\n    rowspan: 'rowSpan',\n    colspan: 'colSpan',\n    usemap: 'useMap',\n    frameborder: 'frameBorder',\n    contenteditable: 'contentEditable'\n  }\n})\n\nfunction _prop(el, name, set, val) {\n  if (!set) return dom.prop(el, name)\n  dom.prop(el, name, val)\n  return dom\n}\n","import dom from './core'\nimport _ from 'utility'\n\nexport default _.assign(dom, {\n  css(el, name, value) {\n    let prop = /[_-]/.test(name) ? camelize(name) : name,\n      hook\n\n    name = cssName(prop) || prop\n    hook = cssHooks[prop] || cssDefaultHook\n    if (arguments.length == 2) {\n      let convert = value,\n        num;\n\n      if (name === 'background')\n        name = 'backgroundColor';\n      value = hook.get(el, name);\n      return convert !== false && isFinite((num = parseFloat(value))) ? num : value;\n    } else if (!value && value !== 0) {\n      el.style[name] = ''\n    } else {\n      if (isFinite(value) && !cssNumber[prop])\n        value += 'px'\n      hook.set(el, name, value)\n    }\n    return dom\n  },\n  position: function(el) {\n    let _offsetParent, _offset,\n      parentOffset = {\n        top: 0,\n        left: 0\n      };\n    if (dom.css(el, 'position') === 'fixed') {\n      _offset = el.getBoundingClientRect();\n    } else {\n      _offsetParent = offsetParent(el);\n      _offset = offset(el);\n      if (_offsetParent.tagName !== 'HTML')\n        parentOffset = offset(_offsetParent);\n      parentOffset.top += dom.css(_offsetParent, 'borderTopWidth', true);\n      parentOffset.left += dom.css(_offsetParent, 'borderLeftWidth', true);\n\n      parentOffset.top -= dom.scrollTop(_offsetParent);\n      parentOffset.left -= dom.scrollLeft(_offsetParent);\n    }\n    return {\n      top: _offset.top - parentOffset.top - dom.css(el, 'marginTop', true),\n      left: _offset.left - parentOffset.left - dom.css(el, 'marginLeft', true)\n    }\n  },\n  scrollTop(el, val) {\n    let win = getWindow(el);\n    if (arguments.length == 1) {\n      return (win ? 'scrollTop' in win ? win.scrollTop : root.pageYOffset : el.pageYOffset) || 0;\n    } else if (win) {\n      win.scrollTo(dom.scrollLeft(el), val);\n    } else {\n      el.pageYOffset = val;\n    }\n    return dom\n  },\n\n  scrollLeft(el, val) {\n    let win = getWindow(el);\n    if (arguments.length == 1) {\n      return (win ? 'scrollLeft' in win ? win.scrollLeft : root.pageXOffset : el.pageXOffset) || 0;\n    } else if (win) {\n      win.scrollTo(val, dom.scrollTop(el));\n    } else {\n      el.pageXOffset = val;\n    }\n    return dom\n  },\n\n  scroll(el, left, top) {\n    let win = getWindow(el);\n    if (arguments.length == 1) {\n      return {\n        left: dom.scrollLeft(el),\n        top: dom.scrollTop(el)\n      }\n    } else if (win) {\n      win.scrollTo(left, top);\n    } else {\n      el.pageXOffset = left;\n      el.pageYOffset = top;\n    }\n    return dom\n  }\n});\n\nlet cssFix = dom.cssFix = {\n    'float': dom.W3C ? 'cssFloat' : 'styleFloat'\n  },\n  cssHooks = dom.cssHooks = {},\n  cssDefaultHook = {},\n  prefixes = ['', '-webkit-', '-o-', '-moz-', '-ms-'],\n  cssNumber = {\n    animationIterationCount: true,\n    columnCount: true,\n    order: true,\n    flex: true,\n    flexGrow: true,\n    flexShrink: true,\n    fillOpacity: true,\n    fontWeight: true,\n    lineHeight: true,\n    opacity: true,\n    orphans: true,\n    widows: true,\n    zIndex: true,\n    zoom: true\n  },\n  cssShow = {\n    position: 'absolute',\n    visibility: 'hidden',\n    display: 'block'\n  },\n  rdisplayswap = /^(none|table(?!-c[ea]).+)/,\n  root = document.documentElement,\n  css = dom.css;\n\nfunction camelize(target) {\n  if (!target || target.indexOf('-') < 0 && target.indexOf('_') < 0) {\n    return target\n  }\n  return target.replace(/[-_][^-_]/g, function(match) {\n    return match.charAt(1).toUpperCase()\n  });\n}\n\nfunction cssName(name, host, camelCase) {\n  if (cssFix[name])\n    return cssFix[name]\n  host = host || root.style\n  for (var i = 0, n = prefixes.length; i < n; i++) {\n    camelCase = camelize(prefixes[i] + name)\n    if (camelCase in host) {\n      return (cssFix[name] = camelCase)\n    }\n  }\n  return null\n}\ncssDefaultHook.set = function cssDefaultSet(el, name, value) {\n  try {\n    el.style[name] = value\n  } catch (e) {}\n}\n\nlet cssDefaultGet;\nif (window.getComputedStyle) {\n  cssDefaultGet = cssDefaultHook.get = function cssDefaultGet(el, name) {\n    let val,\n      styles = getComputedStyle(el, null)\n\n    if (styles) {\n      val = name === 'filter' ? styles.getPropertyValue(name) : styles[name]\n      if (val === '')\n        val = el.style[name]\n    }\n    return val\n  }\n  cssHooks.opacity = {\n    get(el, name) {\n      let val = cssDefaultGet(el, name);\n      return val === '' ? '1' : ret;\n    }\n  }\n} else {\n  let rnumnonpx = /^-?(?:\\d*\\.)?\\d+(?!px)[^\\d\\s]+$/i,\n    rposition = /^(top|right|bottom|left)$/,\n    ralpha = /alpha\\([^)]*\\)/i,\n    ie8 = !!window.XDomainRequest,\n    salpha = 'DXImageTransform.Microsoft.Alpha',\n    border = {\n      thin: ie8 ? '1px' : '2px',\n      medium: ie8 ? '3px' : '4px',\n      thick: ie8 ? '5px' : '6px'\n    }\n\n  cssDefaultGet = cssDefaultHook.get = function cssDefaultGet(el, name) {\n    let currentStyle = el.currentStyle,\n      val = currentStyle[name];\n\n    if ((rnumnonpx.test(val) && !rposition.test(val))) {\n      let style = el.style,\n        left = style.left,\n        rsLeft = el.runtimeStyle.left;\n\n      el.runtimeStyle.left = currentStyle.left;\n      style.left = name === 'fontSize' ? '1em' : (val || 0);\n      val = style.pixelLeft + 'px';\n      style.left = left;\n      el.runtimeStyle.left = rsLeft;\n    }\n    if (val === 'medium') {\n      name = name.replace('Width', 'Style');\n      if (currentStyle[name] === 'none')\n        val = '0px';\n    }\n    return val === '' ? 'auto' : border[val] || val;\n  }\n  cssHooks.opacity = {\n    get(el, name) {\n      let alpha = el.filters.alpha || el.filters[salpha],\n        op = alpha && alpha.enabled ? alpha.opacity : 100;\n\n      return (op / 100) + ''\n    },\n    set(el, name, value) {\n      var style = el.style,\n        opacity = isFinite(value) && value <= 1 ? `alpha(opacity=${value * 100})` : '',\n        filter = style.filter || '';\n\n      style.zoom = 1;\n      style.filter = (ralpha.test(filter) ?\n        filter.replace(ralpha, opacity) : filter + ' ' + opacity).trim();\n      if (!style.filter)\n        style.removeAttribute('filter');\n    }\n  }\n}\n\n_.each(['top', 'left'], function(name) {\n  cssHooks[name] = {\n    get(el, name) {\n      let val = cssDefaultGet(el, name);\n      return /px$/.test(val) ? val : dom.position(el)[name] + 'px'\n    }\n  }\n})\n\n_.each(['Width', 'Height'], function(name) {\n  var method = name.toLowerCase(),\n    clientProp = 'client' + name,\n    scrollProp = 'scroll' + name,\n    offsetProp = 'offset' + name,\n    which = name == 'Width' ? ['Left', 'Right'] : ['Top', 'Bottom'];\n\n  function get(el, boxSizing) {\n    let val;\n\n    val = el[offsetProp] // border-box 0\n    if (boxSizing === 2) // margin-box 2\n      return val + css(el, 'margin' + which[0], true) + css(el, 'margin' + which[1], true);\n    if (boxSizing < 0) // padding-box  -2\n      val = val - css(el, 'border' + which[0] + 'Width', true) - css(el, 'border' + which[1] + 'Width', true);\n    if (boxSizing === -4) // content-box -4\n      val = val - css(el, 'padding' + which[0], true) - css(el, 'padding' + which[1], true);\n    return val\n  }\n\n  dom[method] = function(el) {\n    return get(el, -4);\n  }\n\n  dom['inner' + name] = function(el) {\n    return get(el, -2);\n  }\n  dom['outer' + name] = function(el, includeMargin) {\n    return get(el, includeMargin === true ? 2 : 0);\n  }\n})\n\nfunction offsetParent(el) {\n  var offsetParent = el.offsetParent\n  while (offsetParent && css(offsetParent, \"position\") === \"static\") {\n    offsetParent = offsetParent.offsetParent;\n  }\n  return offsetParent || root;\n}\n\nfunction offset(el) { //取得距离页面左右角的坐标\n  var box = {\n    left: 0,\n    top: 0\n  };\n\n  if (!el || !el.tagName || !el.ownerDocument)\n    return box;\n\n  var doc = el.ownerDocument,\n    body = doc.body,\n    root = doc.documentElement,\n    win = doc.defaultView || doc.parentWindow;\n\n  if (!dom.inDoc(el, root))\n    return box;\n\n  if (el.getBoundingClientRect)\n    box = el.getBoundingClientRect();\n\n  var clientTop = root.clientTop || body.clientTop,\n    clientLeft = root.clientLeft || body.clientLeft,\n    scrollTop = Math.max(win.pageYOffset || 0, root.scrollTop, body.scrollTop),\n    scrollLeft = Math.max(win.pageXOffset || 0, root.scrollLeft, body.scrollLeft);\n  return {\n    top: box.top + scrollTop - clientTop,\n    left: box.left + scrollLeft - clientLeft\n  }\n}\n\nfunction getWindow(node) {\n  return node.window && node.document ? node : node.nodeType === 9 ? node.defaultView || node.parentWindow : false;\n}\n","import dom from './core'\nimport _ from 'utility'\n\nfunction stringValue(val) {\n  if (_.isNil(val) || val === NaN)\n    return ''\n  if (!_.isString(val))\n    return val + ''\n  return val\n}\n\nexport default _.assign(dom, {\n  val(el, val) {\n    let hook = dom.valHooks[el.type || el.tagName.toLowerCase()]\n\n    if (arguments.length == 1)\n      return hook && hook.get ? hook.get(el) : el.value || ''\n\n    if (hook && hook.set) {\n      hook.set(el, val)\n    } else {\n      el.value = stringValue(val)\n    }\n    return dom\n  },\n  valHooks: {\n    option: {\n      get(el) {\n        let val = el.attributes.value\n\n        return !val || val.specified ? el.value : el.text\n      }\n    },\n\n    select: {\n      get(el) {\n        let signle = el.type == 'select-one',\n          index = el.selectedIndex\n\n        if (index < 0)\n          return signle ? undefined : []\n\n        let options = el.options,\n          option,\n          values = signle ? undefined : []\n\n        for (let i = 0, l = options.length; i < l; i++) {\n          option = options[i];\n          if (option.selected || i == index) {\n            if (signle) return dom.val(option);\n            values.push(dom.val(option))\n          }\n        }\n        return values\n      },\n\n      set(el, value) {\n        let signle = el.type == 'select-one',\n          options = el.options,\n          option, i, l, vl, val\n\n        el.selectedIndex = -1;\n\n        if (!_.isArray(value))\n          value = _.isNil(value) ? [] : [value]\n\n        if ((vl = value.length)) {\n          if (signle) vl = value.length = 1\n\n          let map = _.reverseConvert(value, () => false),\n            nr = 0\n\n          for (i = 0, l = options.length; i < l; i++) {\n            option = options[i]\n            val = dom.val(option)\n            if (_.isBoolean(map[val])) {\n              map[val] = option.selected = true\n              if (++nr === vl)\n                break\n            }\n            value = _.keys(map, (v) => v === true)\n          }\n        }\n        return signle ? value[0] : value\n      }\n    }\n  }\n})\n","import dom from './core'\nimport _ from 'utility'\n\nconst root = document.documentElement\n\nexport default _.assign(dom, {\n  hasListen(el, type, cb) {\n    return hasListen(el, type, cb)\n  },\n  on(el, type, cb, once) {\n    if (addListen(el, type, cb, once === true))\n      canBubbleUp[type] ? delegateEvent(type, cb) : bandEvent(el, type, cb)\n    return dom\n  },\n  once(el, type, cb) {\n    return dom.on(el, type, cb, true)\n  },\n  off(el, type, cb) {\n    if (removeListen(el, type, cb))\n      canBubbleUp[type] ? undelegateEvent(type, cb) : unbandEvent(el, type, cb)\n    return dom\n  },\n  dispatchEvent(el, type, opts) {\n    let hackEvent\n    if (document.createEvent) {\n      hackEvent = document.createEvent('Events')\n      hackEvent.initEvent(type, true, true, opts)\n      _.assign(hackEvent, opts)\n      el.dispatchEvent(hackEvent)\n    } else if (dom.inDoc(el)) { //IE6-8触发事件必须保证在DOM树中,否则报'SCRIPT16389: 未指明的错误'\n      hackEvent = document.createEventObject()\n      _.assign(hackEvent, opts)\n      el.fireEvent('on' + type, hackEvent)\n    }\n    return hackEvent\n  }\n})\n\nconst mouseEventReg = /^(?:mouse|contextmenu|drag)|click/,\n  keyEventReg = /^key/,\n  eventProps = ['altKey', 'bubbles', 'cancelable', 'ctrlKey', 'currentTarget', 'propertyName',\n    'eventPhase', 'metaKey', 'relatedTarget', 'shiftKey', 'target', 'view', 'which'\n  ],\n  eventFixHooks = {},\n  keyEventFixHook = {\n    props: ['char', 'charCode', 'key', 'keyCode'],\n    fix: function(event, original) {\n      if (event.which == null)\n        event.which = original.charCode != null ? original.charCode : original.keyCode\n    }\n  },\n  mouseEventFixHook = {\n    props: ['button', 'buttons', 'clientX', 'clientY', 'offsetX', 'offsetY', 'pageX', 'pageY', 'screenX', 'screenY', 'toElement'],\n    fix: function(event, original) {\n      var eventDoc, doc, body,\n        button = original.button\n\n      if (event.pageX == null && original.clientX != null) {\n        eventDoc = event.target.ownerDocument || document\n        doc = eventDoc.documentElement\n        body = eventDoc.body\n        event.pageX = original.clientX + (doc && doc.scrollLeft || body && body.scrollLeft || 0) - (doc && doc.clientLeft || body && body.clientLeft || 0)\n        event.pageY = original.clientY + (doc && doc.scrollTop || body && body.scrollTop || 0) - (doc && doc.clientTop || body && body.clientTop || 0)\n      }\n      if (!event.which && button !== undefined)\n        event.which = (button & 1 ? 1 : (button & 2 ? 3 : (button & 4 ? 2 : 0)))\n    }\n  }\n\nclass Event {\n  constructor(event) {\n    let type = event.type,\n      fixHook = eventFixHooks[type],\n      i, prop\n\n    this.originalEvent = event\n    this.type = event.type\n    this.returnValue = !(event.defaultPrevented || event.returnValue === false || event.getPreventDefault && event.getPreventDefault())\n    this.timeStamp = event && event.timeStamp || (new Date() + 0)\n\n    i = eventProps.length\n    while (i--) {\n      prop = eventProps[i]\n      this[prop] = event[prop]\n    }\n\n    if (!fixHook)\n      eventFixHooks[type] = fixHook = mouseEventReg.test(type) ? mouseEventFixHook : keyEventReg.test(type) ? keyEventFixHook : {}\n\n    if (fixHook.props) {\n      let props = fixHook.props\n      i = props.length\n      while (i--) {\n        prop = props[i]\n        this[prop] = event[prop]\n      }\n    }\n\n    if (!this.target)\n      this.target = event.srcElement || document\n    if (this.target.nodeType == 3)\n      this.target = this.target.parentNode\n\n    if (fixHook.fix)\n      fixHook.fix(this, event)\n  }\n\n  preventDefault() {\n    let e = this.originalEvent\n    this.returnValue = false\n    if (e) {\n      e.returnValue = false\n      if (e.preventDefault)\n        e.preventDefault()\n    }\n  }\n\n  stopPropagation() {\n    let e = this.originalEvent\n    this.cancelBubble = true\n    if (e) {\n      e.cancelBubble = true\n      if (e.stopPropagation)\n        e.stopPropagation()\n    }\n  }\n\n  stopImmediatePropagation() {\n    let e = this.originalEvent\n    this.isImmediatePropagationStopped = true\n    if (e.stopImmediatePropagation)\n      e.stopImmediatePropagation()\n    this.stopPropagation()\n  }\n}\n\nconst listenKey = '__LISTEN__'\n\nfunction addListen(el, type, handler, once) {\n  if (!_.isFunc(handler))\n    throw TypeError('Invalid Event Handler')\n\n  let listens = el[listenKey],\n    handlers,\n    ret = false\n\n  if (!listens)\n    el[listenKey] = listens = {}\n\n  if (!(handlers = listens[type])) {\n    listens[type] = handlers = new _.LinkedList()\n    ret = true\n  } else if (handlers.contains(handler)) {\n    return false\n  }\n  handlers.push({\n    handler: handler,\n    once: once\n  })\n  return ret\n}\n\nfunction removeListen(el, type, handler) {\n  let listens = el[listenKey],\n    handlers = listens && listens[type]\n\n  if (handlers && !handlers.empty()) {\n    handlers.remove(handler)\n    return handlers.empty()\n  }\n  return false\n}\n\nfunction getListens(el, type) {\n  let listens = el[listenKey]\n\n  return listens && listens[type]\n}\n\nfunction hasListen(el, type, handler) {\n  let listens = el[listenKey],\n    handlers = listens && listens[type]\n\n  if (handlers)\n    return handler ? handlers.contains(handler) : !handlers.empty()\n  return false\n}\n\nconst bind = dom.W3C ? function(el, type, fn, capture) {\n    el.addEventListener(type, fn, capture)\n  } : function(el, type, fn) {\n    el.attachEvent('on' + type, fn)\n  },\n  unbind = dom.W3C ? function(el, type, fn) {\n    el.removeEventListener(type, fn)\n  } : function(el, type, fn) {\n    el.detachEvent('on' + type, fn)\n  },\n  canBubbleUpArray = ['click', 'dblclick', 'keydown', 'keypress', 'keyup',\n    'mousedown', 'mousemove', 'mouseup', 'mouseover', 'mouseout', 'wheel', 'mousewheel',\n    'input', 'change', 'beforeinput', 'compositionstart', 'compositionupdate', 'compositionend',\n    'select', 'cut', 'copy', 'paste', 'beforecut', 'beforecopy', 'beforepaste', 'focusin',\n    'focusout', 'DOMFocusIn', 'DOMFocusOut', 'DOMActivate', 'dragend', 'datasetchanged'\n  ],\n  canBubbleUp = {},\n  focusBlur = {\n    focus: true,\n    blur: true\n  },\n  eventHooks = {},\n  eventHookTypes = {},\n  delegateEvents = {}\n\n_.each(canBubbleUpArray, (name) => {\n  canBubbleUp[name] = true\n})\nif (!dom.W3C) {\n  delete canBubbleUp.change\n  delete canBubbleUp.select\n}\n\nfunction bandEvent(el, type, cb) {\n  let hook = eventHooks[type]\n  if (!hook || !hook.bind || hook.bind(el, type, cb) !== false)\n    bind(el, hook ? hook.type || type : type, dispatch, !!focusBlur[type])\n}\n\nfunction unbandEvent(el, type, cb) {\n  let hook = eventHooks[type]\n  if (!hook || !hook.unbind || hook.unbind(el, type, cb) !== false)\n    unbind(el, hook ? hook.type || type : type, dispatch)\n}\n\nfunction delegateEvent(type, cb) {\n  if (!delegateEvents[type]) {\n    bandEvent(root, type, cb)\n    delegateEvents[type] = 1\n  } else {\n    delegateEvents[type]++;\n  }\n}\n\nfunction undelegateEvent(type, cb) {\n  if (delegateEvents[type]) {\n    delegateEvents[type]--;\n    if (!delegateEvents[type])\n      unbandEvent(root, type, cb)\n  }\n}\n\nlet last = new Date()\n\nfunction dispatchElement(el, event, isMove) {\n  let handlers = getListens(el, event.type)\n\n  if (handlers) {\n    let handler, i, l\n\n    event.currentTarget = el\n    event.isImmediatePropagationStopped = false\n    handlers.each((handler) => {\n      if (isMove) {\n        let now = new Date()\n        if (now - last > 16) {\n          handler.handler.call(el, event)\n          last = now\n        }\n      } else {\n        handler.handler.call(el, event)\n      }\n\n      if (handler.once)\n        dom.off(el, event.type, handler.handler)\n      return !event.isImmediatePropagationStopped\n    })\n  }\n}\n\nfunction dispatchEvent(el, type, event) {\n  if (el.disabled !== true || type !== 'click') {\n    let isMove = /move|scroll/.test(type)\n    if (canBubbleUp[type]) {\n      while (el && el.getAttribute && !event.cancelBubble) {\n        dispatchElement(el, event, isMove)\n        el = el.parentNode\n      }\n    } else\n      dispatchElement(el, event, isMove)\n  }\n}\n\nfunction dispatch(event) {\n  event = new Event(event)\n  let type = event.type,\n    el = event.target\n  if (eventHookTypes[type]) {\n    type = eventHookTypes[type]\n    let hook = eventHooks[type]\n    if (hook && hook.fix && hook.fix(el, event) === false)\n      return\n    event.type = type\n    dispatchEvent(el, type, event)\n  } else {\n    dispatchEvent(el, type, event)\n  }\n}\n\n//针对firefox, chrome修正mouseenter, mouseleave\nif (!('onmouseenter' in root)) {\n  _.each({\n    mouseenter: 'mouseover',\n    mouseleave: 'mouseout'\n  }, function(origType, fixType) {\n    eventHooks[origType] = {\n      type: fixType,\n      fix(elem, event, fn) {\n        let t = event.relatedTarget\n        return !t || (t !== elem && !(elem.compareDocumentPosition(t) & 16))\n      }\n    }\n  })\n}\n//针对IE9+, w3c修正animationend\n_.each({\n  AnimationEvent: 'animationend',\n  WebKitAnimationEvent: 'webkitAnimationEnd'\n}, function(construct, fixType) {\n  if (window[construct] && !eventHooks.animationend) {\n    eventHooks.animationend = {\n      type: fixType\n    }\n  }\n})\n\n//针对IE6-8修正input\nif (!('oninput' in document.createElement('input'))) {\n  delete canBubbleUp.input\n  eventHooks.input = {\n    type: 'propertychange',\n    fix(elem, event) {\n      return event.propertyName == 'value'\n    }\n  }\n  eventHooks.change = {\n    bind(elem) {\n      if (elem.type == 'checkbox' || elem.type == 'radio') {\n        if (!elem.$onchange) {\n          elem.$onchange = function(event) {\n            event.type = 'change'\n            dispatchEvent(elem, 'change', event)\n          }\n          dom.on(elem, 'click', elem.$onchange)\n        }\n        return false\n      }\n    },\n    unbind(elem) {\n      if (elem.type == 'checkbox' || elem.type == 'radio') {\n        dom.off(elem, 'click', elem.$onchange)\n        return false\n      }\n    }\n  }\n} else if (navigator.userAgent.indexOf('MSIE 9') !== -1) {\n  eventHooks.input = {\n      type: 'input',\n      fix(elem) {\n        elem.oldValue = elem.value\n      }\n    }\n    // http://stackoverflow.com/questions/6382389/oninput-in-ie9-doesnt-fire-when-we-hit-backspace-del-do-cut\n  document.addEventListener('selectionchange', function(event) {\n    var actEl = document.activeElement\n    if (actEl.tagName === 'TEXTAREA' || (actEl.tagName === 'INPUT' && actEl.type === 'text')) {\n      if (actEl.value == actEl.oldValue)\n        return\n      actEl.oldValue = actEl.value\n      if (hasListen(actEl, 'input')) {\n        event = new Event(event)\n        event.type = 'input'\n        dispatchEvent(actEl, 'input', event)\n      }\n    }\n  })\n}\n\n\nif (document.onmousewheel === void 0) {\n  /* IE6-11 chrome mousewheel wheelDetla 下 -120 上 120\n   firefox DOMMouseScroll detail 下3 上-3\n   firefox wheel detlaY 下3 上-3\n   IE9-11 wheel deltaY 下40 上-40\n   chrome wheel deltaY 下100 上-100 */\n  let fixWheelType = document.onwheel ? 'wheel' : 'DOMMouseScroll',\n    fixWheelDelta = fixWheelType === 'wheel' ? 'deltaY' : 'detail'\n  eventHooks.mousewheel = {\n    type: fixWheelType,\n    fix(elem, event) {\n      event.wheelDeltaY = event.wheelDelta = event[fixWheelDelta] > 0 ? -120 : 120\n      event.wheelDeltaX = 0\n      return true\n    }\n  }\n}\n_.each(eventHooks, function(hook, type) {\n  eventHookTypes[hook.type || type] = type\n})\n","import dom from './event'\n\nlet readyList = [],\n  isReady,\n  root = document.documentElement\n\nfunction fireReady(fn) {\n  isReady = true\n  while (fn = readyList.shift())\n    fn()\n}\n\nif (document.readyState === 'complete') {\n  setTimeout(fireReady)\n} else if (document.addEventListener) {\n  document.addEventListener('DOMContentLoaded', fireReady)\n} else if (document.attachEvent) {\n  document.attachEvent('onreadystatechange', function() {\n    if (document.readyState === 'complete')\n      fireReady()\n  })\n  if (root.doScroll && window.frameElement === null && window.external) {\n    function doScrollCheck() {\n      try {\n        root.doScroll('left')\n        fireReady()\n      } catch (e) {\n        setTimeout(doScrollCheck)\n      }\n    }\n    doScrollCheck()\n  }\n}\n\ndom.on(window, 'load', fireReady);\n\ndom.ready = function(fn) {\n  !isReady ? readyList.push(fn) : fn()\n  return dom\n}\n\nexport default dom\n","import TextParser from './TextParser'\nimport DirectiveParser from './DirectiveParser'\nimport Template from './Template'\nimport {\n  Directive,\n  DirectiveGroup,\n  Text\n} from '../binding'\nimport _ from 'utility'\nimport dom from '../dom'\nimport log from '../log'\nimport config from '../config'\n\nconfig.register('directiveParser', new DirectiveParser(), [DirectiveParser])\nconfig.register('TextParser', TextParser, TextParser, true)\n\nfunction _clone(el) {\n  let elem = el.cloneNode(false)\n  if (el.nodeType == 1)\n    _.each(el.childNodes, c => {\n      elem.appendChild(_clone(c))\n    })\n  return elem\n}\n\nfunction clone(el) {\n  return _.isArrayLike(el) ? _.map(el, _clone) : _clone(el)\n}\n\nconst TEXT = 1,\n  DIRECTIVE = 2,\n  DIRECTIVE_GROUP = 3\n\nconst DomParser = _.dynamicClass({\n  constructor(el, clone) {\n    this.el = this.parseEl(el, clone)\n    this.directiveParser = config.get('directiveParser')\n    this.TextParser = config.get('TextParser')\n    this.parse()\n  },\n  complie(scope) {\n    let el = clone(this.el),\n      df = document.createDocumentFragment(),\n      tpl = new Template(scope)\n\n    dom.append(df, el)\n\n    tpl.el = el\n    tpl.bindings = this.parseBindings(this.bindings, scope, this.parseEls(el), tpl)\n    return tpl\n  },\n  parseBindings(descs, scope, els, tpl) {\n    return _.map(descs, (desc) => {\n      let type = desc.type,\n        cfg = {\n          el: els[desc.index],\n          scope: scope,\n          tpl: tpl\n        }\n\n      if (type === TEXT) {\n        cfg.expression = desc.expression\n        return new Text(cfg)\n      }\n\n      cfg.block = desc.block\n      cfg.children = desc.children ? this.parseBindings(desc.children || [], scope, els) : undefined\n\n      if (type === DIRECTIVE) {\n        cfg.expression = desc.expression\n        cfg.attr = desc.attr\n        cfg.domParser = desc.domParser\n        cfg.independent = desc.independent\n        cfg.group = undefined\n        return new desc.directive(cfg)\n      } else {\n        var group = new DirectiveGroup(cfg)\n        group._setDirectives(_.map(desc.directives, desc => {\n          return new desc.directive({\n            el: cfg.el,\n            scope: scope,\n            expression: desc.expression,\n            attr: desc.attr,\n            tpl: tpl,\n            group: group\n          })\n        }))\n        return group\n      }\n    })\n  },\n  parseEls(el) {\n    let index = 0,\n      elStatus = this.elStatus\n    return this.eachDom(el, [], (el, els) => {\n      els.push(el)\n      return elStatus[index++].marked && els\n    }, (el, els) => {\n      els.push(el)\n      index++\n    })\n  },\n  parseEl(el, clone) {\n    if (_.isString(el)) {\n      el = _.trim(el)\n      if (el.charAt(0) == '<') {\n        let templ = document.createElement('div')\n        dom.html(templ, el)\n        el = templ.childNodes\n      }\n      el = dom.query(el)\n    } else if (clone) {\n      el = dom.cloneNode(el)\n    }\n    return el\n  },\n  eachDom(el, data, elemHandler, textHandler) {\n    if (_.isArrayLike(el)) {\n      _.each(el, (el) => {\n        this._eachDom(el, data, elemHandler, textHandler)\n      })\n    } else {\n      this._eachDom(el, data, elemHandler, textHandler)\n    }\n    return data\n  },\n  _eachDom(el, data, elemHandler, textHandler) {\n    switch (el.nodeType) {\n      case 1:\n        if (data = elemHandler(el, data))\n          _.each(_.map(el.childNodes, (n) => n), (el) => {\n            this._eachDom(el, data, elemHandler, textHandler)\n          })\n        break\n      case 3:\n        textHandler(el, data)\n        break\n    }\n  },\n  parse() {\n    let elStatus = [],\n      index = 0,\n      TextParser = this.TextParser,\n      directiveParser = this.directiveParser\n\n    function markEl(el, marked) {\n      if (el) {\n        elStatus.push({\n          el: el,\n          marked: marked\n        })\n        index++\n      }\n      return el\n    }\n    this.elStatus = elStatus\n    this.bindings = this.eachDom(this.el, [], (el, bindings) => {\n      let directives = [],\n        block = false,\n        independent = false,\n        desc\n\n      _.each(el.attributes, (attr) => {\n        let name = attr.name,\n          directive\n\n        if (!directiveParser.isDirective(name))\n          return\n\n        if (!(directive = directiveParser.getDirective(name))) {\n          log.warn(`Directive[${name}] is undefined`)\n          return\n        }\n        let desc = {\n          type: DIRECTIVE,\n          index: index,\n          expression: attr.value,\n          directive: directive,\n          attr: name,\n          block: Directive.isBlock(directive),\n          independent: Directive.isIndependent(directive)\n        }\n        if (desc.independent) {\n          desc.block = block = independent = true\n          directives = [desc]\n          return false\n        } else if (desc.block) {\n          block = true\n        }\n        directives.push(desc)\n      })\n\n      if (!directives.length) {\n        markEl(el, true)\n        return bindings\n      }\n\n      if (directives.length == 1) {\n        desc = directives[0]\n      } else {\n        desc = {\n          type: DIRECTIVE_GROUP,\n          index: index,\n          directives: directives.sort((a, b) => {\n            return (Directive.getPriority(b.directive) - Directive.getPriority(a.directive)) || 0\n          }),\n          block: block,\n          independent: independent\n        }\n      }\n      desc.children = !block && []\n\n      bindings.push(desc)\n      if (independent) {\n        let childEl = dom.cloneNode(el, false)\n        dom.removeAttr(childEl, directives[0].attr)\n        dom.append(childEl, _.map(el.childNodes, (n) => n))\n        desc.domParser = new DomParser(childEl, false)\n      }\n      markEl(el, !block)\n      return desc.children\n    }, (el, bindings) => {\n      let expr = dom.text(el),\n        parser = new TextParser(expr),\n        token,\n        i = 0\n\n      let p = el.parentNode,\n        l = p.childNodes.length,\n        ii = index\n      while (token = parser.nextToken()) {\n        if (i < token.start)\n          markEl(this.insertNotBlankText(expr.substring(i, token.start), el), false)\n        bindings.push({\n          type: TEXT,\n          index: index,\n          expression: token.token\n        })\n        markEl(this.insertText('binding', el), false)\n        i = token.end\n      }\n      if (i) {\n        markEl(this.insertNotBlankText(expr.substr(i), el), false)\n        dom.remove(el)\n      } else {\n        markEl(el, false)\n      }\n    })\n\n  },\n  insertNotBlankText(content, before) {\n    return (content) ? this.insertText(content || '&nbsp;', before) : undefined\n  },\n  insertText(content, before) {\n    let el = document.createTextNode(content)\n    dom.before(el, before)\n    return el\n  }\n})\nexport default DomParser\n","import _ from 'utility'\n\nconst regHump = /^[a-z]|[_-]+[a-zA-Z]/g\n\nfunction _hump(k) {\n  return k.charAt(k.length - 1).toUpperCase()\n}\n\nexport function hump(str) {\n  return str.replace(regHump, _hump)\n}\n\nexport const YieId = _.dynamicClass({\n  constructor() {\n    this.doned = false\n    this.thens = []\n  },\n  then(callback) {\n    if (this.doned)\n      callback()\n    else\n      this.thens.push(callback)\n  },\n  done() {\n    if (!this.doned) {\n      this.doned = true\n      let thens = this.thens;\n      for (let i = 0, l = thens.length; i < l; i++) {\n        thens[i]()\n      }\n    }\n  },\n  isDone() {\n    return this.doned\n  }\n})\n","import Template from './template'\nimport expression from './expression'\nimport translate from './translate'\nimport {\n  Directive\n} from './binding'\nimport directives from './directives'\nimport _ from 'utility'\nimport observer from 'observer'\nimport * as util from './util'\nimport dom from './dom'\nimport config from './config'\nimport logger from './log'\n\n_.assign(Template, {\n  translate,\n  expression,\n  Directive,\n  directives,\n  config,\n  logger,\n  init(cfg) {\n    observer.init(cfg)\n    config.config(cfg)\n  }\n}, dom, util)\n\nfunction assign(target, source, alias) {\n  observer.each(source, (v, k) => {\n    target[alias[k] || k] = v\n  })\n  return target\n}\nlet tpl = function(el, cfg) {\n  return new Template(el, cfg)\n}\n_.assign(tpl, Template, {\n  Template: Template,\n  utility: _,\n  observer: observer\n})\nassign(_.assign(tpl, _), observer.observer, {\n  on: 'observe',\n  un: 'unobserve',\n  hasListen: 'isObserved'\n})\nexport default tpl\n","import _ from 'utility'\n\nconst reg = /{([^{]+)}/g\nexport default _.dynamicClass({\n  constructor(text) {\n    this.text = text\n    this.index = 0\n  },\n  nextToken() {\n    let token = reg.exec(this.text)\n\n    if (token) {\n      let index = this.index = reg.lastIndex\n\n      return {\n        token: token[1],\n        start: index - token[0].length,\n        end: index\n      }\n    }\n    this.index = 0\n  }\n})\n","import _ from 'utility'\n\nexport default new _.Configuration()\n","import _ from 'utility'\nimport observer from 'observer'\nimport config from '../config'\n\nconst Binding = _.dynamicClass({\n  statics: {\n    commentCfg: 'generateComments'\n  },\n  constructor(cfg) {\n    this._scope = observer.obj(cfg.scope)\n    this.el = cfg.el\n    this.tpl = cfg.tpl\n  },\n  expressionScopeProvider(expr, realScope) {\n    return realScope ? `$binding.exprScope('${expr}')` : '$scope'\n  },\n  scope() {\n    let scope = this._scope\n    return observer.proxy(scope) || scope\n  },\n  realScope() {\n    return this._scope\n  },\n  propScope(prop) {\n    let scope = this.realScope(),\n      parent\n\n    while ((parent = scope.$parent) && !_.hasOwnProp(scope, prop)) {\n      scope = parent\n    }\n    return observer.proxy(scope) || scope\n  },\n  exprScope(expr) {\n    return this.propScope(_.parseExpr(expr)[0])\n  },\n  observe(expr, callback) {\n    observer.on(this.exprScope(expr), expr, callback)\n  },\n  unobserve(expr, callback) {\n    observer.un(this.exprScope(expr), expr, callback)\n  },\n  get(expr) {\n    return _.get(this.realScope(), expr)\n  },\n  has(expr) {\n    return _.has(this.realScope(), expr)\n  },\n  set(expr, value) {\n    _.set(this.scope(), expr, value)\n  },\n  bind() {\n    throw new Error('abstract method')\n  },\n  unbind() {\n    throw new Error('abstract method')\n  },\n  destroy() {}\n})\nconfig.register(Binding.commentCfg, true)\nexport default Binding\n","import _ from 'utility'\n\nexport default new _.Logger('tpl', 'debug')\n","import _ from 'utility'\nimport log from './log'\n\nconst slice = Array.prototype.slice,\n  translations = {}\n\nconst translate = {\n  register(name, desc) {\n    if (translations[name])\n      throw Error(`Translate[${name}] is existing`)\n    if (_.isFunc(desc))\n      desc = {\n        transform: desc\n      }\n    desc.type = desc.type || 'normal'\n    translations[name] = desc\n    log.debug(`register Translate[${desc.type}:${name}]`)\n  },\n\n  get(name) {\n    return translations[name]\n  },\n\n  transform(name, scope, data, args, restore) {\n    let f = translations[name],\n      type = f && f.type,\n      fn = f && (restore ? f.restore : f.transform)\n\n    if (!fn) {\n      log.warn(`Translate[${name}].${restore ? 'Restore' : 'Transform'} is undefined`)\n    } else {\n      data = fn.apply(scope, [data].concat(args))\n    }\n    return {\n      stop: type == 'event' && data === false,\n      data: data,\n      replace: type !== 'event'\n    }\n  },\n\n  restore(name, data, args) {\n    return this.apply(name, data, args, false)\n  }\n}\n\nexport default translate\n\nexport const keyCodes = {\n  esc: 27,\n  tab: 9,\n  enter: 13,\n  space: 32,\n  'delete': [8, 46],\n  up: 38,\n  left: 37,\n  right: 39,\n  down: 40\n}\n\nlet eventTranslates = {\n  key(e) {\n    let which = e.which,\n      k\n\n    for (let i = 1, l = arguments.length; i < l; i++) {\n      k = arguments[i]\n      if (which == (keyCodes[k] || k))\n        return true\n    }\n    return false\n  },\n  stop(e) {\n    e.stopPropagation()\n  },\n  prevent(e) {\n    e.preventDefault()\n  },\n  self(e) {\n    return e.target === e.currentTarget\n  }\n}\n\n_.each(eventTranslates, (fn, name) => {\n  translate.register(name, {\n    type: 'event',\n    transform: fn\n  })\n})\n\nlet nomalTranslates = {\n  json: {\n    transform(value, indent) {\n      return typeof value === 'string' ? value : JSON.stringify(value, null, Number(indent) || 2)\n    },\n    restore(value) {\n      try {\n        return JSON.parse(value)\n      } catch (e) {\n        return value\n      }\n    }\n  },\n  trim: {\n    transform: _.trim,\n    restore: _.trim\n  },\n\n  capitalize(value) {\n    if (_.isString(value))\n      return value.charAt(0).toUpperCase() + value.slice(1)\n    return value\n  },\n\n  uppercase(value) {\n    return _.isString(value) ? value.toUpperCase() : value\n  },\n\n  lowercase(value) {\n    return _.isString(value) ? value.toLowerCase() : value\n  },\n\n  currency(value, currency) {\n    value = parseFloat(value)\n    if (!isFinite(value) || (!value && value !== 0)) return ''\n    currency = currency != null ? currency : '$'\n    var stringified = Math.abs(value).toFixed(2)\n    var _int = stringified.slice(0, -3)\n    var i = _int.length % 3\n    var head = i > 0 ? (_int.slice(0, i) + (_int.length > 3 ? ',' : '')) : ''\n    var _float = stringified.slice(-3)\n    var sign = value < 0 ? '-' : ''\n    return sign + currency + head + _int.slice(i).replace(digitsRE, '$1,') + _float\n  },\n  plural: {\n    transform(value) {\n      return _.isString(value) ? _.plural(value) : value\n    },\n    restore(value) {\n      return _.isString(value) ? _.singular(value) : value\n    }\n  },\n  singular: {\n    transform(value, plural) {\n      return _.isString(value) ? _.singular(value) : value\n    },\n    restore(value) {\n      return _.isString(value) ? _.plural(value) : value\n    }\n  },\n  unit: {\n    transform(value, unit, format, plural) {\n      if (plural !== false && value != 1 && value != 0)\n        unit = _.plural(unit)\n      return format ? _.format(format, value, unit) : value + unit\n    }\n  },\n  format: {\n    transform(value, format) {\n      let args = [format, value].concat(Array.prototype.slice.call(arguments, 2))\n      return _.format.apply(_, args)\n    }\n  }\n}\n_.each(nomalTranslates, (f, name) => {\n  translate.register(name, f)\n})\n","import Binding from './Binding'\nimport expression from '../expression'\nimport _ from 'utility'\nimport dom from '../dom'\nimport config from '../config'\nimport log from '../log'\n\nconst expressionArgs = ['$scope', '$el', '$tpl', '$binding']\n\n\nexport default _.dynamicClass({\n  extend: Binding,\n  constructor(cfg) {\n    this.super(arguments)\n    this.expression = expression(cfg.expression, expressionArgs, this.expressionScopeProvider)\n    if (config.get(Binding.commentCfg)) {\n      this.comment = document.createComment('Text Binding ' + cfg.expression)\n      dom.before(this.comment, this.el)\n    }\n    this.observeHandler = this.observeHandler.bind(this)\n  },\n  value() {\n    let scope = this.scope()\n    return this.expression.executeAll(scope, [scope, this.el, this.tpl, this])\n  },\n  bind() {\n    _.each(this.expression.identities, (ident) => {\n      this.observe(ident, this.observeHandler)\n    })\n    this.update(this.value())\n  },\n  unbind() {\n    _.each(this.expression.identities, (ident) => {\n      this.unobserve(ident, this.observeHandler)\n    })\n  },\n  observeHandler(attr, val) {\n    if (this.expression.isSimple()) {\n      var scope = this.scope()\n      this.update(this.expression.executeFilter(scope, [scope, this.el, this.tpl, this], val))\n    } else {\n      this.update(this.value())\n    }\n  },\n  update(val) {\n    if (_.isNil(val)) val = ''\n    if (val !== dom.text(this.el))\n      dom.text(this.el, val)\n  }\n})\n","import Binding from './Binding'\nimport _ from 'utility'\nimport dom from '../dom'\nimport config from '../config'\nimport log from '../log'\n\nconst directives = {}\n\nconst Directive = _.dynamicClass({\n  extend: Binding,\n  independent: false,\n  block: false,\n  priority: 5,\n  constructor(cfg) {\n    this.super(arguments)\n    this.expr = cfg.expression\n    this.attr = cfg.attr\n    this.children = cfg.children\n    this.domParser = cfg.domParser\n    this.group = cfg.group\n    if (config.get(Binding.commentCfg)) {\n      this.comment = document.createComment(`Directive[${this.attr}]: ${this.expr}`)\n      dom.before(this.comment, this.el)\n    }\n  },\n  bindChildren() {\n    if (this.children)\n      _.each(this.children, (directive) => {\n        directive.bind()\n      })\n  },\n  bind() {\n    this.bindChildren()\n  },\n  unbindChildren() {\n    if (this.children)\n      _.each(this.children, (directive) => {\n        directive.unbind()\n      })\n  },\n  unbind() {\n    this.unbindChildren()\n  },\n  statics: {\n    getPriority(directive) {\n      return directive.prototype.priority\n    },\n    isBlock(directive) {\n      return directive.prototype.block\n    },\n    isIndependent(directive) {\n      return directive.prototype.independent\n    },\n    getDirective(name) {\n      return directives[name.toLowerCase()]\n    },\n    isDirective(obj) {\n      return _.isExtendOf(obj, Directive)\n    },\n    register(name, option) {\n      let directive\n\n      name = name.toLowerCase()\n\n      if (_.isObject(option)) {\n        option.extend = option.extend || Directive\n        directive = _.dynamicClass(option)\n      } else if (_.isFunc(option) && _.isExtendOf(option, Directive)) {\n        directive = option\n      } else {\n        throw TypeError(`Invalid Directive[${name}] ${option}`)\n      }\n\n      if (name in directives)\n        throw new Error(`Directive[${name}] is existing`)\n\n      directives[name] = directive\n      log.debug('register Directive[%s]', name)\n      return directive\n    }\n  }\n})\nexport default Directive\n","import Binding from './Binding'\nimport _ from 'utility'\n\nexport default _.dynamicClass({\n  extend: Binding,\n  constructor(cfg) {\n    this.super(arguments)\n    this.children = cfg.children\n    this.bindedCount = 0\n    this.bindedChildren = false\n    this._bind = this._bind.bind(this)\n  },\n  _setDirectives(directives) {\n    this.directives = directives\n    this.directiveCount = directives.length\n  },\n  _bind() {\n    let idx = this.bindedCount\n    if (idx < this.directiveCount) {\n      let directive = this.directives[idx],\n        ret = directive.bind()\n      this.bindedCount++;\n      (ret && ret instanceof _.YieId) ? ret.then(this._bind): this._bind()\n    } else if (this.children) {\n      _.each(this.children, (directive) => {\n        directive.bind()\n      })\n      this.bindedChildren = true\n    }\n  },\n  bind() {\n    this._bind()\n  },\n  unbind() {\n    let directives = this.directives,\n      i = this.bindedCount\n\n    if (this.bindedChildren) {\n      _.each(this.children, (directive) => {\n        directive.unbind()\n      })\n      this.bindedChildren = false\n    }\n    while (i--) {\n      directives[i].unbind()\n    }\n    this.bindedCount = 0\n  }\n})\n","import {\n  Directive\n} from '../binding'\nimport _ from 'utility'\nimport config from '../config'\n\nconfig.register('directiveReg', /^tpl-/, [RegExp])\n\nexport default _.dynamicClass({\n  constructor() {\n    this.reg = config.get('directiveReg')\n  },\n  isDirective(attr) {\n    return this.reg.test(attr)\n  },\n  getDirective(attr) {\n    return Directive.getDirective(attr.replace(this.reg, ''))\n  }\n})\n","import _ from 'utility'\nimport observer from 'observer'\nimport dom from '../dom'\n\nexport default _.dynamicClass({\n  constructor(scope) {\n    this.scope = scope\n    this.proxyHandler = this.proxyHandler.bind(this)\n    observer.proxy.on(scope, this.proxyHandler)\n  },\n  proxyHandler(obj, proxy) {\n    this.scope = proxy || obj\n  },\n  before(target, bind) {\n    if (bind !== false)\n      this.bind()\n    dom.before(this.el, dom.query(target))\n    return this\n  },\n  after(target, bind) {\n    if (bind !== false)\n      this.bind()\n    dom.after(this.el, dom.query(target))\n    return this\n  },\n  prependTo(target, bind) {\n    if (bind !== false)\n      this.bind()\n    dom.prepend(dom.query(target), this.el)\n    return this\n  },\n  appendTo(target, bind) {\n    if (bind !== false)\n      this.bind()\n    dom.append(dom.query(target), this.el)\n    return this\n  },\n  remove(unbind) {\n    dom.remove(this.el)\n    if (unbind !== false)\n      this.unbind()\n  },\n  bind() {\n    if (!this.binded) {\n      _.each(this.bindings, (bind) => {\n        bind.bind()\n      })\n      this.binded = true\n    }\n    return this\n  },\n  unbind() {\n    if (this.binded) {\n      _.each(this.bindings, (bind) => {\n        bind.unbind()\n      })\n      this.binded = false\n    }\n    return this\n  },\n  destroy() {\n    observer.proxy.un(this.scope, this.proxyHandler)\n    if (this.binded)\n      _.each(this.bindings, (bind) => {\n        bind.unbind()\n        bind.destroy()\n      })\n    dom.remove(this.el)\n    this.bindings = undefined\n    this.el = undefined\n  }\n})\n","import _ from 'utility'\nimport DomParser from './DomParser'\nimport DirectiveParser from './DirectiveParser'\nimport TextParser from './TextParser'\n\n\nlet templateId = 0\nconst templateCache = {}\n\nexport default _.dynamicClass({\n  statics: {\n    get(id) {\n      return templateCache[id]\n    },\n    DomParser: DomParser,\n    DirectiveParser: DirectiveParser,\n    TextParser: TextParser\n  },\n  constructor(templ, cfg = {}) {\n    this.id = cfg.id || (templateId++)\n    if (_.hasOwnProp(templateCache, this.id)) {\n      throw new Error('Existing Template[' + this.id + ']')\n    }\n    this.parser = new DomParser(templ)\n    templateCache[this.id] = this\n  },\n  complie(scope) {\n    return this.parser.complie(scope)\n  }\n})\n","import {\n  Directive\n} from '../binding'\nimport Template from '../template'\nimport _ from 'utility'\nimport observer from 'observer'\nimport dom from '../dom'\nimport log from '../log'\n\nconst eachReg = /^\\s*([\\s\\S]+)\\s+in\\s+([\\S]+)(\\s+track\\s+by\\s+([\\S]+))?\\s*$/,\n  eachAliasReg = /^(\\(\\s*([^,\\s]+)(\\s*,\\s*([\\S]+))?\\s*\\))|([^,\\s]+)(\\s*,\\s*([\\S]+))?$/\n\nexport default Directive.register('each', _.dynamicClass({\n  extend: Directive,\n  independent: true,\n  block: true,\n  priority: 10,\n  constructor() {\n    this.super(arguments)\n    this.observeHandler = this.observeHandler.bind(this)\n    let token = this.expr.match(eachReg)\n    if (!token)\n      throw Error(`Invalid Expression[${this.expr}] on Each Directive`)\n\n    this.scopeExpr = token[2]\n    this.indexExpr = token[4]\n\n    let aliasToken = token[1].match(eachAliasReg)\n    if (!aliasToken)\n      throw Error(`Invalid Expression[${token[1]}] on Each Directive`)\n\n    this.valueAlias = aliasToken[2] || aliasToken[5]\n    this.keyAlias = aliasToken[4] || aliasToken[7]\n\n    this.begin = document.createComment('each begin')\n    this.end = document.createComment('each end')\n    dom.replace(this.el, this.begin)\n    dom.after(this.end, this.begin)\n    this.el = undefined\n    this.version = 1\n  },\n  update(data) {\n    let domParser = this.domParser,\n      parentScope = this.realScope(),\n      begin = this.begin,\n      end = this.end,\n      indexExpr = this.indexExpr,\n      used = this.used,\n      version = this.version++,\n      indexMap = this.used = {},\n      descs = _.map(data, (item, idx) => {\n        let index = indexExpr ? _.get(item, indexExpr) : idx, // read index of data item\n          reuse = used && used[index],\n          desc\n\n        if (reuse && reuse.version === version)\n          reuse = undefined\n\n        desc = reuse || {\n          index: index\n        }\n        desc.version = version\n        desc.data = observer.proxy(item)\n        indexMap[index] = desc\n        return desc\n      }),\n      idles = [],\n      fragment = document.createDocumentFragment()\n\n    if (used)\n      tpl.each(used, (desc) => {\n        if (desc.version != version)\n          idles.push(desc)\n        desc.tpl.remove(false)\n      })\n\n    tpl.each(descs, (desc) => {\n      let newScope = false\n      if (!desc.scope) {\n        let idle = idles.pop()\n\n        if (!idle) {\n          desc.scope = this.createScope(parentScope, desc.data, desc.index)\n          desc.tpl = domParser.complie(desc.scope)\n          newScope = true\n        } else {\n          desc.scope = idle.scope\n          desc.tpl = idle.tpl\n        }\n      }\n      if (!newScope)\n        this.initScope(desc.scope, desc.data, desc.index)\n      dom.append(fragment, desc.tpl.el)\n      if (newScope)\n        desc.tpl.bind()\n    })\n    tpl.before(fragment, end)\n    tpl.each(idles, (idle) => idle.tpl.destroy())\n  },\n  createScope(parentScope, value, index) {\n    let scope = _.create(parentScope)\n    scope.$parent = parentScope\n    scope.$eachContext = this\n    this.initScope(scope, value, index, true)\n    return scope\n  },\n  initScope(scope, value, index, isCreate) {\n    if (!isCreate)\n      scope = observer.proxy(scope)\n    scope[this.valueAlias] = value\n    if (this.keyAlias)\n      scope[this.keyAlias] = index\n  },\n  bind() {\n    this.observe(this.scopeExpr, this.observeHandler)\n    this.update(this.target())\n  },\n  unbind() {\n    this.unobserve(this.scopeExpr, this.observeHandler)\n  },\n  target() {\n    return this.get(this.scopeExpr)\n  },\n  observeHandler(expr, target) {\n    this.update(target)\n  }\n}))\n","import {\n  Directive\n} from '../binding'\nimport expression from '../expression'\nimport _ from 'utility'\nimport {\n  hump\n} from '../util'\nimport dom from '../dom'\nimport log from '../log'\n\nconst expressionArgs = ['$scope', '$el', '$event', '$tpl', '$binding']\n\nconst EventDirective = _.dynamicClass({\n  extend: Directive,\n  constructor() {\n    this.super(arguments)\n    this.handler = this.handler.bind(this)\n    this.expression = expression(this.expr, expressionArgs, this.expressionScopeProvider)\n  },\n  handler(e) {\n    e.stopPropagation()\n\n    let scope = this.scope(),\n      exp = this.expression\n\n    if (exp.executeFilter(scope, [scope, this.el, e, this.tpl, this], e) !== false) {\n      let fn = exp.execute(scope, [scope, this.el, e, this.tpl, this])\n      if (exp.isSimple()) {\n        if (_.isFunc(fn)) {\n          scope = this.exprScope(exp.expr)\n          fn.call(scope, scope, this.el, e, this.tpl, this)\n        } else {\n          log.warn('Invalid Event Handler:%s', this.expr, fn)\n        }\n      }\n    }\n  },\n  bind() {\n    dom.on(this.el, this.eventType, this.handler)\n    this.super(arguments)\n  },\n  unbind() {\n    this.super(arguments)\n    dom.off(this.el, this.eventType, this.handler)\n  }\n})\n\nconst events = ['blur', 'change', 'click', 'dblclick', 'error', 'focus', 'keydown', 'keypress', 'keyup', 'load',\n  'mousedown', 'mousemove', 'mouseout', 'mouseover', 'mouseup', 'resize', 'scroll', 'select', 'submit', 'unload', {\n    name: 'oninput',\n    eventType: 'input propertychange'\n  }\n]\n\nexport default _.assign(_.convert(events, (opt) => {\n  let name = _.isObject(opt) ? opt.name : opt\n  return hump(name + 'Directive')\n}, (opt) => {\n  if (!_.isObject(opt))\n    opt = {\n      eventType: opt\n    }\n  let name = opt.name || `on${opt.eventType}`\n  opt.extend = EventDirective\n  return Directive.register(name, opt)\n}), {\n  EventDirective\n})\n","import {\n  Directive\n} from '../binding'\nimport expression from '../expression'\nimport _ from 'utility'\nimport {\n  hump,\n  YieId\n} from '../util'\nimport dom from '../dom'\nimport log from '../log'\n\nconst expressionArgs = ['$scope', '$el', '$tpl', '$binding']\n\nconst SimpleDirective = _.dynamicClass({\n  extend: Directive,\n  constructor() {\n    this.super(arguments)\n    this.observeHandler = this.observeHandler.bind(this)\n    this.expression = expression(this.expr, expressionArgs, this.expressionScopeProvider)\n  },\n  realValue() {\n    let scope = this.scope()\n    return this.expression.execute(scope, [scope, this.el, this.tpl, this])\n  },\n  value() {\n    let scope = this.scope()\n    return this.expression.executeAll(scope, [scope, this.el, this.tpl, this])\n  },\n  listen() {\n    _.each(this.expression.identities, (ident) => {\n      this.observe(ident, this.observeHandler)\n    })\n    this.update(this.value())\n  },\n  unlisten() {\n    _.each(this.expression.identities, (ident) => {\n      this.unobserve(ident, this.observeHandler)\n    })\n  },\n  bind() {\n    this.listen()\n    this.super(arguments)\n  },\n  unbind() {\n    this.super(arguments)\n    this.unlisten()\n  },\n  blankValue(val) {\n    if (arguments.length == 0) val = this.value()\n    return _.isNil(val) ? '' : val\n  },\n  observeHandler(expr, val) {\n    if (this.expression.isSimple()) {\n      let scope = this.scope()\n      this.update(this.expression.executeFilter(scope, [scope, this.el, this.tpl, this], val))\n    } else {\n      this.update(this.value())\n    }\n  },\n  update(val) {\n    throw `abstract method`\n  }\n})\n\nconst EVENT_CHANGE = 'change',\n  EVENT_INPUT = 'input',\n  EVENT_CLICK = 'click',\n  TAG_SELECT = 'SELECT',\n  TAG_INPUT = 'INPUT',\n  TAG_TEXTAREA = 'TEXTAREA',\n  RADIO = 'radio',\n  CHECKBOX = 'checkbox',\n  directives = {\n    text: {\n      block: true,\n      update(val) {\n        dom.text(this.el, this.blankValue(val))\n      }\n    },\n    html: {\n      block: true,\n      update(val) {\n        dom.html(this.el, this.blankValue(val))\n      }\n    },\n    'class': {\n      update(value) {\n        if (value && typeof value == 'string') {\n          this.handleArray(_.trim(value).split(/\\s+/))\n        } else if (value instanceof Array) {\n          this.handleArray(value)\n        } else if (value && typeof value == 'object') {\n          this.handleObject(value)\n        } else {\n          this.cleanup()\n        }\n      },\n      handleObject(value) {\n        this.cleanup(value, false)\n        let keys = this.prevKeys = [],\n          el = this.el\n        for (let key in value) {\n          if (value[key]) {\n            dom.addClass(el, key)\n            keys.push(key)\n          } else {\n            dom.removeClass(el, key)\n          }\n        }\n      },\n      handleArray(value) {\n        this.cleanup(value, true)\n        let keys = this.prevKeys = [],\n          el = this.el\n        _.each(value, (val) => {\n          if (val) {\n            keys.push(val)\n            dom.addClass(el, val)\n          }\n        })\n      },\n      cleanup(value, isArr) {\n        let prevKeys = this.prevKeys\n        if (prevKeys) {\n          let i = prevKeys.length,\n            el = this.el\n          while (i--) {\n            let key = prevKeys[i]\n            if (!value || (isArr ? _.indexOf(value, key) == -1 : !_.hasOwnProp(value, key))) {\n              dom.removeClass(el, key)\n            }\n          }\n        }\n      }\n    },\n    'style': {\n      update(value) {\n        if (value && _.isString(value)) {\n          dom.style(this.el, value)\n        } else if (value && _.isObject(value)) {\n          this.handleObject(value)\n        }\n      },\n      handleObject(value) {\n        this.cleanup(value)\n        let keys = this.prevKeys = [],\n          el = this.el\n        _.each(value, (val, key) => {\n          dom.css(el, key, val)\n        })\n      }\n    },\n    show: {\n      update(val) {\n        dom.css(this.el, 'display', val ? '' : 'none')\n      }\n    },\n    hide: {\n      update(val) {\n        dom.css(this.el, 'display', val ? 'none' : '')\n      }\n    },\n    value: {\n      update(val) {\n        dom.val(this.el, this.blankValue(val))\n      }\n    },\n    'if': {\n      priority: 9,\n      bind() {\n        this.yieId = new YieId()\n        this.listen()\n        return this.yieId\n      },\n      unbind() {\n        if (!this.yieId)\n          this.unbindChildren()\n        this.unlisten()\n      },\n      update(val) {\n        if (!val) {\n          dom.css(this.el, 'display', 'none')\n        } else {\n          if (this.yieId) {\n            this.yieId.done()\n            this.yieId = undefined\n            this.bindChildren()\n          }\n          dom.css(this.el, 'display', '')\n        }\n      }\n    },\n    checked: {\n      update(val) {\n        _.isArray(val) ? dom.checked(this.el, _.indexOf(val, dom.val(this.el))) : dom.checked(this.el, !!val)\n      }\n    },\n    selected: {\n      update(val) {}\n    },\n    focus: {\n      update(val) {\n        if (val) dom.focus(this.el)\n      }\n    },\n    input: {\n      priority: 4,\n      constructor() {\n        this.super(arguments)\n        if (!this.expression.isSimple())\n          throw TypeError(`Invalid Expression[${this.expression.expr}] on InputDirective`)\n\n        this.onChange = this.onChange.bind(this)\n        let tag = this.tag = this.el.tagName\n        switch (tag) {\n          case TAG_SELECT:\n            this.event = EVENT_CHANGE\n            break\n          case TAG_INPUT:\n            let type = this.type = this.el.type\n            this.event = (type == RADIO || type == CHECKBOX) ? EVENT_CHANGE : EVENT_INPUT\n            break\n          case TAG_TEXTAREA:\n            throw TypeError('Directive[input] not support ' + tag)\n            break\n          default:\n            throw TypeError('Directive[input] not support ' + tag)\n        }\n      },\n\n      bind() {\n        dom.on(this.el, this.event, this.onChange)\n        this.super()\n      },\n\n      unbind() {\n        this.super()\n        dom.off(this.el, this.event, this.onChange)\n      },\n\n      setRealValue(val) {\n        this.set(this.expression.expr, val)\n      },\n\n      setValue(val) {\n        let scope = this.scope()\n        this.setRealValue(this.expression.restore(scope, [scope, this.el, this.tpl, this], val))\n      },\n\n      onChange(e) {\n        let val = this.elVal(),\n          idx,\n          _val = this.val\n        if (val != _val)\n          this.setValue(val)\n        e.stopPropagation()\n      },\n\n      update(val) {\n        let _val = this.blankValue(val)\n        if (_val != this.val)\n          this.elVal((this.val = _val))\n      },\n\n      elVal(val) {\n        let tag = this.tag\n\n        switch (tag) {\n          case TAG_SELECT:\n            break\n          case TAG_INPUT:\n            let type = this.type\n\n            if (type == RADIO || type == CHECKBOX) {\n              if (arguments.length == 0) {\n                return dom.checked(this.el) ? dom.val(this.el) : undefined\n              } else {\n                let checked\n\n                checked = val == dom.val(this.el)\n                if (dom.checked(this.el) != checked)\n                  dom.checked(this.el, checked)\n              }\n            } else {\n              if (arguments.length == 0) {\n                return dom.val(this.el)\n              } else if (val != dom.val(this.el)) {\n                dom.val(this.el, val)\n              }\n            }\n            break\n          case TAG_TEXTAREA:\n            throw TypeError('Directive[input] not support ' + tag)\n            break\n          default:\n            throw TypeError('Directive[input] not support ' + tag)\n        }\n      }\n    }\n  }\n\nexport default _.assign(_.convert(directives, (opt, name) => {\n  return hump(name + 'Directive')\n}, (opt, name) => {\n  opt.extend = SimpleDirective\n  return Directive.register(name, opt)\n}), {\n  SimpleDirective\n})\n","import EachDirective from './each'\nimport event from './event'\nimport simple from './simple'\nimport _ from 'utility'\n\nexport default _.assign({\n  EachDirective\n}, event, simple)\n"],"names":["transform","str","isString","i","saved","length","replace","newlineReg","restore","defaultScopeProvider","initStatus","_params","_scopeProvider","__MAP__","params","_","reverseConvert","cleanStates","undefined","rewrite","raw","idx","prefix","charAt","userExpr","slice","expr","thisReg","prop","match","propReg","keywords","cfg","nextIdx","nextChar","realScope","ident","applyFuncReg","test","identities","scopeProvider","makeExecutor","body","push","Function","apply","e","Error","complileExpr","identityReg","restoreReg","compileFilter","exprs","map","args","split","shift","isSimplePath","simplePathReg","literalValueReg","expression","rs","cache","Expression","firstEl","el","isArrayLike","lastEl","coll","callback","each","_prop","name","set","val","dom","camelize","target","indexOf","toUpperCase","cssName","host","camelCase","cssFix","root","style","n","prefixes","offsetParent","css","offset","box","tagName","ownerDocument","doc","documentElement","win","defaultView","parentWindow","inDoc","getBoundingClientRect","clientTop","clientLeft","scrollTop","Math","max","pageYOffset","scrollLeft","pageXOffset","top","left","getWindow","node","window","document","nodeType","stringValue","isNil","NaN","addListen","type","handler","once","isFunc","TypeError","listens","listenKey","handlers","ret","contains","LinkedList","removeListen","empty","remove","getListens","hasListen","bandEvent","cb","hook","eventHooks","bind","dispatch","focusBlur","unbandEvent","unbind","delegateEvent","delegateEvents","undelegateEvent","dispatchElement","event","isMove","currentTarget","isImmediatePropagationStopped","now","Date","last","call","off","dispatchEvent","disabled","canBubbleUp","getAttribute","cancelBubble","parentNode","Event","eventHookTypes","fix","fireReady","fn","readyList","_clone","elem","cloneNode","childNodes","appendChild","c","clone","_hump","k","hump","regHump","assign","source","alias","v","reg","dynamicClass","text","index","token","exec","this","lastIndex","Configuration","Binding","_scope","observer","obj","scope","tpl","proxy","parent","$parent","hasOwnProp","propScope","parseExpr","on","exprScope","un","get","has","value","config","register","commentCfg","Logger","translations","translate","desc","debug","data","f","concat","warn","keyCodes","eventTranslates","which","l","arguments","stopPropagation","preventDefault","nomalTranslates","indent","JSON","stringify","Number","parse","trim","toLowerCase","currency","parseFloat","isFinite","stringified","abs","toFixed","_int","head","_float","sign","digitsRE","plural","singular","unit","format","Array","prototype","wsReg","transformReg","exprReg","fullExpr","filterExprs","executor","filters","keys","simplePath","filter","argExecutors","stop","executeFilter","textContent","createElement","selectors","all","querySelectorAll","querySelector","deep","nextSibling","nextElementSibling","previousSibling","previousElementSibling","children","removeChild","insertBefore","lastChild","next","firstChild","before","append","replaceChild","html","innerHTML","outerHTML","container","focus","selector","styleTag","__qsaels","styleSheet","cssText","textnode","createTextNode","scrollBy","elements","rfocusable","rclickable","propFix","propHooks","setAttribute","removeAttribute","check","cls","classList","add","cur","RegExp","attributeNode","getAttributeNode","specified","parseInt","nodeName","href","cssHooks","cssDefaultHook","convert","num","cssNumber","_offsetParent","_offset","parentOffset","scrollTo","W3C","cssDefaultGet","getComputedStyle","styles","getPropertyValue","opacity","rnumnonpx","rposition","ralpha","ie8","XDomainRequest","salpha","border","currentStyle","rsLeft","runtimeStyle","pixelLeft","alpha","op","enabled","zoom","position","boxSizing","offsetProp","method","includeMargin","valHooks","attributes","signle","selectedIndex","options","option","values","selected","vl","isArray","nr","isBoolean","opts","hackEvent","createEvent","initEvent","createEventObject","fireEvent","mouseEventReg","keyEventReg","eventProps","eventFixHooks","keyEventFixHook","original","charCode","keyCode","mouseEventFixHook","eventDoc","button","pageX","clientX","pageY","clientY","fixHook","originalEvent","returnValue","defaultPrevented","getPreventDefault","timeStamp","props","srcElement","stopImmediatePropagation","capture","addEventListener","attachEvent","removeEventListener","detachEvent","canBubbleUpArray","change","select","origType","fixType","t","relatedTarget","compareDocumentPosition","construct","animationend","navigator","userAgent","input","oldValue","actEl","activeElement","propertyName","$onchange","onmousewheel","fixWheelType","onwheel","fixWheelDelta","mousewheel","wheelDeltaY","wheelDelta","wheelDeltaX","isReady","readyState","doScroll","frameElement","external","doScrollCheck","ready","expressionArgs","expressionScopeProvider","comment","createComment","observeHandler","executeAll","observe","_this","update","unobserve","_this2","attr","isSimple","directives","Directive","domParser","group","directive","bindChildren","unbindChildren","priority","block","independent","isExtendOf","isObject","extend","bindedCount","bindedChildren","_bind","directiveCount","YieId","then","getDirective","proxyHandler","query","after","prepend","binded","bindings","destroy","DirectiveParser","TextParser","TEXT","DIRECTIVE","DIRECTIVE_GROUP","DomParser","parseEl","directiveParser","df","createDocumentFragment","Template","parseBindings","parseEls","descs","els","Text","DirectiveGroup","_setDirectives","elStatus","eachDom","marked","templ","elemHandler","textHandler","_eachDom","markEl","isDirective","isBlock","isIndependent","sort","a","b","getPriority","childEl","removeAttr","parser","p","nextToken","start","_this4","insertNotBlankText","substring","insertText","end","substr","content","templateId","templateCache","id","complie","eachReg","eachAliasReg","scopeExpr","indexExpr","aliasToken","valueAlias","keyAlias","begin","version","parentScope","used","indexMap","item","reuse","idles","fragment","newScope","idle","pop","createScope","initScope","create","$eachContext","isCreate","doned","thens","EventDirective","exp","execute","eventType","events","opt","SimpleDirective","listen","unlisten","EVENT_CHANGE","EVENT_INPUT","TAG_SELECT","TAG_INPUT","TAG_TEXTAREA","RADIO","CHECKBOX","blankValue","handleArray","handleObject","cleanup","prevKeys","key","addClass","removeClass","isArr","yieId","done","checked","onChange","tag","setRealValue","elVal","_val","setValue","simple","init","util"],"mappings":"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"}