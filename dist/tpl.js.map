{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 65805cbeb48b3e35b926","webpack:///./src/index.js","webpack:///./src/template.js","webpack:///external {\"root\":\"_\",\"commonjs\":\"_\",\"commonjs2\":\"_\",\"amd\":\"_\"}","webpack:///external {\"root\":\"jQuery\",\"commonjs\":\"jquery\",\"commonjs2\":\"jquery\",\"amd\":\"jquery\"}","webpack:///./src/text.js","webpack:///./src/binding.js","webpack:///external {\"root\":\"observer\",\"commonjs\":\"observer\",\"commonjs2\":\"observer\",\"amd\":\"observer\"}","webpack:///./src/expression.js","webpack:///./src/directive.js","webpack:///./src/util.js","webpack:///./src/directives.js"],"names":[],"mappings":"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","file":"tpl.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"_\"), require(\"jquery\"), require(\"observer\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"_\", \"jquery\", \"observer\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"tpl\"] = factory(require(\"_\"), require(\"jquery\"), require(\"observer\"));\n\telse\n\t\troot[\"tpl\"] = factory(root[\"_\"], root[\"jQuery\"], root[\"observer\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_6__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 65805cbeb48b3e35b926\n **/","let tpl = require('./template');\r\ntpl.Directives = require('./directives');\r\ntpl.expression = require('./expression');\r\nmodule.exports = tpl;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","const _ = require('lodash'),\r\n  $ = require('jquery'),\r\n  Text = require('./text'),\r\n  {Directive, DirectiveGroup} = require('./directive');\r\n\r\n\r\nconst PRIMITIVE = 0,\r\n  KEYPATH = 1,\r\n  TEXT = 0,\r\n  BINDING = 1,\r\n  templateContentReg = /^[\\s\\t\\r\\n]*</,\r\n  parseDelimiterReg = function(delimiter) {\r\n    return new RegExp([delimiter[0], '([^', delimiter[0], delimiter[0], ']*)', delimiter[1]].join(''), 'g')\r\n  },\r\n  parseDirectiveReg = function(prefix) {\r\n    return new RegExp('^' + prefix);\r\n  },\r\n  defaultCfg = {\r\n    delimiter: ['{', '}'],\r\n    directivePrefix: 'tpl-'\r\n  };\r\n\r\n\r\nlet __tmp_id__ = 0;\r\nclass Template {\r\n  constructor(templ, cfg) {\r\n    this.template = $(templ);\r\n    cfg = cfg || {};\r\n\r\n    this.directivePrefix = cfg.directivePrefix || defaultCfg.directivePrefix;\r\n    this.delimiter = cfg.delimiter || defaultCfg.delimiter;\r\n    this.directiveReg = parseDirectiveReg(this.directivePrefix);\r\n    this.delimiterReg = parseDelimiterReg(this.delimiter);\r\n\r\n    this.__instance_nr__ = 0;\r\n    this.__id__ = __tmp_id__++;\r\n  }\r\n\r\n  complie(scope, parent) {\r\n    return new TemplateInstance(this, scope, parent);\r\n  }\r\n}\r\n\r\nclass TemplateInstance {\r\n  constructor(tpl, scope, parent) {\r\n    this.tpl = tpl;\r\n    this.scope = scope;\r\n    this.el = this.tpl.template.clone();\r\n    this.parent = parent;\r\n    this.__id__ = tpl.__id__ + '-' + tpl.__instance_nr__++;\r\n    this.init();\r\n  }\r\n\r\n  renderTo(el) {\r\n    $(el).append(this.el);\r\n    return this;\r\n  }\r\n\r\n  init() {\r\n    this.bindings = this.parse(this.el);\r\n    this.bindings.forEach(directive => {\r\n      directive.bind();\r\n      this.scope = directive.scope;\r\n    });\r\n  }\r\n\r\n  parse(els) {\r\n    if (!els.jquery && !(els instanceof Array)) {\r\n      return this.parseEl(els);\r\n    } else {\r\n      let bindings = [];\r\n      _.each(els, el => {\r\n        bindings.push.apply(bindings, this.parseEl(el));\r\n      });\r\n      return bindings;\r\n    }\r\n  }\r\n\r\n  parseEl(el) {\r\n    switch (el.nodeType) {\r\n      case 1: // Element\r\n        return this.parseElement(el);\r\n      case 3: // Text\r\n        return this.parseText(el);\r\n    }\r\n  }\r\n\r\n  parseText(el) {\r\n    let text = el.data,\r\n      token,\r\n      lastIndex = 0,\r\n      reg = this.tpl.delimiterReg,\r\n      bindings = [];\r\n\r\n    while ((token = reg.exec(text))) {\r\n\r\n      this.createTextNode(text.substring(lastIndex, reg.lastIndex - token[0].length), el);\r\n\r\n      if (token[1]) {\r\n        bindings.push(new Text(this.createTextNode('binding', el), this, token[1]));\r\n      }\r\n\r\n      lastIndex = reg.lastIndex;\r\n    }\r\n\r\n    this.createTextNode(text.substr(lastIndex), el);\r\n\r\n    $(el).remove();\r\n\r\n    return bindings;\r\n  }\r\n\r\n  createTextNode(content, before) {\r\n    content = _.trim(content);\r\n    if (content) {\r\n      let el = document.createTextNode(content);\r\n      $(el).insertBefore(before);\r\n      return el;\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n\r\n  parseElement(el) {\r\n    let block = false,\r\n      $el = $(el),\r\n      directives = [],\r\n      consts = [];\r\n    if (el.attributes) {\r\n      _.each(el.attributes, attr => {\r\n        let name = attr.name,\r\n          val = attr.value,\r\n          dc, directive;\r\n\r\n        if ((name = this.parseDirectiveName(name)) && (dc = Directive.getDirective(name))) {\r\n          if (dc.prototype.abstract) {\r\n            consts = [{\r\n              const: dc,\r\n              val: val\r\n            }];\r\n            block = true;\r\n            return false;\r\n          }\r\n          consts.push({\r\n            const: dc,\r\n            val: val\r\n          });\r\n          if (dc.prototype.block)\r\n            block = true;\r\n        } else if (name) {\r\n          console.warn('Directive is undefined ' + attr.name);\r\n        }\r\n      });\r\n\r\n      if (consts.length > 1) {\r\n        directives.push(new DirectiveGroup(el, this, consts));\r\n      } else if (consts.length == 1) {\r\n        directives.push(new consts[0].const(el, this, consts[0].val));\r\n      }\r\n    }\r\n    if (!block) {\r\n      directives.push.apply(directives, this.parseChildNodes(el));\r\n    }\r\n    return directives;\r\n  }\r\n\r\n  parseChildNodes(el) {\r\n    return this.parse(_.slice(el.childNodes, 0));\r\n  }\r\n\r\n  parseDirectiveName(name) {\r\n    let reg = this.tpl.directiveReg;\r\n    if (reg.test(name)) {\r\n      return name.replace(reg, '');\r\n    }\r\n    return undefined;\r\n  }\r\n}\r\nmodule.exports = Template;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/template.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"root\":\"_\",\"commonjs\":\"_\",\"commonjs2\":\"_\",\"amd\":\"_\"}\n ** module id = 2\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"root\":\"jQuery\",\"commonjs\":\"jquery\",\"commonjs2\":\"jquery\",\"amd\":\"jquery\"}\n ** module id = 3\n ** module chunks = 0\n **/","const _ = require('lodash'),\r\n  $ = require('jquery'),\r\n  {Binding} = require('./binding'),\r\n  expression = require('./expression'),\r\n  expressionArgs = ['$scope', '$el'];\r\n\r\nclass Text extends Binding {\r\n  constructor(el, tpl, expr) {\r\n    super(tpl, expr);\r\n    this.el = el;\r\n    this.observeHandler = this.observeHandler.bind(this);\r\n    this.expression = expression.parse(this.expr, expressionArgs);\r\n  }\r\n\r\n  value() {\r\n    return this.applyFilter(this.expression.execute.call(this.scope, this, this.scope, this.el));\r\n  }\r\n\r\n  bind() {\r\n    if (Binding.generateComments && !this.comment) {\r\n      this.comment = $(document.createComment('Text Binding ' + this.expr));\r\n      this.comment.insertBefore(this.el);\r\n    }\r\n    this.expression.identities.forEach((ident) => {\r\n      this.observe(ident, this.observeHandler);\r\n    });\r\n    this.update(this.value());\r\n  }\r\n\r\n  unbind() {\r\n    this.expression.identities.forEach((ident) => {\r\n      this.unobserve(ident, this.observeHandler);\r\n    });\r\n  }\r\n\r\n  observeHandler(attr, val) {\r\n    if (this.expression.simplePath) {\r\n      this.update(this.applyFilter(val));\r\n    } else {\r\n      this.update(this.value());\r\n    }\r\n  }\r\n\r\n  update(val) {\r\n    if (val === undefined || val === null) {\r\n      val = '';\r\n    }\r\n    this.el.data = val;\r\n  }\r\n}\r\nmodule.exports = Text;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/text.js\n **/","const _ = require('lodash'),\r\n  observer = require('observer');\r\n\r\nexport class AbstractBinding {\r\n  constructor(tpl) {\r\n    this.tpl = tpl;\r\n    this.scope = tpl.scope;\r\n    this.ancestorObservers = {};\r\n  }\r\n\r\n  destroy() {}\r\n\r\n\r\n  _createObserveAncestorHandler(ancestors, idx, expr, callback) {\r\n    let fn = () => {\r\n      callback.apply(this, arguments);\r\n\r\n      for (let i = ancestors.length - 1; i >= idx; i--) {\r\n        observer.un(ancestors[i], fn);\r\n        ancestors.pop();\r\n      }\r\n    }\r\n    return fn;\r\n  }\r\n\r\n  _has(scope, path) {}\r\n\r\n  observe(expr, callback) {\r\n    let tpl = this.tpl,\r\n      hierarchy = [this.scope], l;\r\n\r\n    while (!_.has(tpl.scope, expr)) {\r\n      tpl = tpl.parent;\r\n      if (!tpl) {\r\n        break;\r\n      }\r\n      hierarchy.push(tpl.scope);\r\n    }\r\n    observer.on(hierarchy.shift(), expr, callback);\r\n\r\n    if ( (l = hierarchy.length) ) {\r\n      let aos = this.ancestorObservers[expr],\r\n        fns = [];\r\n      if (!aos) {\r\n        aos = this.ancestorObservers[expr] = {\r\n          ancestors: hierarchy.map((h) => {\r\n            return observer.obj(h);\r\n          }),\r\n          callbacks: [],\r\n          fns: []\r\n        };\r\n      }\r\n      aos.callbacks.push(callback);\r\n      aos.fns.push(fns);\r\n      for (let i = 0; i < l; i++) {\r\n        observer.on(hierarchy[i], expr,\r\n          (fns[i] = this._createObserveAncestorHandler(hierarchy, i, expr, callback)));\r\n      }\r\n    }\r\n  }\r\n\r\n  unobserve(expr, callback) {\r\n    observer.un(this.scope, expr, callback);\r\n    let aos = this.ancestorObservers[expr];\r\n    if (aos) {\r\n      let i = aos.callbacks.indexOf(callback),\r\n        fns;\r\n      if (i != -1) {\r\n        let tpl = this.tpl;\r\n        fns = aos.fns[i];\r\n        for (i = 0; i < fns.length; i++) {\r\n          tpl = tpl.parent;\r\n          observer.un(tpl.scope, fns[i]);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  get2(path) {\r\n    let tpl = this.tpl,\r\n      scope = this.scope;\r\n\r\n    while (!_.has(scope, path)) {\r\n      tpl = tpl.parent;\r\n      if (!tpl)\r\n        return {\r\n          scope: undefined,\r\n          data: undefined\r\n        }\r\n      scope = tpl.scope;\r\n    }\r\n    return {\r\n      scope: scope,\r\n      data: _.get(scope, path)\r\n    }\r\n  }\r\n\r\n  get(path) {\r\n    let tpl = this.tpl,\r\n      scope = this.scope;\r\n\r\n    while (!_.has(scope, path)) {\r\n      tpl = tpl.parent;\r\n      if (!tpl)\r\n        return undefined;\r\n      scope = tpl.scope;\r\n    }\r\n    return _.get(scope, path);\r\n  }\r\n\r\n  set(path, value) {\r\n    _.set(this.scope, path, value);\r\n  }\r\n\r\n  bind() {\r\n    throw 'Abstract Method [' + this.constructor.name + '.bind]';\r\n  }\r\n\r\n  unbind() {\r\n    throw 'Abstract Method [' + this.constructor.name + '.unbind]';\r\n  }\r\n}\r\n\r\nconst exprReg = /((?:'[^']*')*(?:(?:[^\\|']+(?:'[^']*')*[^\\|']*)+|[^\\|]+))|^$/g;\r\nconst filterReg = /^$/g\r\n\r\nexport class Binding extends AbstractBinding {\r\n  constructor(tpl, expr) {\r\n    super(tpl);\r\n\r\n    this.fullExpr = expr;\r\n    let pipes = expr.match(exprReg);\r\n    this.expr = pipes.shift();\r\n\r\n    this.filterExprs = pipes;\r\n    this.filters = [];\r\n  }\r\n\r\n  applyFilter(val) {\r\n    for (let i = 0; i < this.filters.length; i++) {\r\n      val = this.filters[i].apply(val);\r\n    }\r\n    return val;\r\n  }\r\n\r\n  unapplyFilter(val) {\r\n    for (let i = 0; i < this.filters.length; i++) {\r\n      val = this.filters[i].unapply(val);\r\n    }\r\n    return val;\r\n  }\r\n\r\n}\r\nBinding.generateComments = true;\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/binding.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_6__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"root\":\"observer\",\"commonjs\":\"observer\",\"commonjs2\":\"observer\",\"amd\":\"observer\"}\n ** module id = 6\n ** module chunks = 0\n **/","const _ = require('lodash');\r\n\r\nconst allowedKeywords = 'Math,Date,this,true,false,null,undefined,Infinity,NaN,' +\r\n  'isNaN,isFinite,decodeURI,decodeURIComponent,encodeURI,' +\r\n  'encodeURIComponent,parseInt,parseFloat';\r\nconst allowedKeywordsReg = new RegExp('^(' + allowedKeywords.replace(/,/g, '\\\\b|') + '\\\\b)')\r\n\r\n// keywords that don't make sense inside expressions\r\nconst improperKeywords = 'break,case,class,catch,const,continue,debugger,default,' +\r\n  'delete,do,else,export,extends,finally,for,function,if,' +\r\n  'import,in,instanceof,let,return,super,switch,throw,try,' +\r\n  'var,while,with,yield,enum,await,implements,package,' +\r\n  'proctected,static,interface,private,public';\r\nconst improperKeywordsReg = new RegExp('^(' + improperKeywords.replace(/,/g, '\\\\b|') + '\\\\b)')\r\n\r\nconst wsReg = /\\s/g\r\nconst newlineReg = /\\n/g\r\nconst translationReg = /[\\{,]\\s*[\\w\\$_]+\\s*:|('(?:[^'\\\\]|\\\\.)*'|\"(?:[^\"\\\\]|\\\\.)*\"|`(?:[^`\\\\]|\\\\.)*\\$\\{|\\}(?:[^`\\\\]|\\\\.)*`|`(?:[^`\\\\]|\\\\.)*`)|new |typeof |void /g\r\nconst translationRestoreReg = /\"(\\d+)\"/g\r\nconst pathTestReg = /^[A-Za-z_$][\\w$]*(?:\\.[A-Za-z_$][\\w$]*|\\['.*?'\\]|\\[\".*?\"\\]|\\[\\d+\\]|\\[[A-Za-z_$][\\w$]*\\])*$/\r\nconst identityReg = /[^\\w$\\.:][A-Za-z_$][\\w$]*(?:\\.[A-Za-z_$][\\w$]*|\\['.*?'\\]|\\[\".*?\"\\]|\\[\\d+\\]|\\[[A-Za-z_$][\\w$]*\\])*/g\r\nconst booleanLiteralReg = /^(?:true|false)$/\r\nconst varReg = /^[A-Za-z_$][\\w$]*/\r\nconst functionReg = /__\\$[\\d]+__\\.data\\(./g\r\n\r\n\r\nvar translations = [];\r\nfunction translationProcessor(str, isString) {\r\n  var i = translations.length\r\n  translations[i] = isString ? str.replace(newlineReg, '\\\\n') : str\r\n  return `\"${i}\"`;\r\n}\r\n\r\nfunction translationRestoreProcessor(str, i) {\r\n  return translations[i]\r\n}\r\n\r\nvar identities;\r\nvar currentArgs;\r\nvar currentVars;\r\nvar currentVarNR;\r\nfunction identityProcessor(raw) {\r\n  var c = raw.charAt(0);\r\n  raw = raw.slice(1);\r\n\r\n  if (allowedKeywordsReg.test(raw)) {\r\n    return raw;\r\n  } else if (currentArgs) {\r\n    let f = raw.match(varReg);\r\n    if (f && currentArgs.indexOf(f) != -1) {\r\n      return raw;\r\n    }\r\n  }\r\n  raw = raw.replace(translationRestoreReg, translationRestoreProcessor);\r\n  identities[raw] = 1;\r\n\r\n  let _var = `binding.get2('${raw}')`, varNR;\r\n  if (!(varNR = currentVars[_var])) {\r\n    varNR = currentVars[_var] = currentVarNR++;\r\n  }\r\n  return `${c}__$${varNR}__.data`;\r\n}\r\n\r\nfunction functionProcessor(raw) {\r\n  let c = raw.charAt(raw.length - 1);\r\n  c = c == ')' ? c : ',' + c;\r\n  raw = raw.slice(0, raw.indexOf('.'));\r\n  raw = `${raw}.data.call(${raw}.scope${c}`;\r\n  return raw;\r\n}\r\n\r\nfunction compileExecuter(exp, args) {\r\n  if (improperKeywordsReg.test(exp)) {\r\n    throw Error(`Invalid expression. Generated function body: ${exp}`);\r\n  }\r\n  currentArgs = args;\r\n  currentVars = {};\r\n  currentVarNR = 0;\r\n\r\n  let body = exp.replace(translationReg, translationProcessor).replace(wsReg, '');\r\n  body = (' ' + body).replace(identityReg, identityProcessor)\r\n    .replace(functionReg, functionProcessor)\r\n    .replace(translationRestoreReg, translationRestoreProcessor);\r\n\r\n  let vars = [];\r\n  _.each(currentVars, (nr, exp) => {\r\n    vars.push(`  var __$${nr}__ = ${exp};\\n`);\r\n  })\r\n\r\n  translations.length = 0;\r\n  currentArgs = undefined;\r\n  currentVars = undefined;\r\n\r\n  body = `${vars.join('')}  return ${body};`\r\n\r\n  let _args = ['binding'];\r\n  if (args)\r\n    _args.push.apply(_args, args);\r\n  _args.push(body);\r\n  try {\r\n    return Function.apply(Function, _args);\r\n  } catch (e) {\r\n    throw Error(`Invalid expression. Generated function body: ${body}`);\r\n  }\r\n}\r\n\r\nexport function isSimplePath(exp) {\r\n  return pathTestReg.test(exp) &&\r\n    !booleanLiteralReg.test(exp)\r\n}\r\n\r\nexport function parse(exp, args) {\r\n  exp = exp.trim();\r\n  let res = {\r\n    exp: exp\r\n  }\r\n  if (isSimplePath(exp)) {\r\n    res.simplePath = true;\r\n    res.identities = [exp];\r\n    res.execute = function(binding) {\r\n      return binding.get(exp);\r\n    }\r\n  } else {\r\n    res.simplePath = false;\r\n    identities = {};\r\n    res.execute = compileExecuter(exp, args);\r\n    res.identities = Object.keys(identities);\r\n    identities = undefined;\r\n  }\r\n  return res\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/expression.js\n **/","const _ = require('lodash'),\n  $ = require('jquery'),\n  {Binding, AbstractBinding} = require('./binding'),\n  {ArrayIterator, YieId} = require('./util'),\n  SUPER_CLASS_OPTION = 'extend';\n\nexport class DirectiveGroup extends AbstractBinding {\n  constructor(el, tpl, directiveConsts) {\n    super(tpl);\n\n    this.el = el;\n    directiveConsts.sort((a, b) => {\n      return (b.const.prototype.priority - a.const.prototype.priority) || 0;\n    });\n    this.directives = directiveConsts.map((dir) => {\n      return new dir.const(el, tpl, dir.val);\n    });\n  }\n\n  bind() {\n    let iter = new ArrayIterator(this.directives),\n      _self = this;\n    function parse() {\n      let directive, ret;\n      while (iter.hasNext()) {\n        directive = iter.next();\n        ret = directive.bind();\n        _self.scope = directive.scope;\n        if (iter.hasNext() && ret && ret instanceof YieId) {\n          ret.then(parse);\n          break;\n        }\n      }\n    }\n    parse();\n  }\n\n  unbind() {\n    this.directives.forEach(directive => {\n      directive.unbind();\n      this.scope = directive.scope;\n    });\n  }\n}\n\nexport class Directive extends Binding {\n  constructor(el, tpl, expr) {\n    super(tpl, expr);\n    this.el = el;\n    this.$el = $(el);\n    this.attr = tpl.tpl.directivePrefix + this.name;\n  }\n\n  bind() {\n    if (Binding.generateComments && !this.comment) {\n      this.comment = $(document.createComment(' Directive:' + this.name + ' [' + this.expr + '] '));\n      this.comment.insertBefore(this.el);\n    }\n  }\n\n  unbind() {}\n}\nDirective.prototype.abstract = false;\nDirective.prototype.name = 'Unkown';\nDirective.prototype.block = false;\nDirective.prototype.priority = 0;\n\nconst directives = {};\n\nlet isDirective = Directive.isDirective = function isDirective(object) {\n  let type = typeof object;\n  if (!object || (type != 'function' && type != 'object')) {\n    return false;\n  } else {\n    let proto = object;\n    while ((proto = Object.getPrototypeOf(proto))) {\n      if (proto === Directive) {\n        return true;\n      }\n    }\n    return false;\n  }\n}\n\nDirective.getDirective = function getDirective(name) {\n  return directives[name];\n};\n\nDirective.register = function register(name, option) {\n  if (name in directives) {\n    console.warn('Directive[' + name + '] is defined');\n  }\n  let directive;\n  if (_.isPlainObject(option)) {\n\n    directive = (function(opt, SuperClass) {\n      let userSuperClass = opt[SUPER_CLASS_OPTION];\n      if (userSuperClass && !isDirective(userSuperClass)) {\n        throw 'Invalid Directive SuperClass ' + userSuperClass;\n      }\n      SuperClass = userSuperClass || SuperClass;\n\n      let constructor = _.isFunction(opt.constructor) ? opt.constructor : undefined,\n        Directive = (function() {\n          let fn = function() {\n            if (!(this instanceof SuperClass)) {\n              throw new TypeError('Cannot call a class as a function');\n            }\n            SuperClass.apply(this, arguments);\n            if (constructor) {\n              constructor.apply(this, arguments);\n            }\n          }\n          return fn;\n        })();\n\n      Directive.prototype = Object.create(SuperClass.prototype, {\n        constructor: {\n          value: Directive,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      });\n\n      delete opt.constructor;\n      delete opt[SUPER_CLASS_OPTION];\n\n      _.each(opt, (val, key) => {\n        Directive.prototype[key] = val;\n      });\n\n      Object.setPrototypeOf(Directive, SuperClass);\n      return Directive;\n\n    })(option, Directive);\n\n    directive.prototype.className = (_.capitalize(name) + 'Directive');\n  } else if (isDirective(option)) {\n    directive = option;\n    directive.prototype.className = directive.prototype.constructor.name;\n  } else {\n    throw TypeError('Invalid Directive Object ' + option);\n  }\n\n  directive.prototype.name = name;\n\n  directives[name] = directive;\n  return directive;\n};\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/directive.js\n **/","const _ = require('lodash');\n\nexport class YieId {\n  constructor() {\n    this._doned = false;\n    this._thens = [];\n  }\n  then(callback) {\n    if (!_.include(this._thens, callback)) {\n      this._thens.push(callback);\n    }\n  }\n  done() {\n    if (!this._doned) {\n      _.each(this._thens, callback => callback());\n      this._doned = true;\n    }\n  }\n  isDone() {\n    return this._doned;\n  }\n}\nexport class ArrayIterator {\n  constructor(array, point) {\n    this.array = array;\n    this.index = point || 0;\n  }\n  hasNext() {\n    return this.index < this.array.length;\n  }\n  next() {\n    return this.array[this.index++];\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/util.js\n **/","const _ = require('lodash'),\r\n  {Directive} = require('./directive'),\r\n  Template = require('./template'),\r\n  expression = require('./expression'),\r\n  {YieId} = require('./util'),\r\n  expressionArgs = ['$scope', '$el'],\r\n  eventExpressionArgs = ['$scope', '$el', '$event'];\r\n\r\nfunction registerDirective(name, opt) {\r\n  let cls = Directive.register(name, opt);;\r\n  module.exports[cls.prototype.className] = cls;\r\n}\r\n\r\nexport class AbstractEventDirective extends Directive {\r\n  constructor(el, tpl, expr) {\r\n    super(el, tpl, expr);\r\n    this.handler = this.handler.bind(this);\r\n    this.expression = expression.parse(this.expr, eventExpressionArgs);\r\n  }\r\n\r\n  handler(e) {\r\n    let ret = this.expression.execute.call(this.scope, this, this.scope, this.el, e);\r\n    if (typeof ret == 'function') {\r\n      ret.call(this.scope, this.scope, this.el, e);\r\n    }\r\n  }\r\n\r\n  bind() {\r\n    super.bind();\r\n    this.$el.on(this.eventType, this.handler);\r\n  }\r\n\r\n  unbind() {\r\n    super.unbind();\r\n    this.$el.un(this.eventType, this.handler);\r\n  }\r\n}\r\n\r\nconst events = ['blur', 'change', 'click', 'dblclick', 'error', 'focus', 'keydown', 'keypress', 'keyup', 'load',\r\n  'mousedown', 'mousemove', 'mouseout', 'mouseover', 'mouseup', 'resize', 'scroll', 'select', 'submit', 'unload', {\r\n    name: 'oninput',\r\n    eventType: 'input propertychange'\r\n  }];\r\n\r\n// register events\r\n_.each(events, (opt) => {\r\n  let name;\r\n  if (_.isString(opt)) {\r\n    name = 'on' + opt;\r\n    opt = {\r\n      eventType: opt\r\n    }\r\n  } else {\r\n    name = opt.name;\r\n  }\r\n  opt.extend = AbstractEventDirective;\r\n  registerDirective(name, opt);\r\n});\r\n\r\n\r\nexport class AbstractExpressionDirective extends Directive {\r\n  constructor(el, tpl, expr) {\r\n    super(el, tpl, expr);\r\n    this.observeHandler = this.observeHandler.bind(this);\r\n    this.expression = expression.parse(this.expr, expressionArgs);\r\n  }\r\n\r\n  setRealValue(val) {\r\n    this.set(this.expr, val);\r\n  }\r\n\r\n  realValue() {\r\n    return this.expression.execute.call(this.scope, this, this.scope, this.el);\r\n  }\r\n\r\n  setValue(val) {\r\n    return this.setRealValue(this.unapplyFilter(val));\r\n  }\r\n\r\n  value() {\r\n    return this.applyFilter(this.realValue());\r\n  }\r\n\r\n  bind() {\r\n    super.bind();\r\n    console.log(this.className + ': [' + this.expr + '] ', this.expression.identities);\r\n    this.expression.identities.forEach((ident) => {\r\n      this.observe(ident, this.observeHandler);\r\n    });\r\n    this.update(this.value());\r\n  }\r\n\r\n  unbind() {\r\n    super.unbind();\r\n    this.expression.identities.forEach((ident) => {\r\n      this.unobserve(ident, this.observeHandler);\r\n    });\r\n  }\r\n\r\n  blankValue(val) {\r\n    if (arguments.length == 0) {\r\n      val = this.value();\r\n    }\r\n    if (val === undefined || val == null) {\r\n      return '';\r\n    }\r\n    return val;\r\n  }\r\n\r\n  observeHandler(expr, val) {\r\n    if (this.expression.simplePath) {\r\n      this.update(this.applyFilter(val));\r\n    } else {\r\n      this.update(this.value());\r\n    }\r\n  }\r\n\r\n  update(val) {\r\n    throw 'Abstract Method [' + this.className + '.update]';\r\n  }\r\n}\r\n\r\nconst EVENT_CHANGE = 'change',\r\n  EVENT_INPUT = 'input propertychange',\r\n  EVENT_CLICK = 'click',\r\n  TAG_SELECT = 'SELECT',\r\n  TAG_INPUT = 'INPUT',\r\n  TAG_TEXTAREA = 'TEXTAREA',\r\n  RADIO = 'radio',\r\n  CHECKBOX = 'checkbox',\r\n  expressions = {\r\n    text: {\r\n      update(val) {\r\n        this.$el.text(this.blankValue(val));\r\n      },\r\n      block: true\r\n    },\r\n    html: {\r\n      update(val) {\r\n        this.$el.html(this.blankValue(val));\r\n      },\r\n      block: true\r\n    },\r\n    'class': {\r\n      update(value) {\r\n        if (value && typeof value == 'string') {\r\n          this.handleArray(value.trim().split(/\\s+/));\r\n        } else if (value instanceof Array) {\r\n          this.handleArray(value);\r\n        } else if (value && typeof value == 'object') {\r\n          this.handleObject(value);\r\n        } else {\r\n          this.cleanup();\r\n        }\r\n      },\r\n\r\n      handleObject(value) {\r\n        this.cleanup(value);\r\n        let keys = this.prevKeys = [];\r\n        for (let key in value) {\r\n          if (value[key]) {\r\n            this.$el.addClass(key);\r\n            keys.push(key);\r\n          } else {\r\n            this.$el.removeClass(key);\r\n          }\r\n        }\r\n      },\r\n\r\n      handleArray(value) {\r\n        this.cleanup(value);\r\n        let keys = this.prevKeys = [];\r\n        for (let i = 0, l = value.length; i < l; i++) {\r\n          if (value[i]) {\r\n            keys.push(value[i]);\r\n            this.$el.addClass(this.el, value[i]);\r\n          }\r\n        }\r\n      },\r\n\r\n      cleanup(value) {\r\n        if (this.prevKeys) {\r\n          let i = this.prevKeys.length,\r\n            isArr = value instanceof Array;\r\n          while (i--) {\r\n            let key = this.prevKeys[i];\r\n            if (!value || (isArr ? value.indexOf(key) != -1 : value.hasOwnProperty(key))) {\r\n              this.$el.removeClass(key);\r\n            }\r\n          }\r\n        }\r\n      }\r\n    },\r\n    show: {\r\n      update(val) {\r\n        this.$el.css('display', val ? '' : 'none');\r\n      }\r\n    },\r\n    hide: {\r\n      update(val) {\r\n        this.$el.css('display', val ? 'none' : '');\r\n      }\r\n    },\r\n    value: {\r\n      update(val) {\r\n        this.$el.val(this.blankValue(val));\r\n      }\r\n    },\r\n    checked: {\r\n      update(val) {\r\n        this.$el.prop('checked', !!val);\r\n      }\r\n    },\r\n    'if': {\r\n      bind() {\r\n        AbstractExpressionDirective.prototype.bind.call(this);\r\n        if (!this.directives) {\r\n          this.yieId = new YieId();\r\n          return this.yieId;\r\n        }\r\n      },\r\n      update(val) {\r\n        if (!val) {\r\n          this.$el.css('display', 'none');\r\n        } else {\r\n          if (!this.directives) {\r\n            this.directives = this.tpl.parseChildNodes(this.el);\r\n            this.directives.forEach(directive => {\r\n              directive.bind();\r\n              this.scope = directive.scope;\r\n            });\r\n            if (this.yieId) {\r\n              this.yieId.done();\r\n              delete this.yieId;\r\n            }\r\n          }\r\n          this.$el.css('display', '');\r\n        }\r\n      },\r\n      unbind() {\r\n        AbstractExpressionDirective.prototype.unbind.call(this);\r\n        if (this.directives) {\r\n          this.directives.forEach(directive => {\r\n            directive.unbind();\r\n            this.scope = directive.scope;\r\n          });\r\n        }\r\n      },\r\n      priority: 9,\r\n      block: true\r\n    },\r\n    input: {\r\n      constructor(el, tpl, expr) {\r\n        AbstractExpressionDirective.call(this, el, tpl, expr);\r\n\r\n        this.onChange = this.onChange.bind(this);\r\n\r\n        let tag = this.tag = el.tagName;\r\n        switch (tag) {\r\n          case TAG_SELECT:\r\n            this.event = EVENT_CHANGE;\r\n            break;\r\n          case TAG_INPUT:\r\n            let type = this.type = el.type;\r\n            this.event = (type == RADIO || type == CHECKBOX) ? EVENT_CLICK : EVENT_INPUT;\r\n            break;\r\n          case TAG_TEXTAREA:\r\n            throw TypeError('Directive[input] not support ' + tag);\r\n            break;\r\n          default: throw TypeError('Directive[input] not support ' + tag);\r\n        }\r\n      },\r\n\r\n      bind() {\r\n        AbstractExpressionDirective.prototype.bind.call(this);\r\n        this.$el.on(this.event, this.onChange);\r\n      },\r\n\r\n      unbind() {\r\n        AbstractExpressionDirective.prototype.unbind.call(this);\r\n        this.$el.un(this.event, this.onChange);\r\n      },\r\n\r\n      onChange() {\r\n        let val = this.elVal();\r\n        if (val != this.val)\r\n          this.setValue(val);\r\n      },\r\n\r\n      update(val) {\r\n        this.val = this.blankValue(val);\r\n        this.elVal(this.val);\r\n      },\r\n\r\n      elVal(val) {\r\n        let tag = this.tag;\r\n\r\n        switch (tag) {\r\n          case TAG_SELECT:\r\n            break;\r\n          case TAG_INPUT:\r\n            let type = this.type;\r\n\r\n            if (type == RADIO || type == CHECKBOX) {\r\n              if (arguments.length == 0) {\r\n                return this.$el.prop('checked') ? this.$el.val() : undefined;\r\n              } else {\r\n                let checked = _.isString(val) ? val == this.$el.val() : !!val;\r\n                if (this.$el.prop('checked') != checked)\r\n                  this.$el.prop('checked', checked);\r\n              }\r\n            } else {\r\n              if (arguments.length == 0) {\r\n                return this.$el.val();\r\n              } else if (val != this.$el.val()) {\r\n                this.$el.val(val);\r\n              }\r\n            }\r\n            break;\r\n          case TAG_TEXTAREA:\r\n            throw TypeError('Directive[input] not support ' + tag);\r\n            break;\r\n          default:\r\n            throw TypeError('Directive[input] not support ' + tag);\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n// register Expression Directive\r\n_.each(expressions, (opt, name) => {\r\n  opt.extend = AbstractExpressionDirective;\r\n  registerDirective(name, opt);\r\n});\r\n\r\nconst eachReg = /^\\s*([\\S][\\s\\S]+[\\S])\\s+in\\s+([\\S]+)(\\s+track\\s+by\\s+([\\S]+))?\\s*$/,\r\n  eachAliasReg = /^(\\(\\s*([\\S]+)(\\s*,\\s*([\\S]+))?\\s*\\))|([\\S]+)(\\s*,\\s*([\\S]+))$/;\r\n\r\nexport class EachDirective extends Directive {\r\n  constructor(el, tpl, expr) {\r\n    super(el, tpl, expr);\r\n    this.observeHandler = this.observeHandler.bind(this);\r\n    this.lengthObserveHandler = this.lengthObserveHandler.bind(this);\r\n\r\n    let token = expr.match(eachReg);\r\n    if (!token)\r\n      throw Error(`Invalid Expression[${expr}] on Each Directive`);\r\n\r\n    this.scopeExpr = token[2];\r\n    this.indexExpr = token[4];\r\n\r\n    let aliasToken = token[1].match(eachAliasReg);\r\n    if (!aliasToken)\r\n      throw Error(`Invalid Expression[${token[1]}] on Each Directive`);\r\n\r\n    this.valueAlias = aliasToken[2] || aliasToken[5];\r\n    this.keyAlias = aliasToken[4] || aliasToken[7];\r\n\r\n    this.$parentEl = this.$el.parent();\r\n    this.$el.remove().removeAttr(this.attr);\r\n    this.childTpl = new Template(this.$el);\r\n  }\r\n\r\n  bindChild(key, data) {\r\n    let scope = {\r\n      __index__: this.indexExpr ? _.get(data, this.indexExpr) : key\r\n    };\r\n\r\n    if (this.keyAlias)\r\n      scope[this.keyAlias] = key;\r\n    scope[this.valueAlias] = data;\r\n\r\n    let tpl = this.childTpl.complie(scope, this.tpl).renderTo(this.$parentEl);\r\n  }\r\n\r\n  bind() {\r\n    super.bind();\r\n    this.observe(this.scopeExpr, this.observeHandler);\r\n    this.observe(this.scopeExpr + '.length', this.lengthObserveHandler);\r\n    this.update(this.target());\r\n  }\r\n\r\n  unbind() {\r\n    super.unbind();\r\n    this.unobserve(this.scopeExpr, this.observeHandler);\r\n    this.unobserve(this.scopeExpr + '.length', this.lengthObserveHandler);\r\n  }\r\n\r\n  update(scope) {\r\n    if (scope instanceof Array) {\r\n      for (let i = 0; i < scope.length; i++) {\r\n        this.bindChild(i, scope[i]);\r\n      }\r\n    } else {\r\n      console.warn(`Invalid Each Scope[${this.scopeExpr}] ${scope}`);\r\n    }\r\n  }\r\n\r\n  target() {\r\n    return this.get(this.scopeExpr);\r\n  }\r\n\r\n  observeHandler(expr, target) {\r\n    this.update(target);\r\n  }\r\n\r\n  lengthObserveHandler() {\r\n    this.update(this.target());\r\n  }\r\n}\r\nEachDirective.prototype.abstract = true;\r\nEachDirective.prototype.block = true;\r\nEachDirective.prototype.priority = 10;\r\n\r\nDirective.register('each', EachDirective);\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/directives.js\n **/"],"sourceRoot":""}