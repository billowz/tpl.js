!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("_"),require("jquery"),require("observer")):"function"==typeof define&&define.amd?define(["_","jquery","observer"],e):"object"==typeof exports?exports.tpl=e(require("_"),require("jquery"),require("observer")):t.tpl=e(t._,t.jQuery,t.observer)}(this,function(t,e,i){return function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={exports:{},id:n,loaded:!1};return t[n].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=i(1),o=i(2),s=i(3),c=i(4),a=i(6),u=s.TextNodeDirective,p={delimiter:["{","}"],directivePrefix:"tpl-"},h=function(){function t(e,i){n(this,t),this.template=o(e),this.cfg=r.assign(r.clone(p),i||{});var s=this.cfg.delimiter[0],c=this.cfg.delimiter[1];this.delimiterReg=new RegExp(s+"([^"+s+c+"]*)"+c,"g"),this.attrDirectiveTestReg=new RegExp("^"+this.cfg.directivePrefix)}return t.prototype.complie=function(t){return new f(this,t)},t}(),f=function(){function t(e,i){if(n(this,t),!(e instanceof h))throw TypeError("Invalid Template "+e);this.template=e,this.bind=i,this.directives=[],this.el=this.template.template.clone(),this.init()}return t.prototype.init=function(){var t=this;r.each(this.el,function(e){t._parse(e)}),this.directives.forEach(function(e){t.bind=e.bind()})},t.prototype._parse=function(t){switch(t.nodeType){case 1:this._parseElement(t);break;case 3:this._parseText(t)}},t.prototype._parseDirectiveName=function(t){var e=this.template.attrDirectiveTestReg;return e.test(t)?t.replace(e,""):void 0},t.prototype._parseElement=function(t){var e=this,i=!1;o(t);t.attributes&&r.each(t.attributes,function(n){var r=n.name,o=n.value,s=void 0,a=void 0;(r=e._parseDirectiveName(r))&&(s=c.getDirective(r))?(a=new s(t,e.bind,o),e.directives.push(a),a.isBlock()&&(i=!0)):r&&console.warn("Directive is undefined "+n.name)}),i||r.each(t.childNodes,function(t){e._parse(t)})},t.prototype._parseText=function(t){for(var e=t.data,i=void 0,n=0,r=this.template.delimiterReg;i=r.exec(e);)this._createTextNode(e.substr(n,r.lastIndex-i[0].length),t),this._createComment(i[0],t),this.directives.push(new u(this._createTextNode("binding",t),this.bind,i[1])),n=r.lastIndex;this._createTextNode(e.substr(n),t),o(t).remove()},t.prototype._createComment=function(t,e){var i=document.createComment(t);return o(i).insertBefore(e),i},t.prototype._createTextNode=function(t,e){if(t){var i=document.createTextNode(t);return o(i).insertBefore(e),i}return void 0},t}();h.Directive=c,h.Directives=s,h.Expression=a,t.exports=h},function(e,i){e.exports=t},function(t,i){t.exports=e},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var o=i(1),s=i(4),c=i(6),a=s.AbstractDirective,u=function(t){function e(i,r,o){n(this,e),t.call(this,i,r,o),this.expression=new c(r,o),this.update=this.update.bind(this),this.$el=$(i)}return r(e,t),e.prototype.bind=function(){var t=this.expression.observe(this.update);return this.update(),t},e.prototype.unbind=function(){return this.expression.unobserve(this.update)},e.prototype.getValue=function(){return this.expression.getValue()},e.prototype.setValue=function(t){this.expression.setValue(t)},e.prototype.update=function(){throw"Abstract Method ["+this.getDirectiveClassName()+".unbind]"},e}(a);e.ExprDirective=u;var p=function(t){function e(){n(this,e),t.apply(this,arguments)}return r(e,t),e.prototype.update=function(){this.el.data=this.getValue()},e}(u);e.TextNodeDirective=p;var h=function(t){function e(){n(this,e),t.apply(this,arguments)}return r(e,t),e.prototype.update=function(){this.$el.text(this.getValue()||"")},e}(u);e.TextDirective=h;var f=function(t){function e(){n(this,e),t.apply(this,arguments)}return r(e,t),e.prototype.update=function(){this.$el.html(this.getValue()||"")},e}(u);e.HtmlDirective=f;var l=function(t){function e(){n(this,e),t.apply(this,arguments)}return r(e,t),e.prototype.update=function(){var t=this.getValue();this.$el.addClass(t)},e}(u);e.ClassDirective=l;var v=function(t){function e(){n(this,e),t.apply(this,arguments)}return r(e,t),e.prototype.update=function(){this.$el.css("display",this.getValue()?"":"none")},e}(u);e.ShowDirective=v;var d=function(t){function e(){n(this,e),t.apply(this,arguments)}return r(e,t),e.prototype.update=function(){this.$el.css("display",this.getValue()?"none":"")},e}(u);e.HideDirective=d;var y=function(t){function e(){n(this,e),t.apply(this,arguments)}return r(e,t),e.prototype.update=function(){this.$el.val(this.getValue())},e}(u);e.ValueDirective=y;var b=function(t){function e(i,r,o){n(this,e),t.call(this,i,r,o),this.onChange=this.onChange.bind(this),this.event="SELECT"===i.tagName?"change":"input propertychange",this.$el.on(this.event,this.onChange)}return r(e,t),e.prototype.onChange=function(){var t=this.$el.val();t!=this.val&&this.setValue(t)},e.prototype.update=function(){this.val=this.getValue(),this.val!=this.$el.val()&&this.$el.val(this.val)},e}(y);e.inputDirective=b;var m=function(t){function e(){n(this,e),t.apply(this,arguments)}return r(e,t),e.prototype.update=function(){this.$el.attr("checked",!!this.getValue())},e}(u);e.checkedDirective=m;var g=function(t){function e(){n(this,e),t.apply(this,arguments)}return r(e,t),e.prototype.isBlock=function(){return!0},e}(a);e.IfDirective=g,o.each(t.exports,function(t,e){s.isDirective(t)&&t!==u&&t!==p&&s.register(o.kebabCase(e.replace(/Directive$/,"")),t)})},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t){var e=typeof t;if(!t||"function"!=e&&"object"!=e)return!1;for(var i=t;i=Object.getPrototypeOf(i);)if(i===a)return!0;return!1}function o(t,e){t in u&&console.warn("Directive["+t+"] is defined");var i=void 0;if(c.isPlainObject(e))i=function(e){var i=c.isFunction(e.constructor)?e.constructor:void 0;delete e.constructor;var n=function(){return function(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");a.apply(this,arguments),i&&i.apply(this,arguments)}}();return n.prototype=Object.create(a.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0},directiveName:{value:t,enumerable:!1,writable:!1,configurable:!1}}),Object.setPrototypeOf(n,a),n}(e);else{if(!r(e))throw TypeError("Invalid Directive Object "+e);i=e}return u[t]=i,i}function s(t){return u[t]}var c=i(1),a=(i(2),i(5),function(){function t(e,i,r){n(this,t),this.el=e,this.nodeType=e.nodeType,this.target=i,this.expr=r,this.directiveName||(this.directiveName=this.constructor.name)}return t.prototype.getDirectiveClassName=function(){return this.constructor.name?this.constructor.name:c.capitalize(this.directiveName)+"Directive"},t.prototype.bind=function(){throw"Abstract Method ["+this.getDirectiveClassName()+".bind]"},t.prototype.unbind=function(){throw"Abstract Method ["+this.getDirectiveClassName()+".unbind]"},t.prototype.isBlock=function(){return!1},t}()),u={};t.exports={AbstractDirective:a,register:o,getDirective:s,isDirective:r}},function(t,e){t.exports=i},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=i(1),o=function(){function t(e,i){n(this,t),this.bind=e,this.expression=i}return t.prototype.getValue=function(){return r.get(this.bind,this.expression)},t.prototype.setValue=function(t){r.set(this.bind,this.expression,t)},t.prototype.observe=function(t){return observer.observe(this.bind,this.expression,t)},t.prototype.unobserve=function(t){return observer.unobserve(this.bind,this.expression,t)},t}();t.exports=o}])});