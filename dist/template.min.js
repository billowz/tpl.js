!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("_"),require("jquery"),require("observer")):"function"==typeof define&&define.amd?define(["_","jquery","observer"],e):"object"==typeof exports?exports.datTempl=e(require("_"),require("jquery"),require("observer")):t.datTempl=e(t._,t.jQuery,t.observer)}(this,function(t,e,r){return function(t){function e(i){if(r[i])return r[i].exports;var n=r[i]={exports:{},id:i,loaded:!1};return t[i].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=r(1),o=r(2),s=r(3),c=s.TextDirective,u={delimiter:["{","}"]},p=function(){function t(e,r){i(this,t),this.template=o(e),this.cfg=n.assign(n.clone(u),r||{});var s=this.cfg.delimiter[0],c=this.cfg.delimiter[1];this.delimiterReg=new RegExp(s+"([^"+s+c+"]*)"+c,"g")}return t.prototype.complie=function(t){return new a(this,t)},t}(),a=function(){function t(e,r){if(i(this,t),!(e instanceof p))throw TypeError("Invalid Template "+e);this.template=e,this.bind=r,this.directives=[],this.el=this.template.template.clone(),this.init()}return t.prototype.init=function(){var t=this;n.each(this.el,function(e){t._parse(e)}),this.directives.forEach(function(e){t.bind=e.bind()})},t.prototype._parse=function(t){switch(t.nodeType){case 1:this._parseElement(t);break;case 3:this._parseText(t)}},t.prototype._parseElement=function(t){var e=this,r=!1;o(t);t.attributes&&n.each(t.attributes,function(t){t.name,t.value}),r||n.each(t.childNodes,function(t){e._parse(t)})},t.prototype._parseText=function(t){for(var e=t.data,r=void 0,i=0,n=this.template.delimiterReg;r=n.exec(e);)this._createTextNode(e.substr(i,n.lastIndex-r[0].length),t),this._createComment(r[0],t),this.directives.push(new c(this._createTextNode("binding",t),this.bind,r[1])),i=n.lastIndex;this._createTextNode(e.substr(i),t),o(t).remove()},t.prototype._createComment=function(t,e){var r=document.createComment(t);return o(r).insertBefore(e),r},t.prototype._createTextNode=function(t,e){if(t){var r=document.createTextNode(t);return o(r).insertBefore(e),r}return void 0},t}();p.registerDirective=s.registerDirective,p.getDirective=s.getDirective,t.exports=p},function(e,r){e.exports=t},function(t,r){t.exports=e},function(t,e,r){"use strict";function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){return t in h&&console.warn("Directive["+t+"] is defined"),e=function(t){function e(){this.prototype=Object.create(a.prototype,{constructor:{value:this,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(this,a):this.__proto__=a,a.apply(this,arguments),r&&r.apply(this,arguments)}var r=c.isFunction(t.constructor)?t.constructor:void 0;return delete t.constructor,c.assign(f.prototype,t),e}(e),h[t]=e,e}function s(t){return h[t]}var c=r(1),u=(r(2),r(4)),p=function(){function t(e,r){n(this,t),this.bind=e,this.expression=r}return t.prototype.getValue=function(){return c.get(this.bind,this.expression)},t.prototype.observe=function(t){return u.observe(this.bind,this.expression,t)},t.prototype.unobserve=function(t){return u.unobserve(this.bind,this.expression,t)},t}(),a=function(){function t(e,r,i){n(this,t),this.el=e,this.nodeType=e.nodeType,this.target=r,this.expr=i}return t.prototype.bind=function(){throw"Abstract Method [bind]"},t.prototype.unbind=function(){throw"Abstract Method [unbind]"},t.prototype.isBlock=function(){throw"Abstract Method [unbind]"},t}(),f=function(t){function e(r,i,o){n(this,e),t.call(this,r,i,o),this.expression=new p(i,o),this.update=this.update.bind(this)}return i(e,t),e.prototype.bind=function(){var t=this.expression.observe(this.update);return this.update(),t},e.prototype.unbind=function(){return this.expression.unobserve(this.update)},e.prototype.isBlock=function(){return!0},e.prototype.update=function(){this.el.data=this.expression.getValue()},e}(a),h={};t.exports={AbstractDirective:a,TextDirective:f,registerDirective:o,getDirective:s}},function(t,e){t.exports=r}])});